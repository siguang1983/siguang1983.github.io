<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />

    

    

    <title>å¤§æ’æ¡£</title>
    <meta name="author" content="siguang(å¨å­)" />
    <meta name="version" content="1.0.0" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <meta name="baidu-site-verification" content="F0CXvmUgA9" />

    
    
    <link rel="icon" href="/favicon.png">
    

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div class="app">
        <header class="header clearfix">
    <div id="nav" class="nav">
    <button id="open-panel" class="open-panel"><i class="icon-library"></i></button>

    <nav class="nav-inner">

        
        
        <li class="nav-item active">
            <a class="nav-link" href="/">é¦–é¡µ</a>
        </li>
        
        
        
        <li class="nav-item nav-item-tag">
            <a id="nav-tag" class="nav-link" href="#">æ ‡ç­¾</a>
            <div id="nav-tags" class="nav-tag-wrap">
                <i class="nav-tag-arrow"></i>
                
  <div class="widget-wrap">
    <h3 class="widget-title">
        <i class="icon-tag vm"></i>
        <span class="vm">Tags</span>
    </h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/EggJS/">EggJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS/">HTML+CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPè¯¦è§£/">HTTPè¯¦è§£</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Less/">Less</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-Native/">React Native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sass/">Sass</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Weex/">Weex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mockæ•°æ®/">mockæ•°æ®</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‡½æ•°å¼ç¼–ç¨‹/">å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯ä¼˜åŒ–/">å‰ç«¯ä¼˜åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯æ’ä»¶ç±»/">å‰ç«¯æ’ä»¶ç±»</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯æ„å»ºå·¥å…·/">å‰ç«¯æ„å»ºå·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¾®ä¿¡å°ç¨‹åº/">å¾®ä¿¡å°ç¨‹åº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ’ä»¶/">æ’ä»¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®åº“/">æ•°æ®åº“</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æœåŠ¡å™¨/">æœåŠ¡å™¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æœåŠ¡ç«¯å¼€å‘/">æœåŠ¡ç«¯å¼€å‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ¨¡æ¿å¼•æ“/">æ¨¡æ¿å¼•æ“</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æµè§ˆå™¨å†…æ ¸/">æµè§ˆå™¨å†…æ ¸</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç§»åŠ¨ç«¯/">ç§»åŠ¨ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç»æµå­¦/">ç»æµå­¦</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é‡‘è/">é‡‘è</a></li></ul>
    </div>
  </div>


            </div>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/archives">å½’æ¡£</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/atom.xml">è®¢é˜…</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/about">å…³äº</a>
        </li>
        
        
        

    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="http://siguang1983.github.io"></form>

        
        

        
        <div class="author-meta">
            
            <div class="author-avatar">
                <a href="/">
                    <img src="/images/avatar.jpg" title="siguang" style="box-shadow: 3px 3px 4px rgba(0,0,0, .2);">
                </a>
            </div>
            
            <div class="author-name">Siguang(å¨å­)</div>
            <div class="author-work">Front-end development</div>
            <div class="author-location">
                <i class="icon-location vm"></i>
                <span class="vm">BeiJing, China</span>
            </div>
            <div class="author-thread-wrap">
                <div class="author-threads clearfix">
                    <a class="thread-item" href="https://github.com/siguang1983" target="_blank"><i class="icon-github"></i></a>
                    <a class="thread-item" href="https://github.com/siguang1983" target="_blank"><i class="icon-circle-more"></i></a>
                    <a class="thread-item" href="https://github.com/siguang1983" target="_blank"><i class="icon-twitter"></i></a>
                </div>
            </div>
        </div>
        
    </div>
</aside>

</header>

        <div id="content" class="content">
    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/10/23/å¾®ä¿¡å°ç¨‹åºã€å…¬ä¼—å·å¼€å‘/">å¾®ä¿¡å°ç¨‹åºã€å…¬ä¼—å·å¼€å‘</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/10/23/å¾®ä¿¡å°ç¨‹åºã€å…¬ä¼—å·å¼€å‘/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-10-23T08:02:17.000Z" itemprop="datePublished">2017-10-23</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/å¾®ä¿¡å°ç¨‹åº/">å¾®ä¿¡å°ç¨‹åº</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="åŸºç¡€é—®é¢˜"><a href="#åŸºç¡€é—®é¢˜" class="headerlink" title="åŸºç¡€é—®é¢˜"></a>åŸºç¡€é—®é¢˜</h4><pre><code>ä¸€ã€appleIDçš„è·å–

    https://mp.weixin.qq.com/wxopen/basicprofile?action=index&amp;token=767275273&amp;lang=zh_CN

    åœ¨å¼€å‘è®¾ç½®é€‰é¡¹ =&gt; AppID(å°ç¨‹åºID)
</code></pre><h4 id="åŸºç¡€é…ç½®ã€æ–‡ä»¶ç±»å‹"><a href="#åŸºç¡€é…ç½®ã€æ–‡ä»¶ç±»å‹" class="headerlink" title="åŸºç¡€é…ç½®ã€æ–‡ä»¶ç±»å‹"></a>åŸºç¡€é…ç½®ã€æ–‡ä»¶ç±»å‹</h4><pre><code>ä¸€ã€æ–‡ä»¶ç±»å‹

    app.js è„šæœ¬æ–‡ä»¶ã€app.json é…ç½®æ–‡ä»¶ã€app.wxmlé¡µé¢ç»“æ„ã€app.wxssæ ·å¼æ–‡ä»¶

äºŒã€app.jsoné…ç½®

    {
        // é¡µé¢è·¯å¾„
        &quot;pages&quot;: [
            &quot;pages/index/index&quot;,
            &quot;pages/logs/index&quot;
        ],
        // é»˜è®¤é¡µé¢çª—å£è¡¨ç°
        &quot;window&quot;: {
            &quot;navigationBarTitleText&quot;: &quot;Demo&quot;
        },
        // åº•éƒ¨tabçš„è¡¨ç°
        &quot;tabBar&quot;: {
            &quot;list&quot;: [{
            &quot;pagePath&quot;: &quot;pages/index/index&quot;,
            &quot;text&quot;: &quot;é¦–é¡µ&quot;
            }, {
            &quot;pagePath&quot;: &quot;pages/logs/logs&quot;,
            &quot;text&quot;: &quot;æ—¥å¿—&quot;
            }]
        },
        // è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´
        &quot;networkTimeout&quot;: {
            &quot;request&quot;: 10000,
            &quot;downloadFile&quot;: 10000
        },
        // æ˜¯å¦å¼€å¯debugæ¨¡å¼
        &quot;debug&quot;: true
    }

    https://mp.weixin.qq.com/debug/wxadoc/dev/framework/config.html         // å„ç±»åˆ«é…ç½®
</code></pre><h4 id="App-js-ä¸»å‡½æ•°"><a href="#App-js-ä¸»å‡½æ•°" class="headerlink" title="App.js ä¸»å‡½æ•°"></a>App.js ä¸»å‡½æ•°</h4><pre><code>ä¸€ã€äº‹ä»¶

    1ã€onLaunch - ç›‘å¬å°ç¨‹åºåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–å®Œæˆä¼šè§¦å‘onLaunch

    2ã€onShow - ç›‘å¬å°ç¨‹åºæ˜¾ç¤ºï¼Œå°ç¨‹åºå¯åŠ¨ã€ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºï¼Œè§¦å‘onShow

    3ã€onHide - ç›‘å¬å°ç¨‹åºéšè—ï¼Œä»å‰å°è¿›å…¥åå°ï¼Œä¼šè§¦å‘onHide

    4ã€onError - é”™è¯¯ç›‘å¬ï¼Œè„šæœ¬é”™è¯¯æˆ–apiè°ƒç”¨å¤±è´¥è§¦å‘


äºŒã€onLaunchå’ŒonShowçš„å‚æ•° 

    App({
        onLaunch: function (path) {
            console.log(path);
        }
    })

    1ã€path - String    æ‰“å¼€å°ç¨‹åºçš„è·¯å¾„

    2ã€query - Object æ‰“å¼€å°ç¨‹åºçš„query

    3ã€scene - Number æ‰“å¼€å°ç¨‹åºçš„åœºæ™¯å€¼

    4ã€shareTicket - String    shareTicketï¼Œè¯¦è§ è·å–æ›´å¤šè½¬å‘ä¿¡æ¯

    5ã€referrerInfo - Object    å½“åœºæ™¯ä¸ºç”±ä»å¦ä¸€ä¸ªå°ç¨‹åºæˆ–å…¬ä¼—å·æˆ–Appæ‰“å¼€æ—¶ï¼Œè¿”å›æ­¤å­—æ®µ

        è¿”å›å€¼:
            1020    å…¬ä¼—å· profile é¡µç›¸å…³å°ç¨‹åºåˆ—è¡¨    è¿”å›æ¥æºå…¬ä¼—å· appId
            1035    å…¬ä¼—å·è‡ªå®šä¹‰èœå•    è¿”å›æ¥æºå…¬ä¼—å· appId
            1036    App åˆ†äº«æ¶ˆæ¯å¡ç‰‡    è¿”å›æ¥æºåº”ç”¨ appId
            1037    å°ç¨‹åºæ‰“å¼€å°ç¨‹åº    è¿”å›æ¥æºå°ç¨‹åº appId
            1038    ä»å¦ä¸€ä¸ªå°ç¨‹åºè¿”å›    è¿”å›æ¥æºå°ç¨‹åº appId
            1043    å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯    è¿”å›æ¥æºå…¬ä¼—å· appId

    6ã€referrerInfo.appId - String æ¥æºå°ç¨‹åºæˆ–å…¬ä¼—å·æˆ–Appçš„ appIdï¼Œè¯¦è§ä¸‹æ–¹è¯´æ˜

    7ã€referrerInfo.extraData - Object æ¥æºå°ç¨‹åºä¼ è¿‡æ¥çš„æ•°æ®ï¼Œscene=1037æˆ–1038æ—¶æ”¯æŒ


ä¸‰ã€getApp() å…¨å±€å‡½æ•°ç”¨æ¥è·å–å°ç¨‹åºå®ä¾‹

    var appInstance = getApp();

    app.globalData.userInfo;        // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
</code></pre><h4 id="Page-ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢"><a href="#Page-ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢" class="headerlink" title="Page() ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢"></a>Page() ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢</h4><pre><code>æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶å¤„ç†

ä¸€ã€ç”Ÿå‘½å‘¨æœŸ

    onLoad: é¡µé¢åŠ è½½ï¼Œä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡

    onShow: é¡µé¢æ˜¾ç¤º 

    onReady: é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ

    onHide: é¡µé¢éšè—

    onUnload: é¡µé¢å¸è½½

    /** ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½ **/
    onLoad: function (options) {
        console.log(options);
    },

    /** ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ **/
    onReady: function () {

    },

    /** ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º **/
    onShow: function () {

    },

    /** ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè— **/
    onHide: function () {

    },

    /** ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½ **/
    onUnload: function () {

    },

    /** é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ **/
    onPullDownRefresh: function (e) {
        this.setData({
            updata: JSON.stringify(e)
        })
        console.log(e)
    },

    /** é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•° **/
    onReachBottom: function (e) {
        this.setData({
            updata: JSON.stringify(e)
        })
        console.log(e)
    },

    /** ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº« **/
    onShareAppMessage: function () {

    }


äºŒã€äº‹ä»¶æ–¹æ³•

    data - é¡µé¢åˆå§‹æ•°æ®, WXMLä¸­è°ƒç”¨ {{test}}

    onload - ç›‘å¬é¡µé¢åŠ è½½

    onReady - ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ

    onShow - ç›‘å¬é¡µé¢æ˜¾ç¤º

    onHide - ç›‘å¬é¡µé¢éšè—

    onUnload - ç›‘å¬é¡µé¢å¸è½½

    onPullDowRefesh - ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ

    onReachBottom - ä¸Šæ‹‰è§¦åº•äº‹ä»¶

    onShareAppMessage - ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘

        onShareAppMessage: function () {
            return {
            title: &apos;è‡ªå®šä¹‰è½¬å‘æ ‡é¢˜&apos;,
            path: &apos;/page/user?id=123&apos;
            }
        }

    onPageScroll - é¡µé¢æ»šåŠ¨è§¦å‘


ä¸‰ã€ç»‘å®šäº‹ä»¶

    &lt;view bindTap=&quot;viewTap&quot;&gt;click me&lt;/view&gt;

    Page({
        data:{
            message: &apos;view tap&apos;
        },
        viewTap: () =&gt; {
            console.log(this.message)
        }
    })


å››ã€Page.prototype.route - è·å–å½“å‰é¡µé¢çš„è·¯å¾„

äº”ã€Page.prototype.setData() - ç”¨äºå°†æ•°æ®ä»é€»è¾‘å±‚å‘é€åˆ°è§†å›¾å±‚ï¼ŒåŒæ—¶æ”¹å˜å¯¹åº”çš„this.dataçš„å€¼

    Page({
        data:{
            username: &apos;siguang&apos;
        }
        login: ()=&gt;{
            this.setData({
                username: &apos;lulu&apos;
            })
        }
    })
</code></pre><h4 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><pre><code>æ‰€æœ‰é¡µé¢çš„è·¯ç”±å…¨éƒ¨ç”±æ¡†æ¶ç®¡ç†

ä¸€ã€é¡µé¢æ ˆ

    1ã€åˆå§‹åŒ– - æ–°é¡µé¢å…¥æ ˆ

    2ã€æ‰“å¼€æ–°é¡µé¢ - æ–°é¡µé¢å…¥æ ˆã€‚  è°ƒç”¨ API wx.navigateTo æˆ–ä½¿ç”¨ç»„ä»¶ &lt;navigator open-type=&quot;navigateTo&quot;/&gt;

    3ã€é¡µé¢é‡å®šå‘ - å½“å‰é¡µé¢å‡ºæ ˆï¼Œæ–°é¡µé¢å…¥æ ˆã€‚  è°ƒç”¨ API wx.redirectTo æˆ–ä½¿ç”¨ç»„ä»¶ &lt;navigator open-type=&quot;redirectTo&quot;/&gt;

    4ã€é¡µé¢è¿”å› - é¡µé¢ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°ç›®æ ‡è¿”å›é¡µï¼Œæ–°é¡µé¢å…¥æ ˆã€‚ è°ƒç”¨ API wx.navigateBack æˆ–ä½¿ç”¨ç»„ä»¶&lt;navigator open-type=&quot;navigateBack&quot;&gt;æˆ–ç”¨æˆ·æŒ‰å·¦ä¸Šè§’è¿”å›æŒ‰é’®

    5ã€Tab - åˆ‡æ¢    é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„ Tab é¡µé¢ã€‚ è°ƒç”¨ API wx.switchTab æˆ–ä½¿ç”¨ç»„ä»¶ &lt;navigator open-type=&quot;switchTab&quot;/&gt; æˆ–ç”¨æˆ·åˆ‡æ¢ Tab

    6ã€é‡åŠ è½½ - é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„é¡µé¢ã€‚ è°ƒç”¨ API wx.reLaunch æˆ–ä½¿ç”¨ç»„ä»¶ &lt;navigator open-type=&quot;reLaunch&quot;/&gt;

    Example:
        bindViewTap: function() {
            wx.navigateTo({
                url: &apos;../logs/logs&apos;
            })
        }

äºŒã€getCurrentPages() è·å–å½“å‰é¡µé¢çš„æ ˆçš„å®ä¾‹

ä¸‰ã€Tips

    navigateTo, redirectTo åªèƒ½æ‰“å¼€é tabBar é¡µé¢ã€‚
    switchTab åªèƒ½æ‰“å¼€ tabBar é¡µé¢ã€‚
    reLaunch å¯ä»¥æ‰“å¼€ä»»æ„é¡µé¢ã€‚
</code></pre><h4 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h4><pre><code>ä¸€ã€å…¨å±€å˜é‡å’Œæ–¹æ³•

    å…¨å±€æ–¹æ³•é€šè¿‡ getApp()è·å–å…¨å±€çš„åº”ç”¨å®ä¾‹

    å…¨å±€æ•°æ®è®¾ç½®:

        App({
            globalData: 1
        })


äºŒã€æ¨¡å—åŒ–

    1ã€å¯¼å‡º

        module.exports æˆ– exportså¯¹å¤–æš´éœ²æ¥å£, exportsæ˜¯module.exportsçš„ä¸€ä¸ªå¼•ç”¨

        å°ç¨‹åºä¸æ”¯æŒç›´æ¥å¼•å…¥node_modules, å¦‚æœéœ€è¦å°±å°†ä»£ç æ‹·åˆ°ç›®å½•ä¸­

        // common.js
        function sayHello(name){
            console.log(`Hello ${name}`);
        }

        module.exports.sayHello = sayHello;


    2ã€å¼•ç”¨

        conmmon = require(&apos;common.js&apos;);
        Page({
            helloMina: () =&gt;{
                common.sayHello(&apos;mina&apos;);
            }
        })
</code></pre><h4 id="è§†å›¾å±‚"><a href="#è§†å›¾å±‚" class="headerlink" title="è§†å›¾å±‚"></a>è§†å›¾å±‚</h4><pre><code>è§†å›¾å±‚WXMWXSSç¼–å†™, ç”±ç»„ä»¶è¿›è¡Œå±•ç¤º

ä¸€ã€WXML

    1ã€æ•°æ®ç»‘å®š

        æ™®é€šç»‘å®š: &lt;view&gt;{{message}}&lt;/view&gt;

        å±æ€§ç»‘å®š: &lt;view id=&quot;item-{{id}}&quot;&gt; &lt;/view&gt;

        æ§åˆ¶å±æ€§: &lt;view wx:if=&quot;{{condition}}&quot;&gt; &lt;/view&gt;


    2ã€å¾ªç¯æ¸²æŸ“

        // æ³¨æ„è¿™é‡Œå–åˆ°å½“å‰æ•°æ®è¦ç”¨item
        &lt;view wx:for=&quot;{{arr}}&quot;&gt;{{item}}&lt;/view&gt;

        æ•°ç»„ä¸‹æ ‡:
            &lt;view wx:for=&quot;{{arr}}&quot;&gt;
                å§“å:{{item.name}} å¹´é¾„:{{item.age}} åºå·:{{index}}
            &lt;/view&gt;

            ä¸¤è€…ç›¸åŒ
            &lt;view wx:for=&quot;{{arr}}&quot; wx:for-index=&quot;idx&quot; wx:for-item=&quot;itemName&quot;&gt;
                å§“å:{{itemName.name}} å¹´é¾„:{{itemName.age}} åºå·:{{idx}}
            &lt;/view&gt;


    3ã€æ¡ä»¶æ¸²æŸ“

        &lt;view wx:if=&quot;{{view == 'webView'}}&quot;&gt;web view&lt;/view&gt;
        &lt;view wx:elif=&quot;{{view == 'app'}}&quot;&gt;app&lt;/view&gt;
        &lt;view wx:else=&quot;{{view == 'mina'}}&quot;&gt;mina&lt;/view&gt;

        Page({
            data: {
                view: &apos;app&apos;
            }
        })


    4ã€æ¨¡æ¿

        name: æ¨¡æ¿å    is: æ‰€è¦è°ƒç”¨çš„æ¨¡æ¿å    data: ä¼ å…¥çš„æ•°æ®

        &lt;template name=&quot;staffName&quot;&gt;
            &lt;view&gt;
                FirstName: {{firstName}}, lastName: {{lastName}}
            &lt;/view&gt;
        &lt;/template&gt;

        &lt;template is=&quot;staffName&quot; data=&quot;{{...staffA}}&quot;&gt;&lt;/template&gt;
        &lt;template is=&quot;staffName&quot; data=&quot;{{...staffB}}&quot;&gt;&lt;/template&gt;

        Page({
            data: {
                staffName: {fristName: &apos;sigunag&apos;, lastName: &apos;haha&apos;},
                staffName: {fristName: &apos;yuwan&apos;, lastName: &apos;lulu&apos;},
            }
        })
</code></pre><h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><pre><code>&lt;view bindtap=&quot;add&quot;&gt;{{count}}&lt;/view&gt;

Page({
    data: {
        count: 1
    },
    add: (event)=&gt;{
        this.setData({
            count: this.data.count++
        })
    }
})

ä¸€ã€äº‹ä»¶åˆ†ç±»

    åˆ†ä¸ºå†’æ³¡äº‹ä»¶å’Œéå†’æ³¡äº‹ä»¶

    å†’æ³¡äº‹ä»¶:  bindtouchstart å‰é¢åŠ bind

        touchstart    æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œå¼€å§‹    
        touchmove    æ‰‹æŒ‡è§¦æ‘¸åç§»åŠ¨    
        touchcancel    æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œè¢«æ‰“æ–­ï¼Œå¦‚æ¥ç”µæé†’ï¼Œå¼¹çª—    
        touchend    æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œç»“æŸ    
        tap    æ‰‹æŒ‡è§¦æ‘¸åé©¬ä¸Šç¦»å¼€    
        longpress    æ‰‹æŒ‡è§¦æ‘¸åï¼Œè¶…è¿‡350mså†ç¦»å¼€ï¼Œå¦‚æœæŒ‡å®šäº†äº‹ä»¶å›è°ƒå‡½æ•°å¹¶è§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œtapäº‹ä»¶å°†ä¸è¢«è§¦å‘    1.5.0
        longtap    æ‰‹æŒ‡è§¦æ‘¸åï¼Œè¶…è¿‡350mså†ç¦»å¼€ï¼ˆæ¨èä½¿ç”¨longpressäº‹ä»¶ä»£æ›¿ï¼‰    
        transitionend    ä¼šåœ¨ WXSS transition æˆ– wx.createAnimation åŠ¨ç”»ç»“æŸåè§¦å‘    
        animationstart    ä¼šåœ¨ä¸€ä¸ª WXSS animation åŠ¨ç”»å¼€å§‹æ—¶è§¦å‘    
        animationiteration    ä¼šåœ¨ä¸€ä¸ª WXSS animation ä¸€æ¬¡è¿­ä»£ç»“æŸæ—¶è§¦å‘    
        animationend    ä¼šåœ¨ä¸€ä¸ª WXSS animation åŠ¨ç”»å®Œæˆæ—¶è§¦å‘

    äº‹ä»¶ç»‘å®šå’Œå†’æ³¡:

        bind ä¸ä¼šé˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œbindtap
        catch å¯ä»¥é˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ã€‚catchtap

    äº‹ä»¶æ•è·:

        æ•è·é˜¶æ®µç›‘å¬äº‹ä»¶æ—¶ï¼Œé‡‡ç”¨capture-bindã€capture-catchå…³é”®å­—, åè€…å°†ä¸­æ–­æ•è·é˜¶æ®µå’Œå–æ¶ˆå†’æ³¡

    äº‹ä»¶å¯¹è±¡:

        baseEventå¯¹è±¡


äºŒã€viewã€blockæ ‡ç­¾

    view æ¸²æŸ“å•ç‹¬ä¸€è¡Œç±»ä¼¼å—å…ƒç´ 

    block æ¸²æŸ“æˆå†…è”å…ƒç´ 
</code></pre><h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h4><pre><code>æä¾›ä¸¤ç§å¼•ç”¨æ–¹æ³•import å’Œ include

ä¸€ã€import å¼•ç”¨å¤–éƒ¨çš„&lt;template&gt;æ¨¡æ¿

    &lt;!-- item.wxml --&gt;
    &lt;template name=&quot;item&quot;&gt;
        &lt;text&gt;{{text}}&lt;/text&gt;
    &lt;/template&gt;

    &lt;!--  index.wxml  --&gt;
    &lt;import src=&quot;item.wxml&quot;/&gt;
    &lt;template is=&quot;item&quot; data=&quot;{{text: 'forbar'}}&quot;/&gt;


äºŒã€include å¼•ç”¨é&lt;template&gt;æ¨¡æ¿çš„æ–‡ä»¶ï¼Œå…¬ç”¨çš„å¤´å°¾ç­‰

    &lt;!-- index.wxml --&gt;
    &lt;include src=&quot;header.wxml&quot;/&gt;
    &lt;view&gt; body &lt;/view&gt;
    &lt;include src=&quot;footer.wxml&quot;/&gt;

    &lt;!-- header.wxml --&gt;
    &lt;view&gt; header &lt;/view&gt;

    &lt;!-- footer.wxml --&gt;
    &lt;view&gt; footer &lt;/view&gt;
</code></pre><h4 id="WXSS-æ ·å¼è¯­è¨€"><a href="#WXSS-æ ·å¼è¯­è¨€" class="headerlink" title="WXSS æ ·å¼è¯­è¨€"></a>WXSS æ ·å¼è¯­è¨€</h4><pre><code>å°ºå¯¸å•ä½: rex, å¯ä»¥æ ¹æ®å±å¹•å®½åº¦è‡ªè¡Œè‡ªé€‚åº”

ä¸€ã€æ ·å¼å¯¼å…¥

    @import &apos;common.wxss&apos;
    .middle-p {
        padding: 15px;
    }

äºŒã€å†…è”æ ·å¼
    data: {
        color: &apos;#ddd&apos;
    }
    &lt;view style=&quot;color: {{color}}&quot;&gt;

    &lt;view class=&quot;middle-p&quot;&gt;        // å¤šä¸ªclassä½¿ç”¨ç©ºæ ¼åˆ†éš”

ä¸‰ã€å…¨å±€ã€å±€éƒ¨æ ·å¼

    å®šä¹‰åœ¨app.wxssä¸­çš„æ ·å¼ä¸ºå…¨å±€

    æ¯ä¸ªé¡µçš„wxssä¸ºå±€éƒ¨
</code></pre><h4 id="WXS-è„šæœ¬"><a href="#WXS-è„šæœ¬" class="headerlink" title="WXS è„šæœ¬"></a>WXS è„šæœ¬</h4><pre><code>å°ç¨‹åºè‡ªå·±çš„ä¸€å¥—è„šæœ¬è¯­è¨€, å¯ä»¥ç›´æ¥ç¼–å†™åˆ°WXMLä¸­, ä¹Ÿå¯ä»¥å•ç‹¬å†™æˆä¸€ä¸ª.wxsæ–‡ä»¶

ä¸€ã€å†™åˆ°wxmlä¸­

    &lt;!-- index.wxml&gt;
    &lt;wxs module=&quot;m1&quot;&gt;
        var msg = &apos;hello world&apos;;
        module.exports.message = msg
    &lt;/wxs&gt;

    &lt;view&gt;
        {{m1.message}}
    &lt;/view&gt;

äºŒã€å†™æˆä¸€ä¸ª.wxsæ–‡ä»¶

    // pages/comm.wxs
    // å¦‚æœcomm.wxsæ–‡ä»¶ä¸­è¦å¼•ç”¨å…¶å®ƒçš„wxsæ–‡ä»¶ä½¿ç”¨require,  var tool = require(&apos;./tools.wxs&apos;);

    var foo = &quot;&apos;hello world&apos; from comm.wxs&quot;;
    var bar = function(d) {
        return d;
    }
    module.exports = {
        foo: foo,
        bar: bar
    };

    // é¡µé¢å¼•ç”¨
    &lt;wxs src=&quot;./../tools.wxs&quot; module=&quot;tools&quot; /&gt;
    &lt;view&gt; {{tools.msg}} &lt;/view&gt;
</code></pre><h4 id="è¿è¡Œæœºåˆ¶"><a href="#è¿è¡Œæœºåˆ¶" class="headerlink" title="è¿è¡Œæœºåˆ¶"></a>è¿è¡Œæœºåˆ¶</h4><pre><code>å°ç¨‹åºä¸¤ç§å¯åŠ¨æ–¹å¼:

    å†·å¯åŠ¨: ç”¨æˆ·é¦–æ¬¡æ‰“å¼€æˆ–å°ç¨‹åºè¢«å¾®ä¿¡ä¸»åŠ¨é”€æ¯ååœ¨æ¬¡æ‰“å¼€çš„æƒ…å†µï¼Œ

    çƒ­å¯åŠ¨: ç”¨æˆ·å·²ç»æ‰“å¼€æŸä¸ªå°ç¨‹åºï¼Œåœ¨ä¸€å®šæ—¶é—´å†…åœ¨æ¬¡æ‰“å¼€ï¼Œæ­¤æ—¶æ— éœ€é‡æ–°å¯åŠ¨ï¼Œåªéœ€å°†åå°åˆ‡æ¢åˆ°å‰å°
</code></pre><h4 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h4><pre><code>ç½‘ç»œè¯·æ±‚requestã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½uploadFileã€webSocketéƒ½éœ€è¦è®¾ç½®æŒ‡å®šçš„æœåŠ¡å™¨
</code></pre><h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><pre><code>wx.getSystemInfo æˆ–è€… wx.getSystemInfoSync è·å–å°ç¨‹åºçš„åŸºæœ¬åº“ç‰ˆæœ¬

wx.canIUse åˆ¤æ–­æ˜¯å¦å¯ä»¥åœ¨è¯¥åŸºç¡€åº“ç‰ˆæœ¬ä¸‹ç›´æ¥ä½¿ç”¨å¯¹åº”çš„APIæˆ–è€…ç»„ä»¶
</code></pre><h4 id="å¼€å‘æ€»ç»“"><a href="#å¼€å‘æ€»ç»“" class="headerlink" title="å¼€å‘æ€»ç»“"></a>å¼€å‘æ€»ç»“</h4><pre><code>1ã€å°ç¨‹åºåˆå§‹æŒ‡å®šé¡µé¢

    app.jsonä¸­, è°ƒæ•´pagesæ•°ç»„çš„é¡ºåº, ç¬¬ä¸€ä¸ªå°±æ˜¯æœ€å…ˆè¢«è½½å…¥

    &quot;pages&quot;:[
        &quot;pages/my/my&quot;,
        &quot;pages/index/index&quot;,
        &quot;pages/logs/logs&quot;    
    ]

2ã€å½“å‰é¡µé¢ä½¿ç”¨ä¿®æ”¹æ ‡é¢˜

    åœ¨å½“å‰é¡µé¢ä¸‹çš„.jsonæ–‡ä»¶ä¸­åŠ å…¥

    goods-details.json
    {
        &quot;navigationBarTitleText&quot;: &quot;å•†å“è¯¦æƒ…&quot;
    }

3ã€è·å–å…ƒç´ ä¸Šçš„è‡ªå®šä¹‰å±æ€§å€¼

    1) evt.currentTarget.dataset.propertyindex;        

    2) evt.detail

    &lt;view bindtap=&quot;labelItemTap&quot; data-propertyindex=&quot;{{idx}}&quot;&gt;&lt;/view&gt;        // æ³¨æ„è¿™é‡Œè‡ªå®šä¹‰å±æ€§éœ€è¦ä»¥&quot;data-&quot;å¼€å¤´ï¼Œå¹¶ä¸”ä¸èƒ½ä¸ºå¤§å†™ï¼Œå¦‚æœæœ‰å¤§å†™å–å€¼æ—¶å…¨éƒ¨ä¸ºå°å†™

    js:

    labelItemTap: function(evt){
        let val = evt.currentTarget.dataset.propertyindex;
    }

4ã€åœ¨app.jsonä¸­é…ç½®pagesçš„è·¯å¾„ä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•å’ŒåŸºæœ¬æ–‡ä»¶è¿™é‡Œ

    è¿™é‡Œæ³¨æ„åˆ›å»ºjsæ—¶å€™ä¼šå°†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œä¸Šæ‹‰ä¸‹æ‹‰åˆ·æ–°æ–¹æ³•å…¨éƒ¨éƒ½åˆ›å»ºå¥½ï¼Œä¸å¿…é‡å†™ onPullDownRefresh()ã€onReachBottom();
</code></pre><h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><pre><code>å¦‚æœä¿®æ”¹ checkbox çš„æ ·å¼

æ—¶é—´é€‰æ‹©å™¨åªæœ‰æ—¶ã€åˆ†ï¼Œæ²¡æœ‰ç§’

slideræ»‘åŠ¨ç»„ä»¶æ‹–åŠ¨å—ä¸èƒ½æ”¹é¢œè‰²

å°ç¨‹åºä¸‹æ‹‰åˆ·æ–°ä¸è§¦å‘ onPullDownRefresh
</code></pre><h4 id="å°ç¨‹åºä¸RNç›¸æ¯”"><a href="#å°ç¨‹åºä¸RNç›¸æ¯”" class="headerlink" title="å°ç¨‹åºä¸RNç›¸æ¯”"></a>å°ç¨‹åºä¸RNç›¸æ¯”</h4><pre><code>å°ç¨‹åºå¸ƒå±€å†™æ³•ç®€å•ï¼ŒRNçš„å¸ƒå±€æ¯”è¾ƒéº»çƒ¦

å°ç¨‹åºçš„ç»„ä»¶ç®€å•ï¼ŒRNç»„ä»¶éº»çƒ¦ï¼Œå¹¶ä¸”IOSå’ŒAndroidå…¼å®¹

RNå¯ä»¥éšæ„å‘èµ·ç½‘ç»œè¯·æ±‚è®¿é—®æ•°æ®ï¼Œå°ç¨‹åºéœ€è¦æŒ‡å®šæœåŠ¡å™¨å¹¶ä¸”éœ€è¦httpsåè®®

RNéœ€è¦ä¸é€šè¿‡Xcodeæ¥è¿›å»æ‰“åŒ…ã€å¹¶ä¸”éœ€è¦åœ¨appStorè¿›è¡Œå‘å¸ƒå®¡æ ¸

RNåšçš„appéœ€è¦åˆ°å•†åº—ä¸‹è½½ä½¿ç”¨ï¼Œå°ç¨‹åºå‘å¸ƒååœ¨å¾®ä¿¡å°±å¯ä»¥æ‰¾åˆ°
</code></pre><p>| <a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html" target="_blank" rel="noopener">http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html</a>        // å…¬ä¼—æœåŠ¡å¹³å°æ‰€æœ‰çš„sdk<br>| <a href="https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html?t=20171013" target="_blank" rel="noopener">https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html?t=20171013</a>  // å°ç¨‹åº<br>| <a href="https://www.w3cschool.cn/weixinapp/9wou1q8j.html" target="_blank" rel="noopener">https://www.w3cschool.cn/weixinapp/9wou1q8j.html</a><br>| <a href="http://203.195.235.76/jssdk/" target="_blank" rel="noopener">http://203.195.235.76/jssdk/</a>   å°ç¨‹åºdemo<br>| <a href="https://github.com/gooking/awesome-wechat-weapp" target="_blank" rel="noopener">https://github.com/gooking/awesome-wechat-weapp</a>    å¾®ä¿¡å°ç¨‹åºå¼€å‘èµ„æºæ±‡æ€»</p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/09/20/numjucksæ¨¡æ¿/">numjucksæ¨¡æ¿</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/09/20/numjucksæ¨¡æ¿/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-09-20T03:41:55.000Z" itemprop="datePublished">2017-09-20</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æ¨¡æ¿å¼•æ“/">æ¨¡æ¿å¼•æ“</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="numjucks"><a href="#numjucks" class="headerlink" title="numjucks"></a>numjucks</h4><pre><code>numjuckså¯ä»¥ç”¨ä»»æ„æ‰©å±•åæ¥å‘½åæ¨¡æ¿åæ–‡ä»¶ï¼Œæ¨èä½¿ç”¨&apos;.njk&apos;

$ npm install nunjucks

require(&apos;nunjucks&apos;);
</code></pre><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><pre><code>{{ usernmae }}    {{ foo.bar }}
</code></pre><h4 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h4><pre><code>{{ foo | title }}    {{ foo | join(',') }}
</code></pre><h4 id="æ¨¡æ¿ç»§æ‰¿"><a href="#æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="æ¨¡æ¿ç»§æ‰¿"></a>æ¨¡æ¿ç»§æ‰¿</h4><pre><code>å®šä¹‰ä¸€ä¸ª&quot;block&quot;ï¼Œå­æ¨¡æ¿å¯ä»¥è¦†ç›–å®ƒ

ä¸€ã€Example

    A.html

        {% block header %}{% endblock %}

			<div>
				aaaa
			</div>

		B.html

			{% extends 'A.html' %}

			{% block header %}
				<div>
					<ul>
						<li>aaaa</li>
						<li>bbbb</li>
						<li>cccc</li>
					</ul>
				</div>
			{% endblock %}

äºŒã€super()
</code></pre><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><pre><code>{% if num > 20 %}
		<div>
			å¤§äº20æ˜¾ç¤ºäº›å†…å®¹
		</div>
	{% endif %}


{% if num > 20 %}
		<span>å¤§äº20</span>
	{% elif num < 6 %}
		<span>å°äº6</span>
	{% else %}
		<span>å…¶å®ƒ</span>
	{% endif %}
</code></pre><h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><pre><code>ä¸€ã€éå†æ•°ç»„

    var items = [{ title: &quot;foo&quot;, id: 1 }, { title: &quot;bar&quot;, id: 2}];

    &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt;
    &lt;ul&gt;
        {% for item in items %}
				<li> {{item.title}} </li>
			{% endfor %}
    &lt;/ul&gt;

äºŒã€éå†å¯¹è±¡

    var food = {
        &apos;ketchup&apos;: &apos;5 tbsp&apos;,
        &apos;mustard&apos;: &apos;1 tbsp&apos;,
        &apos;pickle&apos;: &apos;0 tbsp&apos;
    };

    &lt;div&gt;
        {% for key, value in food %}
				<p>{{key}} - {{value}}</p>
			{% endfor %}
    &lt;/div&gt;
</code></pre><h4 id="set-è®¾ç½®å’Œä¿®æ”¹å˜é‡"><a href="#set-è®¾ç½®å’Œä¿®æ”¹å˜é‡" class="headerlink" title="set è®¾ç½®å’Œä¿®æ”¹å˜é‡"></a>set è®¾ç½®å’Œä¿®æ”¹å˜é‡</h4><pre><code>let username = &apos;siguang&apos;;

{{ username }}            // siguang
{% set username = 'lulu' %}
{{ username }}            // lulu
</code></pre><h4 id="extends-æŒ‡å®šæ¨¡æ¿ç»§æ‰¿"><a href="#extends-æŒ‡å®šæ¨¡æ¿ç»§æ‰¿" class="headerlink" title="extends æŒ‡å®šæ¨¡æ¿ç»§æ‰¿"></a>extends æŒ‡å®šæ¨¡æ¿ç»§æ‰¿</h4><pre><code>{% extends 'A.html' %}

{% block header %}
		<div>
			<ul>
				<li>aaaa</li>
				<li>bbbb</li>
				<li>cccc</li>
			</ul>
		</div>
	{% endblock %}
</code></pre><h4 id="block-åŒºå—"><a href="#block-åŒºå—" class="headerlink" title="block åŒºå—"></a>block åŒºå—</h4><pre><code>{% block css %}
		<link rel="stylesheet" href="app.css">
	{% endblock %}
</code></pre><h4 id="include-å¯ä»¥å¼•ç”¨çš„æ¨¡æ¿"><a href="#include-å¯ä»¥å¼•ç”¨çš„æ¨¡æ¿" class="headerlink" title="include å¯ä»¥å¼•ç”¨çš„æ¨¡æ¿"></a>include å¯ä»¥å¼•ç”¨çš„æ¨¡æ¿</h4><pre><code>{% include "item.html" %}
</code></pre><h4 id="import-åŠ è½½ä¸åŒçš„æ¨¡æ¿"><a href="#import-åŠ è½½ä¸åŒçš„æ¨¡æ¿" class="headerlink" title="import åŠ è½½ä¸åŒçš„æ¨¡æ¿"></a>import åŠ è½½ä¸åŒçš„æ¨¡æ¿</h4><h4 id="filter-åŒºå—ä¸­å†…å®¹è°ƒç”¨è¿‡æ»¤å™¨"><a href="#filter-åŒºå—ä¸­å†…å®¹è°ƒç”¨è¿‡æ»¤å™¨" class="headerlink" title="filter åŒºå—ä¸­å†…å®¹è°ƒç”¨è¿‡æ»¤å™¨"></a>filter åŒºå—ä¸­å†…å®¹è°ƒç”¨è¿‡æ»¤å™¨</h4><pre><code>{% filter replace("force", "forth") %}
		may the force be with you
	{% endfilter %}
</code></pre><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><h4 id="å»é™¤å‰åç©ºæ ¼"><a href="#å»é™¤å‰åç©ºæ ¼" class="headerlink" title="å»é™¤å‰åç©ºæ ¼"></a>å»é™¤å‰åç©ºæ ¼</h4><pre><code>var str = &apos; sssfsdfs &apos;;

{% -%}
</code></pre><h4 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h4><pre><code>è¡¨è¾¾å¼ Stringã€Numberã€Arrayã€Dictsã€Boolean

è¿ç®—ç¬¦ +ã€-ã€/ã€//ã€%ã€*ã€**

æ¯”è¾ƒ ==ã€===ã€!=ã€!==ã€&gt;ã€&gt;=ã€&lt;ã€&lt;=

é€»è¾‘ andã€orã€not   {% if users and showUsers %} ... {% endif %}
</code></pre><h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><pre><code>ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™é‡Œå¯ä»¥æ‰§è¡Œ {{ foo(1,2,3) }}
</code></pre><h4 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h4><pre><code>{{ /bar$/g }}

g: åº”ç”¨åˆ°å…¨å±€
i: ä¸åŒºåˆ†å¤§å°å†™
m: å¤šè¡Œæ¨¡å¼
y: ç²˜æ€§æ”¯æŒï¼ˆsticky
</code></pre><blockquote>
<p>å‚è€ƒèµ„æ–™<br><a href="http://mozilla.github.io/nunjucks/cn/templating.html" target="_blank" rel="noopener">http://mozilla.github.io/nunjucks/cn/templating.html</a></p>
</blockquote>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/09/20/Jadeæ¨¡æ¿/">Jade æ¨¡æ¿</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/09/20/Jadeæ¨¡æ¿/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-09-20T03:41:55.000Z" itemprop="datePublished">2017-09-20</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æ¨¡æ¿å¼•æ“/">æ¨¡æ¿å¼•æ“</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="jadeä»‹ç»ã€å®‰è£…"><a href="#jadeä»‹ç»ã€å®‰è£…" class="headerlink" title="jadeä»‹ç»ã€å®‰è£…"></a>jadeä»‹ç»ã€å®‰è£…</h4><pre><code>jadeæ˜¯å‰åç«¯éƒ½å¯ä»¥ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“7

1ã€å®‰è£…:

    sudo npm i -g jade


2ã€ä»‹ç»

    å…ƒç´ æ ‡ç­¾ä¸éœ€è¦å†™&lt;&gt;

    å­å…ƒç´ ä¸çˆ¶å…ƒç´ éœ€è¦æ¢è¡Œå¹¶tabç¼©è¿›

    æ ‡ç­¾ä¸æ–‡æœ¬éœ€è¦ä½¿ç”¨ç©ºæ ¼æ¥éš”å¼€


3ã€jadeçš„ç¼ºç‚¹

    1ï¼‰å¯ç§»æ¤æ€§å·®

    2ï¼‰è°ƒè¯•å›°éš¾

    3ï¼‰æ€§èƒ½ä¸€èˆ¬

4ã€åˆå§‹é˜¶æ®µå¼€å‘æ•ˆç‡ï¼Œç¨³å®šæ€§æˆå’Œåä½œçš„æˆæœ¬
</code></pre><h4 id="jade-å¤´å°¾æ ‡ç­¾"><a href="#jade-å¤´å°¾æ ‡ç­¾" class="headerlink" title="jade å¤´å°¾æ ‡ç­¾"></a>jade å¤´å°¾æ ‡ç­¾</h4><pre><code>&lt;!DOCTYPE&gt;
html
    head
        title ${title}

    body
        h1 æ ‡é¢˜å†…å®¹
</code></pre><h4 id="å‘½ä»¤è¡Œç¼–è¯‘jadeæ–‡ä»¶"><a href="#å‘½ä»¤è¡Œç¼–è¯‘jadeæ–‡ä»¶" class="headerlink" title="å‘½ä»¤è¡Œç¼–è¯‘jadeæ–‡ä»¶"></a>å‘½ä»¤è¡Œç¼–è¯‘jadeæ–‡ä»¶</h4><pre><code># jade index.jade         // ä¼šå°†jadeæ–‡ä»¶ç¼–è¯‘æˆåŒçº§ç›®å½•çš„index.htmlæ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯æ²¡æœ‰ä»£ç æ ¼å¼çš„åªæœ‰ä¸€è¡Œ

# jade -P index.jade     // æœ‰ç¼©è¿›ï¼Œå¯è¯»çš„æ ¼å¼

# jade -P -w index.jade // ä¾¦å¬jadeæ–‡ä»¶æœ‰å˜åŒ–æ‰§è¡Œè½¬æ¢çš„å‘½ä»¤

å°æŠ€å·§: åœ¨sublimeä¸­æ‰“å¼€ index.jade å’Œ index.htmlæ–‡ä»¶, é€‰æ‹©viewèœå• -&gt; layout/ columns2 å˜æˆä¸¤åˆ—ï¼Œå°†index.htmlæ”¾åˆ°å¦ä¸€åˆ—ä¸­ï¼Œè¿™æ ·æ¯æ¬¡ä¿å­˜å°±å¯ä»¥çœ‹åˆ°htmlä»£ç 
</code></pre><h4 id="å±æ€§æ–‡æœ¬å’Œå€¼"><a href="#å±æ€§æ–‡æœ¬å’Œå€¼" class="headerlink" title="å±æ€§æ–‡æœ¬å’Œå€¼"></a>å±æ€§æ–‡æœ¬å’Œå€¼</h4><pre><code>1ã€classå’Œid

    div.row

    div#row

    div#row.column-samil    // id=&quot;row&quot; class=&quot;column-samil&quot;

    div.rowA.main        // class=&quot;rowA main&quot;


2ã€å±æ€§

    aæ ‡ç­¾çš„hrefå±æ€§å€¼ï¼Œå’Œè‡ªå®šä¹‰å±æ€§å’Œå€¼
    a(href=&quot;http://haha.com&quot;,
        title=&quot;jade&quot;,
            data-uid=&quot;siguang&quot;)

    input(name=&quot;course&quot; type=&quot;check&quot; checked)
</code></pre><h4 id="æ··åˆçš„æ–‡æœ¬å’Œæ ‡ç­¾"><a href="#æ··åˆçš„æ–‡æœ¬å’Œæ ‡ç­¾" class="headerlink" title="æ··åˆçš„æ–‡æœ¬å’Œæ ‡ç­¾"></a>æ··åˆçš„æ–‡æœ¬å’Œæ ‡ç­¾</h4><pre><code>1ã€å¦‚æœå­—ç¬¦é‡Œæœ‰ç‚¹è¿›è¡Œå¤„ç†

    // ä¸ä¼šæŠŠ.aaè§£ææˆ class=&quot;aa&quot; å¹¶ä¸”æ¢è¡Œ,ä¹Ÿèƒ½å†™htmlæ ‡ç­¾
    div.row
        p.
            1.aa &lt;strong&gt;è¿™é‡Œå­—ä½“åŠ ç²—&lt;/string&gt;
            2.bb
            3.cc 
            4.dd

    æˆ–è€…
    div.row
        p
            | 1.aa 
            | 2.bb
            | 3.cc 
            | 4.dd
</code></pre><h4 id="æ³¨é‡Šå’Œæ¡ä»¶æ³¨é‡Š"><a href="#æ³¨é‡Šå’Œæ¡ä»¶æ³¨é‡Š" class="headerlink" title="æ³¨é‡Šå’Œæ¡ä»¶æ³¨é‡Š"></a>æ³¨é‡Šå’Œæ¡ä»¶æ³¨é‡Š</h4><pre><code>1ã€å•è¡Œæ³¨é‡Š //

2ã€ä¸å¯è§çš„æ³¨é‡Š //-

3ã€å—æ³¨é‡Š        //- åœ¨å½“å‰èŠ‚ç‚¹çš„å¼€å¤´

4ã€æ¡ä»¶æ³¨é‡Š

    &lt;!--[if IE 8]&gt;
        &lt;html class=&apos;ie8&apos;&gt;
    &lt;![endif]&gt;


    &lt;/html&gt;        // éœ€è¦html



div.row
    // a(href=&quot;http://haha.com&quot;, title=&quot;siguang&quot;, data-index=&quot;1&quot;) å»ä¸»ç«™

    //- input(name=&quot;course&quot; type=&quot;check&quot; checked)

div.row
//-
    p.
        1.aa &lt;strong&gt;è¿™é‡Œå­—ä½“åŠ ç²—&lt;/string&gt;
        2.bb
        3.cc 
        4.dd
</code></pre><h4 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h4><pre><code>å£°æ˜: - var course = &apos;jade&apos;

è·å–: #{jade}

1ã€å‘½ä»¤è¡Œä¸‹ä¼ å€¼
    jade index.jade -P -w --obj &apos;{&quot;name&quot;:&quot;siguang&quot;, age: 30}&apos;

    div.row
        div.column-12
            å§“å: #{name}

        div.column-12
            å¹´é¾„: #{age}

2ã€é€šè¿‡jsonä¼ å€¼

    jade index.jade -P -O test.json

    test.json
    {
        &apos;name&apos;: &apos;siguang&apos;,
        &apos;age&apos;: 30
    }
</code></pre><h4 id="è½¬ä¹‰"><a href="#è½¬ä¹‰" class="headerlink" title="è½¬ä¹‰"></a>è½¬ä¹‰</h4><pre><code>1ã€å°†htmlè½¬æˆå­—ç¬¦ä¸²è¾“å‡º

    - var data = &apos;&lt;script&gt;alert(123)&lt;/script&gt;&apos;

    p #{data}


2ã€éè½¬ä¹‰

    - var data = &apos;&lt;script&gt;alert(123)&lt;/script&gt;&apos;

    p !{data}
</code></pre><h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><pre><code>1ã€if...else...

    - var isData = true
    if isData
        div å¯¹è±¡å­˜åœ¨
    else
        å¯¹è±¡ä¸å­˜åœ¨


2ã€case

    - var name = &apos;jade&apos;
    case name
        when &apos;java&apos;
            div java

        when &apos;jade&apos;
            p hello jad



3ã€for æˆ– each å¾ªç¯

    - var data = {&apos;name&apos;: &apos;siguang&apos;, &apos;nage&apos;: 30}
    div.row
        - for(var key in data)
            div= key +&apos;=&apos;+data[key]

    each()
</code></pre><h4 id="mixin"><a href="#mixin" class="headerlink" title="mixin"></a>mixin</h4><pre><code>ç›¸åŒç»“æ„çš„å†…å®¹å¯ä»¥æ”¾åˆ°mixinä¸­ï¼Œç›¸åŒä¸€ä¸ªå‡½æ•°

1ã€æ— å‚
    mixin å‡½æ•°å        // å£°æ˜ 
        p è¿™é‡Œæ˜¯å‡½æ•°çš„å—å†…å®¹
        p è¿™é‡Œæ˜¯å‡½æ•°çš„å—å†…å®¹
        p è¿™é‡Œæ˜¯å‡½æ•°çš„å—å†…å®¹

    +å‡½æ•°å            // è°ƒç”¨

2ã€æœ‰å‚

    mixin å‡½æ•°å(å‚æ•°)
        each key in data
            li= data[key]

    +å‡½æ•°å({username: &apos;siguang&apos;, age: 30});
</code></pre><h4 id="æ¨¡æ¿ç»§æ‰¿"><a href="#æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="æ¨¡æ¿ç»§æ‰¿"></a>æ¨¡æ¿ç»§æ‰¿</h4><pre><code>ä»£ç å¤ç”¨

å®šä¹‰ä¸€ä¸ªhtmlçš„åŸºæœ¬ç»“æ„ï¼Œå†…å®¹åªå†™åˆ°bodyä¸­

public.jade

    DOCTYPE html
    html
        head

        body
            block desc
                p å†…å®¹ç»§æ‰¿
            block content    // è¿™é‡Œæ¥æ”¶å†…å®¹


main.jade

    // é€šè¿‡extendsç»§æ‰¿åˆ°å“ªä¸ª jadeæ–‡ä»¶
    extends public

    block content        // è¿™é‡Œå†™åˆ°å“ªé‡Œ
        div.row
            p aaaa
            p aaaa
            p aaaa

        div.row-b
            p bbb
            p bbb
            p bbb
</code></pre><h4 id="include-å¼•ç”¨"><a href="#include-å¼•ç”¨" class="headerlink" title="include å¼•ç”¨"></a>include å¼•ç”¨</h4><pre><code>å¼•ç”¨ä¸€ä¸ªjadeæ–‡ä»¶

DOCTYPE html
html
    head
        include head

    body
        include login
</code></pre><h4 id="jade-api"><a href="#jade-api" class="headerlink" title="jade api"></a>jade api</h4><pre><code>httpçš„åŸå£°å†™æ³•

1ã€jade.compile(source, ä¼ å€¼): è¿”å›ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆhtml

2ã€jade.compileFile(path, ä¼ å€¼)

3ã€jade.compileClient(source, ä¼ å€¼)

4ã€jade.render(source, ä¼ å€¼):

5ã€jade.renderFile(jadeæ–‡ä»¶, ä¼ å€¼):


compile()ç¤ºä¾‹
    var http = require(&apos;http&apos;);
    var jade = require(&apos;jade&apos;);

    var server = http.createServer(function(req, res){
        res.writeHead(200, {&apos;ContentType&apos;: &apos;text/html&apos;});

        var fn = jade.compile(&apos;div #{course}&apos;, {});
        var html = fn({course: &apos;jade&apos;});

        res.end(html);
    })

    server.listen(&apos;8081&apos;, &apos;localhost&apos;)


render()ç¤ºä¾‹

    var http = require(&apos;http&apos;);
    var jade = require(&apos;jade&apos;);

    var server = http.createServer(function(req, res){
        res.writeHead(200, {&apos;ContentType&apos;: &apos;text/html&apos;});
        var html = jade.render(&apos;div #{course} #{name}&apos;, {course: &apos;jade&apos;, name: &apos;siguang&apos;});
        res.end(html);
    })

    server.listen(&apos;8081&apos;, &apos;localhost&apos;)


{pretty:true} å¦‚æœä¸åŠ æ­¤å±æ€§htmlä¼šæ˜¯å‹ç¼©æ¨¡å¼ï¼ŒåŠ ä¸Šæ ¼å¼åŒ–çš„ä»£ç 
</code></pre><h4 id="å°†htmlç¼–è¯‘æˆjadeæ–‡ä»¶"><a href="#å°†htmlç¼–è¯‘æˆjadeæ–‡ä»¶" class="headerlink" title="å°†htmlç¼–è¯‘æˆjadeæ–‡ä»¶"></a>å°†htmlç¼–è¯‘æˆjadeæ–‡ä»¶</h4><pre><code>å®‰è£…: sudo npm install html2jade -g

ç”Ÿæˆå‘½ä»¤: html2jade ./public/index.html &gt; index.jade

åœ¨nodeä¸­è½¬æ¢

var html2jade = require(&apos;html2jade&apos;);

html2jade.convertDocument(document, {}, function(err, jade){
    console.log(&apos;åç¼–è¯‘åçš„jadeæ–‡ä»¶&apos;)
})


åœ¨çº¿è½¬æ¢: http://html2jade.vida.io/
</code></pre><p>| å‚è€ƒèµ„æ–™<br>| <a href="http://www.cnblogs.com/fullhouse/archive/2011/07/18/2109945.html" target="_blank" rel="noopener">http://www.cnblogs.com/fullhouse/archive/2011/07/18/2109945.html</a><br>|<br>|</p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/07/01/å‰ç«¯ç®—æ³•/">å‰ç«¯ç®—æ³•</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/07/01/å‰ç«¯ç®—æ³•/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-07-01T08:54:51.000Z" itemprop="datePublished">2017-07-01</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/ç®—æ³•/">ç®—æ³•</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h4><pre><code>ä¸€ã€å†’æ³¡æ³•

    å‰åä¸¤ä¸ªå€¼ç›¸æ¯”

    function bubble(){
        var arr = [34,5,7,2,4,6,8];
        var len = arr.length;

        for(var i=0; i&lt;len; i++){
            // è¿™é‡Œ j&lt;len-1 ä¹Ÿå¯ä»¥ï¼Œä½†j&lt;len-1-içš„ç›®æ¢æ˜¯ä¸ç”¨åœ¨å»æ¯”è¾ƒä¹‹å‰çš„ç»“æœ 
            for(var j=0; j&lt;len-1-i; j++){   
                if(arr[j] &gt; arr[j+1]){        // ä»å°å‘å¤§, å¦‚æœä»å¤§åˆ°å°æ”¹æˆ &lt;
                    var temp = arr[j+1];
                    arr[j+1] = arr[j];
                    arr[j] = temp;
                }
            }
        }
        return arr;
    }
    console.log(bubble());
</code></pre><p><img src="images/å†’æ³¡.gif" alt="å†’æ³¡"> </p>
<pre><code>äºŒã€é€‰æ‹©æ’åº

    ç”¨å½“å‰çš„æ‰€åœ¨çš„æ•°æ¥ä¸ä¹‹åæ‰€æœ‰çš„æ•°æ¥åˆ¤æ–­æ‰¾å‡ºæœ€å°æ•°æ’å…¥

    function selectionSort(){
        var arr = [34,5,7,26,8,13];
        var len = arr.length;
        var minIndex, temp;

        for(var i=0; i&lt;len; i++){
            minIndex = i;               // å¾ªç¯è¿›æ¥åå…ˆæŒ‡å‘å½“å‰ç¬¬ä¸€ä¸ªè¦æ¯”è¾ƒçš„æ•°ï¼Œä¸‹é¢å¾ªç¯ä¼šå°†æ¯”è¾ƒå°æœ€å€¼çš„ä¸‹æ ‡èµ‹ç»™å®ƒ

            // æ‰¾å‡ºä¹‹åçš„æœ€å°æ•°
            for(var j=i+1; j&lt;len; j++){
                if(arr[j] &lt; arr[minIndex]){     // è¿™é‡Œæ§åˆ¶æ’åº
                    minIndex = j;
                }
            }

            // å°†æœ€å°æ•°æ’åˆ°å½“å‰içš„ä½ç½®
            temp = arr[i];
            arr[i] = arr[minIndex];
            arr[minIndex] = temp;
        }

        return arr;
    }
    console.log(selectionSort());
</code></pre><p><img src="images/é€‰æ‹©æ’åº.gif" alt="é€‰æ‹©æ’åº"> </p>
<pre><code>ä¸‰ã€æ’å…¥æ’åº

    å°†ä¸€ä¸ªå€¼ä¸ä¹‹å‰çš„å€¼è¿›è¡Œæ¯”è¾ƒå¦‚æœå¤§äºå½“å‰å€¼å°±æ’å…¥åœ¨å½“å‰ä½ç½®

    function insertionSort(){
        var arr = [34,5,7,26,8,13];
        var len = arr.length;
        var preIndex, current;

        for(var i=1; i&lt;len; i++){
            preIndex = i-1;
            current = arr[i];   // å­˜å‚¨å½“å‰å€¼

            while(preIndex &gt;= 0 &amp;&amp; arr[preIndex] &gt; current){
                console.log(arr[preIndex], current);
                arr[preIndex+1] = arr[preIndex];        // å°†
                preIndex--;
            }

            arr[preIndex+1] = current;
        }

        return arr
    }

    console.log(insertionSort());
</code></pre><p><img src="images/æ’å…¥æ’åº.gif" alt="æ’å…¥æ’åº"> </p>
<pre><code>å¿«é€Ÿæ’åº 
</code></pre><p><img src="images/é€‰æ‹©æ’åº.gif" alt="é€‰æ‹©æ’åº"><br><img src="images/é€‰æ‹©æ’åº.gif" alt="é€‰æ‹©æ’åº"> </p>
<p>| <a href="https://wowphp.com/post/komxdx8qe862.html" target="_blank" rel="noopener">https://wowphp.com/post/komxdx8qe862.html</a>      // æ’åº</p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/07/01/Rapçš„ä½¿ç”¨å’Œmockæ•°æ®/">Rapçš„ä½¿ç”¨å’Œmockæ•°æ®</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/07/01/Rapçš„ä½¿ç”¨å’Œmockæ•°æ®/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-07-01T08:54:51.000Z" itemprop="datePublished">2017-07-01</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/mockæ•°æ®/">mockæ•°æ®</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>/<strong><strong>**</strong></strong> Rap <strong><strong>*</strong></strong>/</p>
<h4 id="Rap"><a href="#Rap" class="headerlink" title="Rap"></a>Rap</h4><pre><code>é˜¿é‡Œçš„äº§å“å’Œmockjsï¼Œæ¥æ¨¡æ‹ŸçœŸå®æ•°æ®

https://github.com/thx/RAP/wiki/user_manual_cn#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE
</code></pre><h4 id="Rapä½¿ç”¨"><a href="#Rapä½¿ç”¨" class="headerlink" title="Rapä½¿ç”¨"></a>Rapä½¿ç”¨</h4><pre><code>ä¸€ã€æ³¨å†Œå’Œç™»å½•Rap

    http://rapapi.org/

äºŒã€åˆ†ä¸ºå›¢é˜Ÿã€ä¸šåŠ¡çº¿ã€é¡¹ç›®

    1ã€æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ
</code></pre><p><img src="images/rap1.png" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>
<pre><code>2ã€è¿›å…¥ä½ æ‰€åœ¨çš„å›¢
</code></pre><p><img src="images/rap2.jpeg" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>
<pre><code>3ã€åˆ›å»ºä¸šåŠ¡
</code></pre><p><img src="images/rap3.jpeg" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>
<pre><code>4ã€åˆ›å»ºæ¨¡å—å’Œä½¿ç”¨
</code></pre><p><img src="images/rap4.jpeg" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>
<pre><code>ä¸‰ã€å…¶å®ƒæŠ€å·§

    1ã€å°†ä¸€ä¸ªæ¥å£çš„å­—æ®µä¸‹æ‰€æœ‰å­—æ®µcopyåˆ°å¦ä¸€ä¸ªæ¥å£

        é€‰æ‹©è¦copyçš„å­—æ®µåï¼Œåˆ°å¦ä¸€ä¸ªæ¥å£ç²˜è´´ååœ¨control+Enterï¼Œå°±å°†æ‰€æœ‰çš„å†…å®¹å…¨éƒ¨copyè¿‡æ¥
</code></pre><p><img src="images/rap5.jpeg" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>
<pre><code>å››ã€MOCKå·¥å…·

    1ã€ä½¿ç”¨å‚æ•°çš„å˜é‡
        è¯·æ±‚å­—æ®µ
            page   

        å“åº”å­—æ®µ
            pageResponse å­—æ®µ  @mock=${page}        // è¿™é‡Œæœ€ç»ˆpageResponseçš„æ˜¾ç¤ºå°±æ˜¯Requestä¸­pageçš„è¾“å…¥

            æˆ–è€…å†™é»˜è®¤å€¼   @mock=${page=100}    // å¦‚æœè¯·æ±‚ä¸å†™pageå€¼é»˜è®¤ä¸º100

    2ã€idè‡ªåŠ¨åŠ 1

        å˜é‡å     å¤‡æ³¨
        id|+1     @mock=100        // è¡¨ç¤ºidä»100å¼€å§‹ï¼Œæ¯æ¬¡åŠ 1

    3ã€å…¶å®ƒå†™æ³•

        @mock=@DATE

        @mock=true

        @mock=function(){return 100 + Math.random()*100}
</code></pre><p><img src="images/rap6.png" alt="æŸ¥æ‰¾ä½ æ‰€åœ¨çš„å›¢é˜Ÿ"></p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/05/08/å‰ç«¯æ’ä»¶æ”¶é›†/">æ”¶é›†æ’ä»¶å’Œå·¥å…·</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/05/08/å‰ç«¯æ’ä»¶æ”¶é›†/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-05-08T06:08:21.000Z" itemprop="datePublished">2017-05-08</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æ’ä»¶/">æ’ä»¶</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>/<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong> å‰ç«¯ç±» <strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong>/</p>
<h4 id="JSæ¡†æ¶"><a href="#JSæ¡†æ¶" class="headerlink" title="JSæ¡†æ¶"></a>JSæ¡†æ¶</h4><pre><code>1ã€VueJS        2ã€AngularJS        3ã€Rreact    4ã€React-native         5ã€Weex

6ã€jQeruy    

7ã€underscore: http://www.css88.com/doc/underscore/

8ã€zepto: http://www.bootcss.com/p/zeptojs/
</code></pre><h4 id="UIæ¡†æ¶"><a href="#UIæ¡†æ¶" class="headerlink" title="UIæ¡†æ¶"></a>UIæ¡†æ¶</h4><pre><code>http://emojipedia.org/    å°å›¾ç‰‡ğŸ» ğŸ’ ğŸ¥‘ ğŸ ğŸ¤  ğŸšœ ğŸ‘¨ğŸ» 

1ã€Bootstrapä¸­æ–‡ç½‘ï¼šhttp://www.bootcss.com/       

2ã€Bootstrap Table API:  http://bootstrap-table.wenzhixin.net.cn/zh-cn/getting-started/

        http://www.cnblogs.com/gamehiboy/p/5176618.html

3ã€layUIæ¡†æ¶: http://www.layui.com/

    é¡µé¢ä¸­åŠ è½½layui
    &lt;script src=&quot;lib/layui.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;mian.js&quot;&gt;&lt;/script&gt;

    main.js
    layui.use([&apos;laydate&apos;], function(){         // laydate è°ƒç”¨æ—¥æœŸæ’ä»¶

          var laydate = layui.laydate;
          var oD = document.getElementById(&quot;dateInput&quot;);

          var start = {
            elem: oD,
            min: laydate.now(),
            max: &apos;2099-06-16 23:59:59&apos;,
            istoday: false,
            choose: function(datas){
                end.min = datas;     // å¼€å§‹æ—¥é€‰å¥½åï¼Œé‡ç½®ç»“æŸæ—¥çš„æœ€å°æ—¥æœŸ
                end.start = datas     // å°†ç»“æŸæ—¥çš„åˆå§‹å€¼è®¾å®šä¸ºå¼€å§‹æ—¥
            }
        };

        laydate(start);

    });

é˜¿é‡Œç§»åŠ¨ç«¯æ¡†æ¶ mui: http://m.sui.taobao.org/

é¥¿äº†ä¹ˆvue uiç§»åŠ¨æ¡†æ¶: http://mint-ui.github.io/#!/zh-cn

é¥¿äº†ä¹ˆvue PCç«¯æ¡†æ¶: http://element.eleme.io/#/zh-CN/resource

äº¬ä¸œvue UIæ¡†æ¶: https://at-ui.github.io/at-ui/#/zh

iView vue UIæ¡†æ¶: https://www.iviewui.com/docs/guide/install

èš‚èšé‡‘æœReact uiæ¡†æ¶https://ant.design/

    react native https://github.com/ant-design/ant-design-mobile/blob/master/README.zh-CN.md

                  https://mobile.ant.design/docs/react/introduce

React UI: http://rsuite.github.io/#/?_k=1me3ji

è„šæ‰‹æ¶å¸‚åœº: http://scaffold.ant.design/#/
</code></pre><h4 id="å‰ç«¯æ’ä»¶"><a href="#å‰ç«¯æ’ä»¶" class="headerlink" title="å‰ç«¯æ’ä»¶"></a>å‰ç«¯æ’ä»¶</h4><pre><code>ä¸€ã€æ—¥æœŸç±»

    1ã€http://momentjs.com/         æ—¥æœŸ

    2ã€Bootstrap DataPicker:   http://www.bootcss.com/p/bootstrap-datetimepicker/

    3ã€laydate:  http://laydate.layui.com/

    4ã€jquery DateTimePicker:  http://www.jq22.com/jquery-info332


äºŒã€socket: https://github.com/sockjs/sockjs-client    

ä¸‰ã€æ–‡ä»¶ç±»

    1ã€äºŒè¿›åˆ¶è½¬æ¢åº“: protobuf.js  bytebuffer.js  long.js

    2ã€å‰ç«¯å°†tableå¯¼å‡ºExcelæ–‡ä»¶  http://www.jianshu.com/p/74d405940305

        js-xlsx: https://github.com/SheetJS/js-xlsx      ç”¨æ¥è¯»å–å’Œå†™æ–‡ä»¶ï¼Œ

            æš´éœ²ä¸€ä¸ªXLSXå…¨å±€å¯¹è±¡
                è¯»å–æ•°æ®XLSX.reder()ï¼Œè¯»å–æ–‡ä»¶XLSX.readerFile()
                å†™æ•°æ® XLSX.write()ï¼Œå†™æ–‡ä»¶XLSX.writeFile()ã€å†™æµæ–‡ä»¶XLSX.stream
                utilså¯¹è±¡

        fileSaver: https://github.com/eligrey/FileSaver.js/blob/master/FileSaver.js

å››ã€å·¥å…·åº“

    lodashjs  ç”¨äºå¤„ç†æ•°ç»„ã€å¯¹è±¡ç­‰ä¸€æ¬¡æ•°æ®ä¸Šæ‹†åˆ†ç­‰é—®é¢˜

        ä¸­æ–‡: http://lodashjs.com/docs/#_chunkarray-size1

        https://lodash.com/docs/4.17.4


å›¾è¡¨ç±»

    EChartå›¾è¡¨æ’ä»¶


äº”ã€ICONåº“

    http://www.fontawesome.com.cn/

    http://www.iconfont.cn       é˜¿é‡Œçš„å›¾æ ‡æ”¶é›†ç«™  ä½¿ç”¨http://mux.alimama.com/posts/964

    https://at-ui.github.io/feather-font/


å…­ã€ç§»åŠ¨å¼€å‘æ’ä»¶

    1ã€iScroll: http://cubiq.org/iscroll-5   http://www.360doc.com/content/14/0724/11/16276861_396699901.shtml

    2ã€Swipper: http://www.swiper.com.cn/


ä¸ƒã€è°ƒè¯•å·¥å…·

    1ã€browsersync:   http://www.browsersync.cn/            // ä¸‰ç«¯è¿è°ƒå·¥å…·

        http://www.browsersync.cn/docs/command-line/
</code></pre><h4 id="å‰ç«¯æ¨¡æ‹Ÿæ•°æ®"><a href="#å‰ç«¯æ¨¡æ‹Ÿæ•°æ®" class="headerlink" title="å‰ç«¯æ¨¡æ‹Ÿæ•°æ®"></a>å‰ç«¯æ¨¡æ‹Ÿæ•°æ®</h4><pre><code>ä¸€ã€mock: http://mockjs.com/       // ç”Ÿæˆéšæœºæ•°æ®ï¼Œæ‹¦æˆª Ajax è¯·æ±‚

äºŒã€Rap: http://rap.taobao.org/org/index.do   // é˜¿é‡Œ

    å¤åˆ¶ä¸€ä¸ªå­—æ®µåï¼Œç„¶åæ–°å»ºä¸€ä¸ªå­—æ®µç²˜è´´ï¼Œåœ¨æŒ‰ctrl+å›è½¦ï¼Œå°±ä¼šå°†ä»–ä¸‹é¢æ‰€æœ‰çš„æ•°æ®éƒ½å¤åˆ¶è¿‡æ¥ï¼Œå¯¹äºå±‚çº§å¾ˆå¤æ‚çš„æ¯”è¾ƒå¥½ç”¨

ä¸‰ã€postMan: æäº¤getã€postè¯·æ±‚

å››ã€çº¿ä¸Šæ¥å£æ•°æ®: http://jsonplaceholder.typicode.com/
</code></pre><h4 id="ç®¡ç†å·¥å…·"><a href="#ç®¡ç†å·¥å…·" class="headerlink" title="ç®¡ç†å·¥å…·"></a>ç®¡ç†å·¥å…·</h4><pre><code>ä¸€ã€Confluence ç”¨äºå›¢çš„wikiï¼Œå’Œæ—¥å¸¸å·¥ä½œæµç¨‹

äºŒã€JIRA   äº§å“ç‰ˆæœ¬  äº§å“éœ€æ±‚ - æŠ€æœ¯å¼€å‘ - æµ‹è¯•

ä¸‰ã€Stash  git ä»“åº“

å››ã€åœ¨çº¿è¿è¡Œä»£ç 

    https://codepen.io/pen/

    https://jsfiddle.net/    

    http://jsbin.com/?html,css,js,output


äº”ã€chrome æ’ä»¶

    EditThisCookie   è®¾ç½®cookie

    PostMan        postè¯·æ±‚

    AlloyDesigner è…¾è®¯webé¡µé¢ä¸è®¾ç½®å¯¹æ¯”å·¥å…·

        http://alloyteam.github.io/AlloyDesigner/worddoc.html
        http://www.alloyteam.com/2014/03/alloydesigner-lai-zi-xing-xing-di-web-qian-duan-kai-fa-fang-shi/

        éœ€è¦åœ¨æœåŠ¡ç¯å¢ƒä¸‹ä½¿ç”¨

        $ å®‰è£…æ’ä»¶

        $ æ‰“å¼€é¡µé¢ï¼Œå¯åŠ¨æ’ä»¶ä¸‹é¢ä¼šå‡ºç°å·¥å…·æ ï¼Œç‚¹å‡»è§†è§‰ç¨¿æŒ‰é’®é€‰æ‹©è®¾è®¡å›¾ç‰‡
</code></pre><h4 id="ç§»åŠ¨ç«¯çš„Sassæ¡†æ¶"><a href="#ç§»åŠ¨ç«¯çš„Sassæ¡†æ¶" class="headerlink" title="ç§»åŠ¨ç«¯çš„Sassæ¡†æ¶"></a>ç§»åŠ¨ç«¯çš„Sassæ¡†æ¶</h4><pre><code>yo: https://github.com/doyoe/Yo#bugs-and-feature-requests
</code></pre><h4 id="æ„å»ºå·¥å…·ã€æ¨¡å—åŒ–å¼€å‘æ¡†æ¶"><a href="#æ„å»ºå·¥å…·ã€æ¨¡å—åŒ–å¼€å‘æ¡†æ¶" class="headerlink" title="æ„å»ºå·¥å…·ã€æ¨¡å—åŒ–å¼€å‘æ¡†æ¶"></a>æ„å»ºå·¥å…·ã€æ¨¡å—åŒ–å¼€å‘æ¡†æ¶</h4><pre><code>æ„å»ºå·¥å…·: webpackã€gulpã€grunt

æ¨¡å—åŒ–å¼€å‘: webpackï¼ˆå³æ˜¯æ¨¡å—å¼€å‘åˆæ˜¯æ„å»ºå·¥å…·ï¼‰ã€RequireJS    
</code></pre><p>/<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong> æœåŠ¡ç«¯ <strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong>/</p>
<h4 id="NodeJS"><a href="#NodeJS" class="headerlink" title="NodeJS"></a>NodeJS</h4><pre><code>Exporess:  http://www.expressjs.com.cn/

eggé˜¿é‡Œnodejsæ¡†æ¶:https://eggjs.org/zh-cn/basics/middleware.html
</code></pre><h4 id="NodeJSç±»"><a href="#NodeJSç±»" class="headerlink" title="NodeJSç±»"></a>NodeJSç±»</h4><pre><code>1ã€msè¿”å›æ—¶é—´  https://github.com/zeit/ms       // msç”¨æ¥è¿”å›ä¸€ä¸ªæ—¶é—´  ms(&apos;2h&apos;) è¿”å› 7200000  

2ã€MD5åŠ å¯†crypto    https://github.com/jkiss/crypto-js      npm i crypto-js --save  å¼•ç”¨ const MD5 = require(&apos;crypto-js/md5&apos;);

3ã€æ–‡ä»¶ä¸Šä¼     https://github.com/node-modules/formstream

4ã€JSONä¸²å’Œå¯¹è±¡äº’è½¬  https://github.com/ljharb/qs      // å¯ä»¥æ ¹æ®keyæ¥è¿›è¡Œæ’åº 
</code></pre><h4 id="äº§å“ç±»"><a href="#äº§å“ç±»" class="headerlink" title="äº§å“ç±»"></a>äº§å“ç±»</h4><pre><code>http://www.sketchcn.com/

omniGraffle
</code></pre><p>/<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong> å·¥å…·ç±» <strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong>/</p>
<h4 id="æŸ¥çœ‹chromeçš„DNSç¼“å­˜å¯¹åº”è¡¨-chrome-net-internals-dns"><a href="#æŸ¥çœ‹chromeçš„DNSç¼“å­˜å¯¹åº”è¡¨-chrome-net-internals-dns" class="headerlink" title="æŸ¥çœ‹chromeçš„DNSç¼“å­˜å¯¹åº”è¡¨: chrome://net-internals#dns"></a>æŸ¥çœ‹chromeçš„DNSç¼“å­˜å¯¹åº”è¡¨: chrome://net-internals#dns</h4><h4 id="emmetå¿«æ·æ–¹æ³•"><a href="#emmetå¿«æ·æ–¹æ³•" class="headerlink" title="emmetå¿«æ·æ–¹æ³•"></a>emmetå¿«æ·æ–¹æ³•</h4><pre><code>http://www.w3cplus.com/tools/emmet-cheat-sheet.html

http://www.iteye.com/news/27580
</code></pre><h4 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h4><pre><code>ä¸€ã€webStorm

    1ã€æ ¼å¼åŒ–ä»£ç : format   command + option + L

    2ã€install plugins  å®‰è£…æ’ä»¶

        webstorm/plugins =&gt; æ’å…¥æ’ä»¶åï¼Œç„¶åæ·»åŠ 


äºŒã€atom

    ç”¨äºå¼€å‘reactatom-react-autocomplete ç»„ä»¶ååŠçŠ¶æ€çš„è‡ªåŠ¨è¡¥å…¨ 

    http://blog.csdn.net/crper/article/details/52196675


ä¸‰ã€vs-Code

    å®‰è£…æ’ä»¶ï¼š ext install æ’ä»¶å

    https://marketplace.visualstudio.com/VSCode

    $ jsã€htmlç­‰æ ¼å¼åŒ– - https://prettier.io/

        æœç´¢Prettier -&gt; JavaScript formatter  

        æ‰§è¡Œ CMD + Shift + P -&gt; Format Document

    $ Vue VSCode Snippets    å¿«é€Ÿåˆ›å»ºvueç»“æ„  vbase &lt;- https://github.com/sdras/vue-vscode-snippets

    $ vue-beautify: vueæ ¼å¼åŒ–

    $ vetur

    $ vue: è¯­æ³•é«˜äº® ä¸å®‰è£…


    $ Babel ES6/ES7

    $ Babelrc

    $ Beautify - ç¾åŒ–æ ¼å¼

    $ Egg.js

    $ eggjs

    $ ES7 React/Redux/React-Native/JS snippets

    $ Guides - ä»£ç ä¸­çš„å¯¹é½çº¿

    $ weex

    $ html-snippetsï¼šH5 æç¤º

    $ vscode-html-css: å†™classå¯ä»¥æœç´¢åˆ°æ‰€æœ‰å¼•ç”¨classçš„å€¼

    $ jquerysnippets: jqueryæç¤º

    $ vscode-JS-CSS-HTML-formatter: html/css/jsæ–‡ä»¶æ ¼å¼åŒ– ä½¿ç”¨æ–¹æ³•: âŒ˜ + P è¾“å…¥formatter

    $ path-intellisense: è·¯å¾„è‡ªåŠ¨æç¤º

    $ npm-intellisense: ä½¿ç”¨requireæç¤º

    $ vscode-eslint: è¯­æ³•éªŒè¯

    $ Bootstrap: 

    $ vscode-icons: ç¼–è¾‘å™¨èœå•ä¸­å¯¹åº”æ–‡ä»¶å‰åŠ å›¾æ ‡   è¾“å…¥icon é€‰æ‹© File icon Theme

        vscode-icon-theme: 

    $ ReactSnippets: ReactJS  jsxæ–‡ä»¶å†… è¾“å…¥ rcc å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªreactç»„ä»¶çš„åˆå§‹ä»£ç   
            https://marketplace.visualstudio.com/items?itemName=xabikos.ReactSnippets


    $ vscode-node-readme: å¯ä»¥æŸ¥çœ‹node reuqireä¸­å¼•ç”¨çš„node-moduleçš„åŒ…å†…å®¹

    $ auto-close-tag: å¯ä»¥å°†æ–‡æ¡£æœªé—­åˆæ ‡ç­¾è‡ªåŠ¨åŠ å…³é—­   è¾“å…¥close tag

    $ cssrem  å°†å€¼è½¬æˆrem 

    $ pxè½¬remæ’ä»¶   https://github.com/Maroon1/px2rem 


    $ ä¸»é¢˜ç±»

        Atom One Dark Theme

        vsc-material-theme

        Material Theme

        åˆ‡æ¢ä¸»é¢˜  âŒ˜ + shift + p   =&gt;  è¾“å…¥ them é€‰æ‹©é¢œè‰²ä¸»é¢˜åœ¨åˆ—è¡¨ä¸­åœ¨é€‰æ‹©

    $ guides: é«˜äº®ç¼©è¿›åŸºå‡†çº¿   ext install guides


    ---------- å¿«æ·é”® ---------

    1ã€âŒ˜ + p æœç´¢æ’ä»¶

    2ã€âŒ˜ + shift + p  å‘½ä»¤

    3ã€âŒ˜ + , æ‰“å¼€settings.jsoné…ç½®

    4ã€^(control) + ` æ‰“å¼€vscodeè‡ªå¸¦çš„ç»ˆç«¯

    5ã€miniMapçš„é…ç½®  åœ¨settings.jsonä¸­åŠ å…¥ &quot;editor.minimap.enabled&quot;: true  é…ç½®


    6ã€|http://www.jianshu.com/p/819fc0f7f3b2  é…ç½®

    7ã€http://www.cnblogs.com/huaxingtianxia/p/5481493.html   å¿«æ·é”®

    8ã€æ•´è¡Œç²˜è´´ sbæ˜¯âŒ˜+D,   vscodeæ˜¯å…‰æ ‡åœ¨å½“å‰è¡Œ âŒ˜+C, ç„¶ååœ¨âŒ˜+V

    9ã€å¤šè¡Œå…‰æ ‡

        ALT+é¼ æ ‡

        ALT+ä¸Šä¸‹æ–¹å‘é”®

        å…³é”®è¯è¢«é€‰ä¸­/é«˜äº®åï¼ŒCTRL+D


å››ã€Sublime Text

    http://blog.csdn.net/u013861109/article/details/53106074


    1ã€å®‰è£…package control

        https://packagecontrol.io/

        Control + `ï¼ˆmacï¼‰ æˆ– Ctrl+ï½ ï¼ˆwinï¼‰ è°ƒå‡ºconsole  è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ Perferences-&gt;package settingsä¸­çœ‹åˆ°package controlè¿™ä¸€é¡¹ï¼Œåˆ™å®‰è£…æˆåŠŸ

        import urllib.request,os; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), &apos;wb&apos;).write(urllib.request.urlopen( &apos;http://sublime.wbond.net/&apos; + pf.replace(&apos; &apos;,&apos;%20&apos;)).read())

    2ã€å®‰è£…ç¼–è¾‘å™¨ä¸»é¢˜

    æŒ‰ä¸‹Ctrl+Shift+Pï¼Œè¾“å…¥installï¼Œé€‰æ‹©Package Control: Install Packageï¼Œç„¶åè¾“å…¥Spacegrayï¼Œé€‰æ‹©Theme: Spacegray.

    åœ¨èœå•æ ä¸­é€‰æ‹©Preferences-&gt;Settings-Userï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç ï¼Œè¦†ç›–æ‰“å¼€çš„æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜å³å¯åº”ç”¨ä¸»é¢˜ï¼š    
        {
            &quot;theme&quot;: &quot;Spacegray.sublime-theme&quot;,
            &quot;color_scheme&quot;: &quot;Packages/Theme - Spacegray/base16-ocean.dark.tmTheme&quot;
        }

    3ã€è®¾ç½®ä»£ç è¡Œé—´è·ã€å­—å·

        éœ€è¦ä¸ªæ€§å“ªä¸ªå°±ç›´æ¥åœ¨preferences -&gt; settings user ä¸­çš„é…ç½®æ·»åŠ 
        {
            &quot;color_scheme&quot;: &quot;Packages/Theme - Spacegray/base16-ocean.dark.tmTheme&quot;,
            &quot;theme&quot;: &quot;Spacegray.sublime-theme&quot;,
            &quot;font_size&quot;: &quot;16&quot;,
            &quot;line_padding_top&quot;: 2,
            &quot;line_padding_bottom&quot;: 2
        }


    4ã€å®‰è£…å¸¸ç”¨æ’ä»¶

        å®‰è£…ï¼šcommand + shift + p è¾“å…¥ ip å›è½¦

        å¸è½½ï¼šcommand + shift + p è¾“å…¥remove å›è½¦

        1) pxè½¬remæ’ä»¶  https://github.com/flashlizi/cssrem

        1ï¼‰emmetï¼šhtmlã€csså¿«é€Ÿç¼–å†™

                å¦‚æœemmetæ’ä»¶å¤±æ•ˆï¼šhttp://www.jianshu.com/p/0862e754cf15

        2ï¼‰syncedSideBarï¼šä¾§æ ä¸ä¸»ç•Œé¢çš„é¢œè‰²ç›¸åŒ

        3ï¼‰babelï¼šES6ã€JSXã€React

        4ï¼‰AngularJS

        5ï¼‰jQueryï¼šjQueryæç¤º

        6ï¼‰Html5ï¼šhtml5æ†

        7ï¼‰Lessï¼šä¸€ä¸ªLessè¯­æ³•é«˜äº®æ’ä»¶

        8ï¼‰Sass

        9ï¼‰JsFormatï¼šjs æ ¼å¼åŒ–æ’ä»¶

        10ï¼‰SublimeLinterï¼šè¡Œå†…é«˜äº®è¯­æ³•

        11ï¼‰SideBarEnhancementsï¼šä¸€ä¸ªå·¦è¾¹æ å¢å¼º

        12ï¼‰SublimeCodeintelï¼šä¸€ä¸ªä»£ç æ™ºèƒ½æç¤ºå¼•æ“

        13ï¼‰Alignmentï¼šJsä»£ç å¯¹å…¶æ’ä»¶

        14ï¼‰BracketHighlighterï¼šä»£ç å¯¹å…¶çº¿é«˜äº®

        15ï¼‰Gitï¼šgitçš„æ”¯æŒæ’ä»¶

        16ï¼‰Prefixrï¼šPrefixr Apiæ”¯æŒï¼ŒPrefixræ˜¯ä¸€ä¸ªç”Ÿæˆcss3å…¼å®¹æ€§çš„api

        17ï¼‰LiveReloadï¼šç½‘é¡µæµè§ˆå™¨é¡µé¢é‡æ–°åŠ è½½æ’ä»¶

        18ï¼‰Tagï¼šæ ¼å¼åŒ–ä»£ç æ’ç‰ˆ

                Mac OS X: Command-Option-Shift-F
                Windows: Control-Alt-Shift-F



        19) HTML-CSS-JS Prettify ä»£ç æ ¼å¼åŒ–æ’ä»¶ cmd+shift+h

        20ï¼‰cssremï¼šsublimeçš„pxè½¬remçš„æ’ä»¶   https://github.com/flashlizi/cssrem      éœ€è¦æ‰‹åŠ¨ä¸‹è½½æ”¾åˆ°packagesä¸­ï¼Œé…ç½®cssrem.sublimeæ–‡ä»¶æŒ‡å®špx_to_remçš„å€¼ 

        21ï¼‰MarioRicalde-SCSS       SCSSçš„ä»£ç æå¼å’Œé«˜äº®

    reactæ’ä»¶   http://www.jianshu.com/p/ecf6c802fdc5?open_source=weibo_search
</code></pre><h4 id="gitBook"><a href="#gitBook" class="headerlink" title="gitBook"></a>gitBook</h4><pre><code>https://segmentfault.com/a/1190000005859901
http://www.chengweiyang.cn/gitbook/introduction/README.html
</code></pre><h4 id="markdown"><a href="#markdown" class="headerlink" title="markdown"></a>markdown</h4><pre><code>https://sspai.com/post/25137
</code></pre>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/04/24/EChartå›¾è¡¨æ’ä»¶/">EChart</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/04/24/EChartå›¾è¡¨æ’ä»¶/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-04-24T03:43:51.000Z" itemprop="datePublished">2017-04-24</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/å‰ç«¯æ’ä»¶ç±»/">å‰ç«¯æ’ä»¶ç±»</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre><code>1ã€npm install echarts --save

2ã€å¼•å…¥echartsçš„ä¸¤ç§æ–¹å¼

    é¡µé¢ç›´æ¥å¼•å…¥æ–‡ä»¶: &lt;script src=&quot;echarts.min.js&quot;&gt;&lt;/script&gt;

    webpack: import echarts from &apos;echarts&apos;

3ã€é¡µé¢åˆ›å»ºDOMçš„å®¹å™¨

    &lt;div id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt;        å¿…é¡»è¦ä¸€ä¸ªé«˜åº¦å€¼
</code></pre><h4 id="å¼‚æ­¥æ•°æ®åŠ è½½å’Œæ›´æ–°"><a href="#å¼‚æ­¥æ•°æ®åŠ è½½å’Œæ›´æ–°" class="headerlink" title="å¼‚æ­¥æ•°æ®åŠ è½½å’Œæ›´æ–°"></a>å¼‚æ­¥æ•°æ®åŠ è½½å’Œæ›´æ–°</h4><pre><code>1ã€æ•°æ®å¼‚æ­¥

    å°†æ•°æ®é€šè¿‡ajaxå¼‚æ­¥å–åˆ°åï¼Œåœ¨é€šè¿‡setOption()æ–¹å¼ç›´æ¥åŠ åˆ°è½½æ’ä»¶ä¸­


2ã€loadingåŠ¨ç”»

    showLoading()æ¥æ˜¾ç¤ºã€hideLoading()éšè—

    Exampole
    var myChart = echarts.init(document.getElementById(&apos;main&apos;));

    myChart.showLoading();
    $.ajax({
        success:function(data){
            myChart.hideLoading();
        }
    })


3ã€æ•°æ®çš„åŠ¨æ€æ›´æ–°

    åªéœ€è¦åŠ å•ä¸ªæ•°æ®ï¼Œå…ˆdata.push(vlaue), åœ¨é€šè¿‡setOption()å°†æ•°æ®æ¸²æŸ“å‡ºæ¥

    var data = [];        // å­˜å‚¨æ•°æ® 

    // åˆ›å»ºå›¾è¡¨å°†dataæ•°æ®åŠ å…¥
    ....

    // æ·»åŠ æ•°æ® 
    function addData(){
        data.push(Math.random()*100);
    }

    setInterval(function(){
        addData();
        myChart.setOption({
            æ•°æ®
        })
    },1000)
</code></pre><h4 id="æ•°æ®åŒºç¼©æ”¾ç»„ä»¶-dataZoom"><a href="#æ•°æ®åŒºç¼©æ”¾ç»„ä»¶-dataZoom" class="headerlink" title="æ•°æ®åŒºç¼©æ”¾ç»„ä»¶ dataZoom"></a>æ•°æ®åŒºç¼©æ”¾ç»„ä»¶ dataZoom</h4><pre><code>option = {
    xAxis: {
        type: &apos;value&apos;
    },
    yAxis: {
        type: &apos;value&apos;
    },

    dataZoom: [
        {   // è¿™ä¸ªdataZoomç»„ä»¶ï¼Œé»˜è®¤æ§åˆ¶xè½´ã€‚
            type: &apos;slider&apos;, // è¿™ä¸ª dataZoom ç»„ä»¶æ˜¯ slider å‹ dataZoom ç»„ä»¶
            start: 10,      // å·¦è¾¹åœ¨ 10% çš„ä½ç½®ã€‚
            end: 60         // å³è¾¹åœ¨ 60% çš„ä½ç½®ã€‚
        }
    ],

    series: [
        {
            type: &apos;scatter&apos;, // è¿™æ˜¯ä¸ªã€æ•£ç‚¹å›¾ã€
            itemStyle: {
                normal: {
                    opacity: 0.8
                }
            },
            symbolSize: function (val) {
                return val[2] * 40;
            },
            data: [[&quot;14.616&quot;,&quot;7.241&quot;,&quot;0.896&quot;],[&quot;3.958&quot;,&quot;5.701&quot;,&quot;0.955&quot;],[&quot;2.768&quot;,&quot;8.971&quot;,&quot;0.669&quot;],[&quot;9.051&quot;,&quot;9.710&quot;,&quot;0.171&quot;],[&quot;14.046&quot;,&quot;4.182&quot;,&quot;0.536&quot;],[&quot;12.295&quot;,&quot;1.429&quot;,&quot;0.962&quot;],[&quot;4.417&quot;,&quot;8.167&quot;,&quot;0.113&quot;],[&quot;0.492&quot;,&quot;4.771&quot;,&quot;0.785&quot;],[&quot;7.632&quot;,&quot;2.605&quot;,&quot;0.645&quot;],[&quot;14.242&quot;,&quot;5.042&quot;,&quot;0.368&quot;]]
        }
    ]
}
</code></pre><h4 id="äº‹ä»¶å’Œè¡Œä¸º"><a href="#äº‹ä»¶å’Œè¡Œä¸º" class="headerlink" title="äº‹ä»¶å’Œè¡Œä¸º"></a>äº‹ä»¶å’Œè¡Œä¸º</h4><pre><code>Echartsä¸­æœ‰ä¸¤ç§äº‹ä»¶ï¼Œ1ã€ç”¨æˆ·çš„é¼ æ ‡äº‹ä»¶   2ã€äº¤äº’ç»„ä»¶åè§¦å‘çš„è¡Œä¸ºäº‹ä»¶

ä¸€ã€é¼ æ ‡äº‹ä»¶

    é¼ æ ‡äº‹ä»¶: &apos;click&apos;ã€&apos;dblclick&apos;ã€&apos;mousedown&apos;ã€&apos;mousemove&apos;ã€&apos;mouseup&apos;ã€&apos;mouseover&apos;ã€&apos;mouseout&apos;

    myChart.on(&apos;click&apos;, function(params){
        console.log(params.name)
    })


äºŒã€äº¤äº’ç»„ä»¶

    myChart.dispatchAction({ type: &apos;&apos; })        // é€šè¿‡dispatchActionè§¦å‘

    1ã€legendselectchanged: åˆ‡æ¢å›¾ä¾‹å¼€å…³æ—¶è§¦å‘

    2ã€datazoom: æ•°æ®åŒºåŸŸç¼©æ”¾è§¦å‘


äºŒã€params å¯¹è±¡

    {
        // å½“å‰ç‚¹å‡»çš„å›¾å½¢å…ƒç´ æ‰€å±çš„ç»„ä»¶åç§°ï¼Œ
        // å…¶å€¼å¦‚ &apos;series&apos;ã€&apos;markLine&apos;ã€&apos;markPoint&apos;ã€&apos;timeLine&apos; ç­‰ã€‚
        componentType: string,

        // ç³»åˆ—ç±»å‹ã€‚å€¼å¯èƒ½ä¸ºï¼š&apos;line&apos;ã€&apos;bar&apos;ã€&apos;pie&apos; ç­‰ã€‚å½“ componentType ä¸º &apos;series&apos; æ—¶æœ‰æ„ä¹‰ã€‚
        seriesType: string,

        // ç³»åˆ—åœ¨ä¼ å…¥çš„ option.series ä¸­çš„ indexã€‚å½“ componentType ä¸º &apos;series&apos; æ—¶æœ‰æ„ä¹‰ã€‚
        seriesIndex: number,

        // ç³»åˆ—åç§°ã€‚å½“ componentType ä¸º &apos;series&apos; æ—¶æœ‰æ„ä¹‰ã€‚
        seriesName: string,

        // æ•°æ®åï¼Œç±»ç›®å
        name: string,

        // æ•°æ®åœ¨ä¼ å…¥çš„ data æ•°ç»„ä¸­çš„ index
        dataIndex: number,

        // ä¼ å…¥çš„åŸå§‹æ•°æ®é¡¹
        data: Object,

        // sankeyã€graph ç­‰å›¾è¡¨åŒæ—¶å«æœ‰ nodeData å’Œ edgeData ä¸¤ç§ dataï¼Œ
        // dataType çš„å€¼ä¼šæ˜¯ &apos;node&apos; æˆ–è€… &apos;edge&apos;ï¼Œè¡¨ç¤ºå½“å‰ç‚¹å‡»åœ¨ node è¿˜æ˜¯ edge ä¸Šã€‚
        // å…¶ä»–å¤§éƒ¨åˆ†å›¾è¡¨ä¸­åªæœ‰ä¸€ç§ dataï¼ŒdataType æ— æ„ä¹‰ã€‚
        dataType: string,

        // ä¼ å…¥çš„æ•°æ®å€¼
        value: number|Array

        // æ•°æ®å›¾å½¢çš„é¢œè‰²ã€‚å½“ componentType ä¸º &apos;series&apos; æ—¶æœ‰æ„ä¹‰ã€‚
        color: string
    }
</code></pre><h4 id="é…ç½®é€‰é¡¹"><a href="#é…ç½®é€‰é¡¹" class="headerlink" title="é…ç½®é€‰é¡¹"></a>é…ç½®é€‰é¡¹</h4><pre><code>1ã€title: æ ‡é¢˜ï¼ˆåŒ…æ‹¬ä¸»å‰¯æ ‡é¢˜ã€é“¾æ¥ã€æ ·å¼ï¼‰

2ã€legend: æ ‡è®°çš„åŒºåŸŸ ï¼ˆå¯¹legendçš„æ˜¾éšã€å®½é«˜ã€ä½ç½®ã€æ¨ªçºµå‘æ’åˆ—ï¼‰

3ã€grid: å›¾è¡¨çš„ç½‘æ ¼åŒºåŸŸ ï¼ˆæ˜¯å¦æ˜¾ç¤ºç½‘æ ¼ã€ä½æ ‡ã€å®½é«˜ã€èƒŒæ™¯è‰²ã€è¾¹çº¿è‰²ï¼‰

4ã€xAxisã€yAxis: xã€yåæ ‡è½´

5ã€dataZoom: æ•°æ®ç¼©æ”¾ ï¼ˆï¼‰

6ã€toolTip: æç¤ºä¿¡æ¯ï¼Œé¼ æ ‡ç§»åˆ°æ•°æ®ç‚¹æµ®ç°çš„æç¤ºä¿¡æ¯ï¼ˆï¼‰

7ã€axisPointer:

8ã€toolBox: å·¥å…·æ  ï¼ˆå¯¼å‡ºå›¾è¡¨ã€æ•°æ®è§†å›¾ã€åŠ¨æ€ç±»å‹åˆ‡æ¢ã€ç¼©æ”¾ã€é‡ç½®ï¼‰

9ã€series: ç³»åˆ—åˆ—è¡¨ï¼ˆæ¥å†³å®šå›¾è¡¨çš„ç±»å‹ã€å›¾è¡¨çš„æ•°æ®ï¼‰

10ã€color: å›¾è¡¨æ¯ä¸€é¡¹çš„é¢œè‰²

11ã€background: å›¾è¡¨èƒŒæ™¯è‰²

12ã€textStyle: æ–‡æœ¬æ ·å¼

13ã€animate: æ˜¯å¦å¼€å¯åŠ¨ç”»

----- ç»„ä»¶ -------

14ã€timeline: æ—¶é—´è½´ç»„ä»¶

15ã€graphic: åŸç”Ÿå›¾å½¢å…ƒç´ ç»„ä»¶

16ã€calendar: æ—¥å†åæ ‡ç»„ä»¶

17ã€brush: åŒºåŸŸé€‰æ‹©ç»„ä»¶

18ã€geo: åœ°ç†åæ ‡ç³»ç»„ä»¶

19ã€parallel: å¹³è¡Œåæ ‡ç³»

20ã€parallelAxis: è¿™ä¸ªç»„ä»¶æ˜¯å¹³è¡Œåæ ‡ç³»ä¸­çš„åæ ‡è½´

21ã€singleAxis: å•è½´ã€‚å¯ä»¥è¢«åº”ç”¨åˆ°æ•£ç‚¹å›¾ä¸­å±•ç°ä¸€ç»´æ•°æ®
</code></pre><h4 id="serieså¯¹è±¡"><a href="#serieså¯¹è±¡" class="headerlink" title="serieså¯¹è±¡"></a>serieså¯¹è±¡</h4><pre><code>type: å±•ç¤ºå›¾è¡¨çš„ç±»å‹

name: åç§°

label: å›¾å½¢ä¸Šæ–‡æœ¬æ ‡ç­¾çš„æ§åˆ¶ï¼ˆshowã€positionã€offsetã€formatterã€ï¼‰

    formatterå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯å‡½æ•° 

        å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œæ¨¡æ¿å˜é‡æœ‰ {a}ã€{b}ã€{c}ï¼Œåˆ†åˆ«è¡¨ç¤ºç³»åˆ—åï¼Œæ•°æ®åï¼Œæ•°æ®å€¼ã€‚

        formatter: &apos;{b}: {c}&apos;

        label:{
            normal:{
                formatter: function(data){            // callback
                    return data.percent + &apos;%&apos;;
                }
            }
        }, 

        params:
        {
            componentType: &apos;series&apos;,
            // ç³»åˆ—ç±»å‹
            seriesType: string,
            // ç³»åˆ—åœ¨ä¼ å…¥çš„ option.series ä¸­çš„ index
            seriesIndex: number,
            // ç³»åˆ—åç§°
            seriesName: string,
            // æ•°æ®åï¼Œç±»ç›®å
            name: string,
            // æ•°æ®åœ¨ä¼ å…¥çš„ data æ•°ç»„ä¸­çš„ index
            dataIndex: number,
            // ä¼ å…¥çš„åŸå§‹æ•°æ®é¡¹
            data: Object,
            // ä¼ å…¥çš„æ•°æ®å€¼
            value: number|Array,
            // æ•°æ®å›¾å½¢çš„é¢œè‰²
            color: string,

            // ç™¾åˆ†æ¯”
            percent: number,

        }

labelLine: å›¾å½¢ä¸Šå›¾å½¢ä¸æ–‡æœ¬ä¹‹é—´è¿æ¥çº¿çš„æ§åˆ¶

data: æ•°æ®

center: é¥¼å›¾ä¸­å¿ƒåæ ‡

radius: åŠå¾„
</code></pre><blockquote>
<p>å‚è€ƒèµ„æ–™<br><a href="http://echarts.baidu.com/echarts2/doc/doc.html#Title" target="_blank" rel="noopener">http://echarts.baidu.com/echarts2/doc/doc.html#Title</a><br><a href="http://echarts.baidu.com/gallery/editor.html" target="_blank" rel="noopener">http://echarts.baidu.com/gallery/editor.html</a>   åœ¨çº¿ç¼–è¾‘</p>
</blockquote>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/04/06/NginxæœåŠ¡å™¨/">Nginx</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/04/06/NginxæœåŠ¡å™¨/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-04-06T10:18:51.000Z" itemprop="datePublished">2017-04-06</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æœåŠ¡å™¨/">æœåŠ¡å™¨</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="Nginxä»‹ç»"><a href="#Nginxä»‹ç»" class="headerlink" title="Nginxä»‹ç»"></a>Nginxä»‹ç»</h4><pre><code>æœåŠ¡å™¨åˆ†ç±»: Nginxã€Apacheã€tomcatã€Micorsoft Server

ngæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ï¼Œè¶…è¶ŠApacheçš„é«˜æ€§èƒ½å’Œç¨³å®šæ€§.
</code></pre><h4 id="å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡"><a href="#å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡" class="headerlink" title="å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡"></a>å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡</h4><pre><code>è´Ÿè½½å‡è¡¡è®¾å¤‡ä¹Ÿè¢«ç§°ä¸º&quot;å››åˆ°ä¸ƒå±‚äº¤æ¢æœº&quot;ï¼Œå››å±‚å°±æ˜¯åŸºäºIP+ç«¯å£çš„è´Ÿè½½å‡è¡¡ï¼Œä¸ƒå±‚å°±æ˜¯åŸºäºURLç­‰åº”ç”¨ä¿¡æ¯çš„è´Ÿè½½å‡è¡¡.

å¦‚æœåªåšHTTPçš„è´Ÿè½½å‡è¡¡ï¼Œç”¨haproxyå¥½äº†ã€‚æ€§èƒ½å¾ˆå¼ºã€‚

ä¸ƒå±‚è´Ÿè½½å‡è¡¡ä¼˜ç‚¹:

    1ã€é«˜å¹¶å‘è¿æ¥: æ”¯æ’‘5ä¸‡å¹¶å‘è¿æ¥

    2ã€å†…å­˜æ¶ˆè€—å°‘: åœ¨3ä¸‡å¹¶å‘è¿æ¥ï¼Œå¼€å¯10ä¸ªNginxè¿›ç¨‹æ¶ˆè€—150Må†…å­˜

    3ã€é…ç½®æ–‡ä»¶ç®€å•

    4ã€èŠ‚çœå¸¦å®½: æ”¯æŒGZIPå‹ç¼©ï¼Œå¯ä»¥æ·»åŠ æµè§ˆå™¨æœ¬åœ°ç¼“å­˜çš„Headerå¤´ï¼Œ

    5ã€ç¨³å®šæ€§é«˜: ç”¨äºåå‘ä»£ç†, å®•æœºæ¦‚ç‡å°

    9ã€æ”¯æŒçƒ­éƒ¨ç½²: ä¸é—´æ–­æœåŠ¡è¿›è¡Œæ›´æ–°
</code></pre><h4 id="NginxåŸç†"><a href="#NginxåŸç†" class="headerlink" title="NginxåŸç†"></a>NginxåŸç†</h4><pre><code>ä¸€ã€ä¸ƒå±‚è´Ÿè½½å‡è¡¡ä¼˜åŠ¿:

    1ã€å¯¹HTTPæŠ¥å¤´æ£€æŸ¥ï¼Œå¯ä»¥æ£€å‡ºçŠ¶æ€ç ä¸º400ã€500ã€600çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰é”™è¯¯å°†è¿æ¥è¯·æ±‚é‡æ–°å®šå‘åˆ°å¦ä¸€å°æœåŠ¡å™¨

    2ã€å¯ä»¥æ ¹æ®æ•°æ®ç±»å‹ï¼ˆåˆ¤æ–­æ•°æ®åŒ…æ˜¯å›¾åƒã€å‹ç¼©æ–‡ä»¶ã€æˆ–å¤šåª’ä½“æ–‡ä»¶ç­‰ï¼‰ï¼Œå°†æ•°æ®å¼•å‘å†…å®¹æœåŠ¡å™¨

    3ã€æ ¹æ®è¯·æ±‚ç±»å‹ï¼Œå°†æ™®é€šæ–‡æœ¬ã€å›¾è±¡ç­‰é™æ€æ–‡æ¡£ï¼Œæˆ–æ˜¯åŠ¨æ€æ–‡æ¡£è¯·æ±‚ï¼Œå¼•å‘ç›¸åº”çš„æœåŠ¡å™¨æ¥å¤„ç†


äºŒã€Nginxè´Ÿè½½å‡è¡¡æ˜¯åŸºäºå†…å®¹å’Œåº”ç”¨çš„ä¸ƒå±‚èµ„çš„ï¼ŒNginxæŠ—å¹¶å‘å¼ºï¼Œæ˜¯å› ä¸ºNginxä½¿ç”¨äº†éé˜»å¡ã€å¼‚æ­¥ä¼ è¾“

ä¸‰ã€æ¨¡å—

    1ã€nginxè´Ÿè½½å‡è¡¡æ¨¡å—

        é…ç½®è´Ÿè½½å‡è¡¡æ˜¯ngx_http_upstream_moduleï¼Œè¿™æ¨¡å—æ˜¯é»˜è®¤å®‰è£…

    2ã€ä»£ç†æ¨¡å—

        Proxyä¸ºnginxçš„ä»£ç†æ¨¡å—, å…è®¸å°†ç”¨æˆ·çš„HTTPè¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨

å››ã€åå‘ä»£ç† 

    åå‘ä»£ç†æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨å¾—åˆ°ç»“æœè¿”å›ç»™internetçš„å®¢æˆ·ç«¯
</code></pre><h4 id="Nginxè´Ÿè½½å‡è¡¡è°ƒè¯•ç­–ç•¥"><a href="#Nginxè´Ÿè½½å‡è¡¡è°ƒè¯•ç­–ç•¥" class="headerlink" title="Nginxè´Ÿè½½å‡è¡¡è°ƒè¯•ç­–ç•¥"></a>Nginxè´Ÿè½½å‡è¡¡è°ƒè¯•ç­–ç•¥</h4><pre><code>ngçš„upstreamç›®å‰æ”¯ä»˜å‡ ç§åˆ†é…:

1ã€è½®è¯¢: æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤

2ã€weight: æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µ

    upstream bakend { 
        server 192.168.0.14 weight=10; 
        server 192.168.0.15 weight=10; 
    }

3ã€ip_hash: æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œæ¯ä¸ªè®¿å®¢è®¿é—®ä¸€ä¸ªå›ºå®šçš„åç«¯æœåŠ¡å™¨

    upstream bakend { 
        ip_hash; 
            server 192.168.0.14:88; 
            server 192.168.0.15:80; 
        }
    }

4ã€fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰

5ã€url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰

    upstream backend { 
        server squid1:3128; 
        server squid2:3128; 
        hash $request_uri; 
        hash_method crc32; 
    }
</code></pre><h4 id="Nginxå®‰è£…å’Œåˆ é™¤"><a href="#Nginxå®‰è£…å’Œåˆ é™¤" class="headerlink" title="Nginxå®‰è£…å’Œåˆ é™¤"></a>Nginxå®‰è£…å’Œåˆ é™¤</h4><pre><code>ä¸»è¦æ­¥éª¤: ä¸‹è½½åŒ…ï¼Œå‹ç¼©ã€é…ç½®ç¼–è¯‘

$ https://nginx.org/en/download.html    ä¸‹è½½ä¸€ä¸ªnginxåŒ…ç‰ˆæœ¬

$ cd /usr/local/ &amp;&amp; mkdir newNginx     // è¿›å…¥åˆ°localç›®å½•å¹¶åˆ›å»ºä¸€ä¸ªnewNginxç›®å½•

$ å°†ä¸‹è½½çš„åŒ…copyåˆ°æ–°åˆ›å»ºçš„newNginxç›®å½•, å¹¶å°†åŒ…è§£å‹åˆ°å½“å‰ç›®å½•   tar zxf nginx-1.12.2.tar.gz 

$ cd nginx-1.12.2

$ ./configure        // éªŒè¯è¿‡ç¨‹

$ make

$ make install         // è¿™æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªnginxç›®å½• /usr/local/nginx

$ å°†newNginxç›®å½•çš„æ–‡ä»¶copyåˆ°nginxç›®å½•


1ã€å¼€å¯æœåŠ¡     /usr/local/nginx/sbin/nginx/    

2ã€é‡å¯  /usr/local/nginx/sbin/nginx/ -s reload

3ã€å¿«é€Ÿå…³æœº     /usr/local/nginx/sbin/nginx/ -s stop

4ã€æ­£å¸¸å…³æœº     /usr/local/nginx/sbin/nginx/ -s quit

5ã€ps -ef|grep nginx     // æŸ¥çœ‹ngè¿›ç¨‹

6ã€kill -9 xxxx            // æ€è¿›ç¨‹

7ã€nginx: [error] open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)

    nginx.pidæ–‡ä»¶åªæœ‰åœ¨å¯åŠ¨çš„æ—¶å€™æ‰ä¼šå­˜ï¼Œæœªå¯åŠ¨æ‰§è¡Œreloadä¼šå‡ºç°ä¸Šé¢çš„æç¤º

8ã€logsæ—¥å¿—  /usr/local/nginx/logs

    access.logå’Œerror.log
</code></pre><h4 id="Nginxé…ç½®æ–‡ä»¶"><a href="#Nginxé…ç½®æ–‡ä»¶" class="headerlink" title="Nginxé…ç½®æ–‡ä»¶"></a>Nginxé…ç½®æ–‡ä»¶</h4><pre><code>é»˜è®¤è¯¥é…ç½®æ–‡ä»¶è¢«å‘½ånginx.conf

    é…ç½®server

    server {
        listen       9092;                                // ç«¯å£
        root /Users/apple/siguang.liu/Hh/hh_h5;            // æŒ‡å®šæ ¹ç›®å½•

        location / {
            proxy_pass  http://174.16.1.82:8080/;        // ä»£ç†åˆ°çš„æœåŠ¡å™¨
        }

        error_page   500 502 503 504  /50x.html;        // é”™è¯¯
        location = /50x.html {
            root   html;
        }

        location ^~ /api {
            proxy_pass  http://172.16.1.82:8080/;        // å¦‚æœè®¿é—®ä»¥&quot;/api&quot;å¼€å¤´çš„ä»£ç†çš„æœåŠ¡å™¨
        }

        location ~ \.(gif|jpg|png|js|css|html|map)$ {    // æŒ‡å®šé™æ€èµ„æº
            root /Users/apple/siguang.liu/Hh/hh_h5;
        }
    }

    å¯ä»¥é€šè¿‡includeæ¥å°†å¦ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å¼•ç”¨

    include servers/*.conf;


ä¸€ã€æ‰€å­˜åœ¨çš„ç›®å½• /usr/local/nginx/conf            // æœ¬æœºmac /usr/local/openresty/nginx

äºŒã€å¯åŠ¨  sudo /usr/local/openresty/nginx/sbin/nginx      // éœ€è¦sudoç®¡ç†å‘˜æƒé™

ä¸‰ã€å¯åŠ¨åçš„å¯ä»¥é€šè¿‡è°ƒç”¨å¸¦-så‚æ•°æ¥æ‰§è¡Œæ–‡ä»¶æ¥æ§åˆ¶ 

    $ nginx -s å‘½ä»¤

    1ã€reload - é‡å¯  sudo /usr/local/openresty/nginx/sbin/nginx -s reload

    2ã€stop - å¿«é€Ÿå…³æœº sudo /usr/local/openresty/nginx/sbin/nginx -s stop

    3ã€quit - ä¼˜é›…å…³æœº sudo /usr/local/openresty/nginx/sbin/nginx -s quit

    4ã€reopen - é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ sudo /usr/local/openresty/nginx/sbin/nginx -s reopen

å››ã€æŸ¥çœ‹ã€æ€æ‰è¿›ç¨‹

    $ ps -ex | grep nginx

    $ kill -s quit 1682

äº”ã€é…ç½®æ–‡ä»¶ç»“æ„

    æŒ‡ä»¤åˆ†ä¸ºç®€å•æŒ‡ä»¤å’Œå—æŒ‡ä»¤ï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼Œä»¥åˆ†å·(;)ç»“æŸ

å››ã€æ³¨é‡Šä½¿ç”¨ #

    # HTTPS server
    #
    # server {
    #    listen       443 ssl;
    #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;
    # }
</code></pre><h4 id="Nginxé…ç½®-HTTP2-0"><a href="#Nginxé…ç½®-HTTP2-0" class="headerlink" title="Nginxé…ç½® HTTP2.0"></a>Nginxé…ç½® HTTP2.0</h4><pre><code>https://www.nginx.com/blog/nginx-1-9-5/
</code></pre><p>| <a href="http://www.cnblogs.com/felixzh/category/937300.html" target="_blank" rel="noopener">http://www.cnblogs.com/felixzh/category/937300.html</a><br>| <a href="https://www.cnblogs.com/felixzh/p/6283788.html" target="_blank" rel="noopener">https://www.cnblogs.com/felixzh/p/6283788.html</a><br>| <a href="https://www.cnblogs.com/taiyonghai/p/6728707.html" target="_blank" rel="noopener">https://www.cnblogs.com/taiyonghai/p/6728707.html</a></p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/04/06/æœåŠ¡å™¨ç«¯æ¦‚å¿µ/">å¤§å‹ç½‘ç«™æ¶æ„</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/04/06/æœåŠ¡å™¨ç«¯æ¦‚å¿µ/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-04-06T10:18:51.000Z" itemprop="datePublished">2017-04-06</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æœåŠ¡ç«¯å¼€å‘/">æœåŠ¡ç«¯å¼€å‘</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="cookieã€sessionã€token"><a href="#cookieã€sessionã€token" class="headerlink" title="cookieã€sessionã€token"></a>cookieã€sessionã€token</h4><pre><code>ä¸€ã€Session

    æ˜¯å¦ä¸€ç§è®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ï¼Œcookieä¿å­˜å®¢æˆ·ç«¯ï¼Œsessionå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š

    ç™»å½•æˆåŠŸ =&gt; æœåŠ¡å™¨å­˜å‚¨Session =&gt; å¹¶åœ¨å®¢æˆ·ç«¯çš„cookieä¸­ä¹Ÿå­˜å‚¨ä¸€ä¸ª =&gt; ä¹‹åå®¢æˆ·ç«¯è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å–åˆ°cookieçš„Sessionçš„å€¼ï¼Œåœ¨ä¸æœåŠ¡å™¨ä¿å­˜çš„æ¥è¿›è¡Œæ¯”è¾ƒæ˜¯å¦å­˜åœ¨ï¼ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯sessionå†…éƒ¨çš„æœºåˆ¶ï¼Œç¨‹åºåªéœ€è¦åˆ¤æ–­å°±è¡Œï¼‰

äºŒã€cookie

    å­˜å‚¨åœ¨å®¢æˆ·ç«¯æœ¬åœ°ï¼Œjså’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å­˜ã€å–ã€åˆ cookieçš„å€¼ï¼Œcookieç»„æˆï¼ˆkeyã€valueã€domainã€åŸŸã€å¤±æ•ˆæ—¶é—´ï¼‰

ä¸‰ã€token

    tokençš„æ„æ€æ˜¯ä»¤ç‰Œï¼Œç”¨æˆ·èº«ä»½éªŒè¯ï¼Œæœ€ç®€å•çš„tokenç»„æˆ:uid(ç”¨æˆ·å”¯ä¸€çš„èº«ä»½æ ‡è¯†)ã€time(å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³)ã€sign(ç­¾åï¼Œç”±tokençš„å‰å‡ ä½+ç›ä»¥å“ˆå¸Œç®—æ³•å‹ç¼©æˆä¸€å®šé•¿çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²

    ä½œä¸ºèº«ä»½è®¤è¯ tokenå®‰å…¨æ€§æ¯”sessionå¥½ï¼Œå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ç­¾åè¿˜èƒ½é˜²æ­¢ç›‘å¬ä»¥åŠé‡æ”¾æ”»å‡»ï¼Œè€Œsessionå°±å¿…é¡»é é“¾è·¯å±‚æ¥ä¿éšœé€šè®¯å®‰å…¨äº†ã€‚å¦‚ä¸Šæ‰€è¯´ï¼Œå¦‚æœä½ éœ€è¦å®ç°æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œä»ç„¶å¯ä»¥å¢åŠ sessionæ¥åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ä¸€äº›çŠ¶æ€

http://blog.csdn.net/qq_33401924/article/details/52947514
http://blog.csdn.net/jikeehuang/article/details/51488020
</code></pre><h4 id="éªŒè¯ç çš„æµç¨‹"><a href="#éªŒè¯ç çš„æµç¨‹" class="headerlink" title="éªŒè¯ç çš„æµç¨‹"></a>éªŒè¯ç çš„æµç¨‹</h4><pre><code>é€šè¿‡æ’ä»¶æ¥ç”Ÿæˆå›¾å‹ =&gt; å¹¶å°†å›¾ç‰‡ç»“æœå­˜åˆ°sessionä¸­ï¼Œå¹¶å­˜åˆ°ç”¨æˆ·çš„cookieä¸­ =&gt; ç™»å½•æ—¶æ¥åˆ¤æ–­sessionä¸­çš„å€¼ä¸ç”¨æˆ·è¯·æ±‚å‚æ•°çš„å€¼æ˜¯å¦ç›¸åŒ

https://github.com/lemonce/svg-captcha/blob/master/README_CN.md

// ç”ŸæˆéªŒè¯ç 
async captcha() {
    const svgCaptcha = require(&apos;svg-captcha&apos;);
    const { ctx } = this;
    const captcha = svgCaptcha.createMathExpr({
        size: 4,                 // éªŒè¯ç é•¿åº¦
        ignoreChars: &apos;0o1i&apos;,     // éªŒè¯ç å­—ç¬¦ä¸­æ’é™¤ 0o1i
        noise: 3,                 // å¹²æ‰°çº¿æ¡çš„æ•°é‡
        color: true,             // éªŒè¯ç çš„å­—ç¬¦æ˜¯å¦æœ‰é¢œè‰²ï¼Œé»˜è®¤æ²¡æœ‰ï¼Œå¦‚æœè®¾å®šäº†èƒŒæ™¯ï¼Œåˆ™é»˜è®¤æœ‰
        background: &apos;rgba(0,0,0,0.3)&apos;, // éªŒè¯ç å›¾ç‰‡èƒŒæ™¯é¢œè‰²
    });
    ctx.session.captcha = captcha.text;
    ctx.type = &apos;image/svg+xml&apos;;        // è®¾ç½®headerçš„content-type
    ctx.body = captcha.data;
}

// ç”¨æˆ·ç™»å½•
async login() {
    const { ctx, app, service } = this;

    if (ctx.session.captcha &amp;&amp; ctx.session.captcha !== ctx.request.body.captcha) {
    this.success({
        data: {},
        message: &apos;éªŒè¯ç é”™è¯¯&apos;,
        statusType: app.statusType.otherError,
    });
    return;
    }

    if (
    app.validateParams({
        userName: { type: &apos;string&apos;, max: 100, min: 2 },
        pwd: { type: &apos;string&apos;, min: 1 },
    }, ctx)
    ) {

    const data = await service.auth.login(ctx.request.body);
    this.success(data);
    }
}
</code></pre><h4 id="httpå’Œhttps"><a href="#httpå’Œhttps" class="headerlink" title="httpå’Œhttps"></a>httpå’Œhttps</h4><pre><code>https://segmentfault.com/a/1190000003801450
</code></pre><h4 id="ç™»å½•æµç¨‹"><a href="#ç™»å½•æµç¨‹" class="headerlink" title="ç™»å½•æµç¨‹"></a>ç™»å½•æµç¨‹</h4><pre><code>sessionæˆ–token

å¯†ç åŠ ç› MD5ï¼ˆusername + password + saltï¼‰
</code></pre><p>â€”â€”â€”â€”â€”â€”â€”â€“ æ¦‚å¿µ â€”â€”â€”â€”â€”â€”â€”â€“ </p>
<h4 id="æœåŠ¡å™¨ã€è™šæ‹Ÿæœº"><a href="#æœåŠ¡å™¨ã€è™šæ‹Ÿæœº" class="headerlink" title="æœåŠ¡å™¨ã€è™šæ‹Ÿæœº"></a>æœåŠ¡å™¨ã€è™šæ‹Ÿæœº</h4><pre><code>æœåŠ¡å™¨: åªæ˜¯ä¸€ä¸ªç¡¬ä»¶è™šæ‹ŸæœåŠ¡åªæ˜¯ç³»ç»Ÿéƒ¨åˆ†

è™šæ‹Ÿæœº: å…è®¸ä¸€å°HTTPæœåŠ¡å™¨æ­å»ºå¤šä¸ªwebå»ºç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸€å°æœåŠ¡å™¨å¯ä»¥ä¸ºå¤šä¸ªç”¨æˆ·æœåŠ¡ï¼Œæ¯ä¸ªç”¨æˆ·é€šè¿‡åŸŸåè¿è¡Œå„è‡ªçš„ç½‘ç«™ï¼Œè¿™å°±æ˜¯åˆ©ç”¨äº†è™šæ‹Ÿæœºï¼ˆåˆç§°è™šæ‹ŸæœåŠ¡å™¨ï¼‰çš„åŠŸèƒ½
</code></pre><h4 id="å‰ååˆ†ç¦»"><a href="#å‰ååˆ†ç¦»" class="headerlink" title="å‰ååˆ†ç¦»"></a>å‰ååˆ†ç¦»</h4><pre><code>å‰åç«¯æ•°æ®åˆ†ç¦»ç™»å½•å¤±æ•ˆåˆ¤æ–­å¯ä»¥é€šè¿‡sessionæœåŠ¡ç«¯æ¥åˆ¤æ–­ =&gt; è·³è½¬ä¼šå‘˜ç®¡ç†æ¯ä¸ªé¡µé¢ =&gt; æœåŠ¡å™¨ç«¯åˆ¤æ–­sessionæ˜¯å¦å¤±æ•ˆ =&gt; å¤±æ•ˆè·³åˆ°ç™»å½•

å…¶å®ƒé¡µé¢çš„ç™»å½•ä¿¡æ¯å¯ä»¥å‰ç«¯å¯ä»¥é€šè¿‡cookieæ¥è·å–
</code></pre><h4 id="æ­£å‘ä»£ç†ã€åå‘ä»£ç†-Proxy"><a href="#æ­£å‘ä»£ç†ã€åå‘ä»£ç†-Proxy" class="headerlink" title="æ­£å‘ä»£ç†ã€åå‘ä»£ç† Proxy"></a>æ­£å‘ä»£ç†ã€åå‘ä»£ç† Proxy</h4><pre><code>ä¸€ã€æ­£å‘ä»£ç†: æ¯”å¦‚ç¿»å¢™ï¼Œç›´æ¥è®¿é—®å›½å¤–ç½‘ç«™è®¿é—®ä¸äº†ï¼Œéœ€è¦å¯ä»¥ä¸€ä¸ªæœåŠ¡å™¨æ¥è¿›è¡Œè®¿é—®ã€‚æ­£å‘ä»£ç†çš„å…¸å‹ç”¨é€”æ˜¯ä¸ºåœ¨é˜²ç«å¢™å†…çš„å±€åŸŸç½‘å®¢æˆ·ç«¯æä¾›è®¿é—®Internetçš„é€”å¾„ã€‚æ­£å‘ä»£ç†è¿˜å¯ä»¥ä½¿ç”¨ç¼“å†²ç‰¹æ€§å‡å°‘ç½‘ç»œä½¿ç”¨ç‡ã€‚
</code></pre><p><img src="images/105641260.jpg" alt="æ­£å‘ä»£ç†"> </p>
<pre><code>äºŒã€åå‘ä»£ç†: ä»£ç†ç†æœåŠ¡å™¨æ¥æ¥å—ç½‘ç»œçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œçš„æœåŠ¡å™¨ ï¼ˆæœåŠ¡æ–¹çš„éœ€æ±‚ï¼Œä¸ºäº†è§£å†³ä¸€äº›è´Ÿè½½ç­‰é—®é¢˜ï¼‰

    ä½œç”¨: ä¿è¯å†…ç½‘çš„å®‰å…¨ï¼Œè´Ÿè½½å‡è¡¡
</code></pre><p><img src="images/110207878.jpg" alt="åå‘ä»£ç†"><br><img src="images/305504-20161112125907030-1432469707.png" alt="åå‘ä»£ç†"></p>
<pre><code>http://www.cnblogs.com/Anker/p/6056540.html
</code></pre><h4 id="CDNå’Œåå‘ä»£ç†"><a href="#CDNå’Œåå‘ä»£ç†" class="headerlink" title="CDNå’Œåå‘ä»£ç†"></a>CDNå’Œåå‘ä»£ç†</h4><pre><code>CDN: éƒ¨ç½²åœ¨ç½‘ç»œæä¾›çš„æœºæˆ¿ï¼Œç”¨æˆ·è¯·æ±‚æ—¶å¯ä»¥ä»æœ€è¿‘çš„ç½‘ç»œæä¾›å•†æœºæˆ¿è·å–æ•°æ®
</code></pre><h4 id="è´Ÿè½½çš„å‡è¡¡"><a href="#è´Ÿè½½çš„å‡è¡¡" class="headerlink" title="è´Ÿè½½çš„å‡è¡¡"></a>è´Ÿè½½çš„å‡è¡¡</h4><pre><code>é€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨æ¥ä¼˜åŒ–ç½‘ç«™çš„è´Ÿè½½
</code></pre><p><img src="images/305504-20161112124423530-566240666.png" alt="è´Ÿè½½çš„å‡è¡¡"></p>
<h4 id="é›†ç¾¤ã€åˆ†å¸ƒå¼"><a href="#é›†ç¾¤ã€åˆ†å¸ƒå¼" class="headerlink" title="é›†ç¾¤ã€åˆ†å¸ƒå¼"></a>é›†ç¾¤ã€åˆ†å¸ƒå¼</h4><h4 id="è·³æ¿æœº"><a href="#è·³æ¿æœº" class="headerlink" title="è·³æ¿æœº"></a>è·³æ¿æœº</h4><pre><code>è·³æ¿æœºæ˜¯å¼€å‘è€…ç™»å½•åˆ°ç½‘ç«™åˆ†é…ç»™åº”ç”¨æœåŠ¡å™¨çš„å”¯ä¸€é€”å¾„ã€‚å¼€å‘è€…å¿…é¡»é¦–å…ˆç™»å½•è·³æ¿æœºï¼Œå†é€šè¿‡è·³æ¿æœºç™»å½•åˆ°åº”ç”¨æœåŠ¡å™¨

kè¸æ¿æœºå±äºå†…æ§å ¡å’æœºèŒƒå›´ï¼Œç”¨äºå•ç‚¹ç™»å½•çš„ä¸»æœºï¼Œä¹‹å‰æ˜¯ä¸ºäº†è¿ç»´äººå‘˜è¿œç¨‹ç™»å½•è¿›è¡Œç®¡ç†ï¼Œä¼šåœ¨æœºæˆ¿éƒ¨ç½²è·³æ¿æœºï¼Œè¸æ¿æœºå°±æ˜¯ä¸€å°æœåŠ¡å™¨ï¼Œç»´æŠ¤äººå‘˜åœ¨ç»´æŠ¤è¿‡ç¨‹å…ˆè¦ç»Ÿä¸€ç™»å½•åœ¨è¿™å°æœåŠ¡å™¨ä¸Šåœ¨ç™»å½•åˆ°ç›®å½•æœåŠ¡å™¨è¿›è¡Œç»´æŠ¤
</code></pre><h4 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h4><h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><pre><code>ç½‘ç«™ç¼“å­˜æœ‰ä¸¤ç§ï¼šç¼“å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰å’Œç¼“å­˜åœ¨ä¸“é—¨çš„åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡å™¨ä¸Šï¼ˆè¿œç«¯ç¼“å­˜ï¼‰
</code></pre><h4 id="RESTfulæ¶æ„"><a href="#RESTfulæ¶æ„" class="headerlink" title="RESTfulæ¶æ„"></a>RESTfulæ¶æ„</h4><h4 id="CORSè·¨åŸŸèµ„æºå…±äº«"><a href="#CORSè·¨åŸŸèµ„æºå…±äº«" class="headerlink" title="CORSè·¨åŸŸèµ„æºå…±äº«"></a>CORSè·¨åŸŸèµ„æºå…±äº«</h4><pre><code>1ã€é€šè¿‡è®¾ç½®æœåŠ¡å™¨å¯¹headerè®¾ç½®ä¸€ä¸ªAccess-Control-Allow-Origin: *, å¼€å¯è·¨åŸŸè¯·æ±‚ã€‚åœ¨è¢«è¯·æ±‚çš„Response headerä¸­åŠ å…¥

    // æŒ‡å®šå…è®¸å…¶ä»–åŸŸåè®¿é—®  
    header(&apos;Access-Control-Allow-Origin:*&apos;);
    // å“åº”ç±»å‹  
    header(&apos;Access-Control-Allow-Methods:POST&apos;);
    // å“åº”å¤´è®¾ç½®  
    header(&apos;Access-Control-Allow-Headers:x-requested-with,content-type&apos;);  

2ã€CORSä¼˜ç‚¹: è·¨åŸŸæœ€å¸¸ç”¨çš„æ˜¯JSONPä½†è¿™ç§æ–¹å¼æ˜¯é€šè¿‡Getçš„æ–¹å¼è¯·æ±‚srcå®Œæˆçš„ï¼Œå¾ˆå¤šè·¨åŸŸé—®é¢˜JSONPæ— æ³•è§£å†³ï¼Œæ¯”å¦‚: 

    1) postè¯·æ±‚è·¨åŸŸ

    2) &quot;script error&quot; çš„è„šæœ¬é”™è¯¯æç¤º

    3) canvasä¸­æ— æ³•è·å–è·¨åŸŸå›¾ç‰‡çš„ä¿¡æ¯ï¼Œå¦‚æœä½¿ç”¨CORSä¸Šé¢å‡ ä¸ªé—®é¢˜å°±å¯ä»¥è§£å†³
</code></pre><h4 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h4><pre><code>ä¸€ã€XSS æ”»å‡»: å¯¹ Web é¡µé¢æ³¨å…¥è„šæœ¬ï¼Œä½¿ç”¨ JavaScript çªƒå–ç”¨æˆ·ä¿¡æ¯ï¼Œè¯±å¯¼ç”¨æˆ·æ“ä½œ

äºŒã€CSRF æ”»å‡»: ä¼ªé€ ç”¨æˆ·è¯·æ±‚å‘ç½‘ç«™å‘èµ·æ¶æ„è¯·æ±‚

ä¸‰ã€é’“é±¼æ”»å‡»: åˆ©ç”¨ç½‘ç«™çš„è·³è½¬é“¾æ¥æˆ–è€…å›¾ç‰‡åˆ¶é€ é’“é±¼é™·é˜±
</code></pre><p>â€”â€”â€”â€”â€”â€”â€”â€“ ç½‘ç»œ â€”â€”â€”â€”â€”â€”â€”â€“ </p>
<h4 id="ç½‘å…³ã€éš§é“"><a href="#ç½‘å…³ã€éš§é“" class="headerlink" title="ç½‘å…³ã€éš§é“"></a>ç½‘å…³ã€éš§é“</h4><pre><code>ç½‘å…³: è½¬å‘å…¶å®ƒæœåŠ¡å™¨é€šä¿¡æ•°æ®çš„æœåŠ¡å™¨ï¼Œæ¥æ”¶ä»å®¢æˆ·ç«¯å‘é€æ¥çš„

éš§é“: å°†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œä¸­è½¬ï¼Œå¹¶ä¿æŒåŒæ–¹é€šä¿¡è¿æ¥çš„åº”ç”¨ç¨‹åº
</code></pre><h4 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h4><h4 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h4><pre><code>åŸŸåç³»ç»Ÿï¼ˆè‹±æ–‡ï¼šDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰æ˜¯å› ç‰¹ç½‘çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿çš„è®¿é—®äº’è”ç½‘ã€‚DNS ä½¿ç”¨TCPå’ŒUDPç«¯å£53ã€‚å½“å‰ï¼Œå¯¹äºæ¯ä¸€çº§åŸŸåé•¿åº¦çš„é™åˆ¶æ˜¯63ä¸ªå­—ç¬¦ï¼ŒåŸŸåæ€»é•¿åº¦åˆ™ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ã€‚

http://www.alloyteam.com/2015/05/dns%EF%BC%8Cnode%E4%BB%A5%E5%8F%8A%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9F%A5%E8%AF%86%E5%92%8C%E5%BA%94%E7%94%A8/
</code></pre>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2017/04/02/mongoDB/">MongoDB</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2017/04/02/mongoDB/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2017-04-02T11:15:23.000Z" itemprop="datePublished">2017-04-02</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/æ•°æ®åº“/">æ•°æ®åº“</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>| mongodbçš„å®‰è£…å’Œå¯åŠ¨<br>| åˆ›å»ºç”¨æˆ·æƒé™<br>| æ•°æ®ç±»å‹ - nullã€booleanã€Numberã€Floatã€Stringã€Dateã€è¡¨è¾¾å¼ã€äºŒè¿›åˆ¶ã€undefinedã€Arrayã€Object<br>| åº“æ“ä½œ - show dbsã€show collectionsã€use dbã€dbã€db.dropDatabase()<br>| åˆ›å»ºå’Œåˆ é™¤é›†åˆ -  db.createCollectionã€db.myColl.insert({})ã€db.myColl.drop()<br>| åˆ é™¤è¡Œ -<br>| æ’å…¥å€¼ - db.myColl.insert({name: â€˜hahaâ€™})<br>| æ›´æ–°å€¼ - db.myColl.update({name: â€˜haha}, {$set: {age: 20}}, false, true)<br>|         $setã€$unsetã€$incã€$pushã€$pushAllã€$popã€$pullã€$pullAllã€$rename<br>| åˆ é™¤å€¼ -  db.myColl.remove({name: â€˜â€™})ã€remove({})<br>| æŸ¥è¯¢å€¼ - db.myColl.find({})<br>|         .sort()ã€count()ã€limite()ã€skip()<br>|         æŸ¥è¯¢æ¡ä»¶ $gtã€$gteã€$ltã€$lteã€!= ã€=ã€andã€orã€inã€notIn<br>|         æ•°ç»„æŸ¥è¯¢ $allã€$sizeã€$sclie<br>|         $where å­å¥<br>| ç´¢å¼• db.myColl.ensureIndex({key:1})ã€getIndexes()ã€dropIndexes()ã€background:trueä¿®æ”¹ç´¢å¼•<br>|        ç´¢å¼•ç±»å‹: _idç´¢å¼•ã€å•é”®ç´¢å¼•ã€å¤šé”®ç´¢å¼•ã€å¤åˆç´¢å¼•ã€è¿‡æœŸç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•<br>| å¤åˆ¶é›†<br>| åˆ†ç‰‡<br>| æ•°æ®å‡è¡¡<br>| æ€§èƒ½åˆ†æ</p>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><pre><code>è‡ªåŠ¨æç¤ºï¼ŒæŒ‰ä¸¤æ¬¡Tab

db.getMongo() - æŸ¥çœ‹å½“å‰mongoçš„ipå’Œç«¯å£

å¯åŠ¨æœåŠ¡ - /usr/local/Cellar/mongodb/3.4.3/bin  =&gt;  $ mongod &amp;

åœæ­¢æœåŠ¡ - è¿›å…¥ use admin  =&gt; $ db.shutdownServer()

æŸ¥çœ‹æœåŠ¡è¿›ç¨‹ -  ps -rf | grep mongod   ps -rf | grep mongo    kill -9 xxxx

---------------------------------------------------------------------------------------

db.copyDatabase(&apos;æ—§æ•°æ®åº“å&apos;, &apos;æ–°æ•°æ®åº“å&apos;) - Copyæ•°æ®åº“

---------------------------------------------------------------------------------------

show dbs - æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“

show collections - æŸ¥è¯¢æ‰€æœ‰å½“å‰æ•°æ®åº“ä¸‹æ‰€æœ‰çš„æ•°æ®è¡¨

use myDataBase - åˆ›å»ºå¹¶åˆ‡æ¢åº“ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºè¿™ä¸ªåº“ï¼Œåˆ›å»ºåº“æ—¶åœ¨å†…å­˜ä¸­ï¼Œåªæœ‰å¯¹åº“æ’å…¥é›†åˆæ“ä½œæ‰ä¼šçœŸæ­£å­˜åœ¨ç¡¬ç›˜ä¸Š

db - æŸ¥çœ‹å½“å‰é€‰æ‹©çš„åº“

db.dropDataBase() - åˆ é™¤æ•°æ®åº“


db.createCollection(è¡¨åï¼ŒæŒ‡å®šå¤§å°å’Œç´¢å¼•é€‰é¡¹) - åˆ›å»ºé›†åˆ

db.myColl.drop() - åˆ é™¤é›†åˆ


db.myColl.insert({_id: ObjectId(&quot;5a4b5f29cca1d978501c9c52&quot;), name: &apos;aa&apos;, age: 30}) - æ’å…¥ä¸»é”®ä¸èƒ½ç›¸åŒ

db.myColl.save({_id: ObjectId(&quot;5a4b5f29cca1d978501c9c52&quot;), name: &apos;aa&apos;, age: 30}) - æ’å…¥å…è®¸ä¸»é”®ç›¸åŒçš„æ•°æ®


db.myColl.find(query) - æŸ¥çœ‹æ–‡æ¡£

db.myColl.findOne() - å–ç¬¬ä¸€æ¡è®°å½•

db.myColl.update({}) - æ›´æ–°æ–‡æ¡£

db.myColl.remove(query, {justOne}) - åˆ é™¤ä¸€æ¡æ–‡æ¡£

db.myColl.update({name: &apos;siguang&apos;}, {$unset: {name: 1}}) - åˆ é™¤ä¸€ä¸ªå­—æ®µ


db.myColl.ensureIndex() - åˆ›å»ºç´¢å¼•

db.myColl.getIndexes() - æŸ¥çœ‹å½“å‰é›†åˆç´¢å¼•

db.myColl.dropIndexes() - åˆ é™¤ç´¢å¼• 

db.myColl.ensureIndex({id: 1}, {background: true}) - ä¿®æ”¹ç´¢å¼•


db.createUser() - åˆ›å»ºç”¨æˆ·è§’è‰²
</code></pre><h4 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h4><pre><code>ä¸€ã€MongoDBä¼˜ç‚¹

    1ã€æ— æ•°æ®ç»“æ„é™åˆ¶ï¼ˆæ²¡æœ‰è¡¨ç»“æ„æ¦‚å¿µï¼Œæ¯æ¡è®°å½•å¯ä»¥æœ‰å®Œå…¨ä¸åŒçš„ç»“æ„ï¼‰

    2ã€å®Œå…¨çš„ç´¢å¼•æ”¯æŒï¼ˆå•é”®ç´¢å¼•ã€æ•°ç»„ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€åœ°ç†ä½ç½®ç´¢å¼•ï¼‰

    3ã€æ•°æ®å®‰å…¨æ€§å’Œåˆ†ç‰‡æ‰©å±•æ•°æ®è§„æ¨¡

    1ã€ç®€å•çš„å•æœºæœåŠ¡    2ã€æ­å»ºå…·æœ‰å†—ä½™å®¹é”™åŠŸèƒ½çš„å¤åˆ¶é›†    3ã€æ­å»ºå¤§è§„æ¨¡æ•°æ®é›†ç¾¤        4ã€å®Œæˆé›†ç¾¤çš„è‡ªåŠ¨éƒ¨ç½²

    MongoDBé€»è¾‘ç»“æ„æ˜¯ä¸€ç§å±‚æ¬¡ç»“æ„ï¼Œæ–‡æ¡£(document)ã€é›†åˆ(collection)ã€æ•°æ®åº“(database)è¿™ä¸‰éƒ¨åˆ†ç»„æˆçš„ã€‚ 


äºŒã€æ•°æ®åº“åˆ†ç±»

    1ã€SQLæ•°æ®åº“ï¼Œæ”¯æŒSQLè¯­è¨€çš„æ•°æ®åº“ï¼Œå¦‚ Oracleï¼ŒMysql

    2ã€NoSQLæ•°æ®åº“ï¼Œä¸æ”¯æŒSQLè¯­è¨€çš„æ•°æ®åº“ï¼ŒRedis, MongoDB


ä¸‰ã€mongoä¸sqlæ¦‚å¿µ

    SQLæœ¯è¯­/æ¦‚å¿µ    MongoDBæœ¯è¯­/æ¦‚å¿µ    è§£é‡Š/è¯´æ˜

    database        database         æ•°æ®åº“
    table            collection         æ•°æ®åº“è¡¨/é›†åˆ
    row                document         æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£
    column            field             æ•°æ®å­—æ®µ/åŸŸ
    index            index             ç´¢å¼•
    table             joins              è¡¨è¿æ¥,MongoDBä¸æ”¯æŒ
    primary key        primary key         ä¸»é”®,MongoDBè‡ªåŠ¨å°†_idå­—æ®µè®¾ç½®ä¸ºä¸»é”®
</code></pre><h4 id="MongoDBå®‰è£…ã€è¿æ¥ã€å¯åŠ¨æœåŠ¡"><a href="#MongoDBå®‰è£…ã€è¿æ¥ã€å¯åŠ¨æœåŠ¡" class="headerlink" title="MongoDBå®‰è£…ã€è¿æ¥ã€å¯åŠ¨æœåŠ¡"></a>MongoDBå®‰è£…ã€è¿æ¥ã€å¯åŠ¨æœåŠ¡</h4><pre><code>$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;    // å®‰è£…brew

$ brew update                // æ›´æ–°brew

$ brew install mongodb         // å®‰è£…çš„ç›®å½• /usr/local/Cellar/mongodb/   

    brew uninstall mongodb  // å¸è½½mongo

$ brew list                    // æŸ¥çœ‹brewå®‰è£…çš„åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨brew

$ sudo mkdir -p /data/db       // åˆ›å»ºæ•°æ®åº“å­˜å‚¨ç›®å½•, è¿™ä¸ªæ˜¯mongoé»˜è®¤æ‰¾çš„åœ°å€ï¼Œå¦‚æœéœ€è¦æ”¾åˆ°å…¶å®ƒç›®å½•ä½¿ç”¨ mongod --dbpath /xxx/xxx/xx, æ³¨æ„ç›®å½•æƒé™ä¸èƒ½ä¸ºroot

$ è¿æ¥æœ¬åœ°å’Œè¿œç«¯æœåŠ¡å™¨çš„mongoDB

    æœ¬åœ°mongo: $ mongo localhost:27017/test -u user -p password            // å¦‚æœæ²¡æœ‰ç”¨æˆ·åå’Œå¯†ç ç›´æ¥mongo

    è¿œç«¯mongo: $ mongo 192.168.1.200:27017/test -u user -p password        // testä¸ºæ•°æ®åº“å

        mongodb://10.10.13.123:27017,10.10.13.341:27017/ibg_node_core

$ å¯åŠ¨å’Œå…³é—­mongoæœåŠ¡

    å¯åŠ¨æœåŠ¡: 

        $ cd /usr/local/Cellar/mongodb/3.6.1/bin        // è¿›å…¥åˆ°ç›®å½•

        $ mongod &amp;            // &amp; å…³é—­ç»ˆç«¯mongodæœåŠ¡ä¸ä¼šè¢«killæ‰  å¦‚æœå¯ç”¨æƒé™ä½¿ç”¨ mongod --auth

    å…³é—­æœåŠ¡:

        $ use admin         // éœ€è¦å…ˆè¿›å…¥åˆ°adminåº“

        $ db.shutdownServer()


$ brew info mongodb            // æŸ¥çœ‹å®‰è£…ä¿¡æ¯    mongod --config /usr/local/etc/mongod.conf

    mongodb.confå†…å®¹

        systemLog:        // logç›®å½•
            destination: file
        path: /usr/local/var/log/mongodb/mongo.log
            logAppend: true
        storage:        // dbç›®å½•
            dbPath: /usr/local/var/mongodb        // æ•°æ®å­˜å‚¨çš„ç›®å½•
        net:
            bindIp: 128.0.0.1

    http://blog.csdn.net/sun491922556/article/details/74973191            // 3.4ç‰ˆæœ¬é…ç½®

$ mongo --version            // æŸ¥çœ‹ç‰ˆæœ¬
</code></pre><h4 id="mongoçš„åŸºæœ¬æ•°æ®ç±»å‹"><a href="#mongoçš„åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="mongoçš„åŸºæœ¬æ•°æ®ç±»å‹"></a>mongoçš„åŸºæœ¬æ•°æ®ç±»å‹</h4><pre><code>nullã€booleanã€Numberã€Floatã€Stringã€Dateã€è¡¨è¾¾å¼ã€äºŒè¿›åˆ¶ã€undefinedã€Arrayã€Object
</code></pre><h4 id="åº“æ“ä½œ"><a href="#åº“æ“ä½œ" class="headerlink" title="åº“æ“ä½œ"></a>åº“æ“ä½œ</h4><pre><code>ä¸€ã€æŸ¥è¯¢åº“ã€æŸ¥è¯¢é›†åˆ

    1ã€show dbs â€” æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“åˆ—è¡¨

    2ã€show collections â€” æ˜¾ç¤ºå½“å‰åº“ä¸‹æ‰€æœ‰é›†åˆ


äºŒã€åˆ›å»ºåº“å’Œåˆ åº“

    1ã€use testDatabase â€” åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¦‚æœåº“å­˜åœ¨åˆ™ä½¿ç”¨å½“å‰åº“ï¼Œåˆ›å»ºæ—¶åªåœ¨å†…å­˜ä¸­ï¼Œåªæœ‰å¯¹è¿™ä¸ªåº“æœ‰æ“ä½œåè¿™ä¸ªæ•°æ®åº“æ‰èƒ½çœŸæ­£åˆ›å»º

    2ã€db - æŸ¥çœ‹å½“å‰æ‰€åœ¨çš„åº“åº“

    3ã€db.dropDatabase() - åˆ é™¤è¿™ä¸ªæ•°æ®åº“

        use tsetDatabase     // å…ˆè¿›å…¥è¦æ“ä½œçš„æ•°æ®åº“
        db.dropDatabase()     // åˆ é™¤åº“
</code></pre><h4 id="æ–‡æ¡£çš„åˆ›å»ºå’Œåˆ é™¤"><a href="#æ–‡æ¡£çš„åˆ›å»ºå’Œåˆ é™¤" class="headerlink" title="æ–‡æ¡£çš„åˆ›å»ºå’Œåˆ é™¤"></a>æ–‡æ¡£çš„åˆ›å»ºå’Œåˆ é™¤</h4><pre><code>æŸ¥çœ‹å¸¸ç”¨çš„æ–¹æ³•  db.myColl.help()

ä¸€ã€å»ºè¡¨ä¸¤ç§æ–¹æ³•

    db.createCollection(åç§°, æŒ‡å®šæœ‰å…³å†…å­˜å¤§å°å’Œç´¢å¼•é€‰é¡¹);    -    åˆ›å»ºé›†åˆ

        options:
            capped - Boolean    ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸ºtrueï¼Œåˆ™å¯ç”¨å°é¡¶é›†åˆã€‚å°é¡¶é›†åˆæ˜¯å›ºå®šå¤§å°çš„é›†åˆï¼Œä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—©çš„æ¡ç›®ï¼Œå½“å®ƒè¾¾åˆ°å…¶æœ€å¤§å¤§å°ã€‚å¦‚æœæŒ‡å®štrueï¼Œåˆ™éœ€è¦ä¹ŸæŒ‡å®šå°ºå¯¸å‚æ•°ã€‚
            autoIndexID - Boolean    ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸ºtrueï¼Œè‡ªåŠ¨åˆ›å»ºç´¢å¼•_idå­—æ®µçš„é»˜è®¤å€¼æ˜¯falseã€‚
            size - number    ï¼ˆå¯é€‰ï¼‰æŒ‡å®šæœ€å¤§å¤§å°å­—èŠ‚å°é¡¶é›†åˆã€‚å¦‚æœå°é¡¶å¦‚æœæ˜¯ trueï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦æŒ‡å®šè¿™ä¸ªå­—æ®µã€‚
            max - number

    db.myColl.insert({name:â€™hfâ€™,age:20}) â€” åœ¨mongodbä¸­åœ¨æ’å…¥æ•°æ®æ—¶å³åˆ›å»ºäº†æ”¹è¡¨ï¼Œæ­¤æ—¶åˆ›å»ºçš„æ˜¯åä¸ºmyCollçš„æ•°æ®è¡¨

        for(i=0; i&lt;100; i++) db.myTabel.insert({&apos;age&apos;, i})        å¾ªç¯æ’å…¥


äºŒã€åˆ é™¤é›†åˆã€æ–‡æ¡£

    db.myColl.remove({type: &apos;é©¬å°”ä»£å¤«&apos;}) - åˆ é™¤myCollé›†åˆä¸­ type=&apos;é©¬å°”ä»£å¤«&apos; è¿™æ¡æ–‡æ¡£

    db.myColl.drop(); â€” åˆ é™¤myCollè¿™ä¸ªé›†åˆ
</code></pre><h4 id="insert-æ’å…¥æ–‡æ¡£"><a href="#insert-æ’å…¥æ–‡æ¡£" class="headerlink" title="insert æ’å…¥æ–‡æ¡£"></a>insert æ’å…¥æ–‡æ¡£</h4><pre><code>1ã€insert() - æ’å…¥ä¸»é”®ä¸èƒ½ç›¸åŒï¼Œè‡ªåŠ¨ç”Ÿæˆ_id    db.myColl.insert({name:â€™hahahaâ€™, age:12});

2ã€save() - å…è®¸æ’å…¥é‡å¤æ•°æ®ï¼Œç›´æ¥æ·»åŠ ä¸€ä¸ªæ–‡æ¡£

    db.myColl.save({        // ç›´æ¥å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£
        data: {},
        message: &quot;æ“ä½œæˆåŠŸ&quot;,
        status: 0
    })

äºŒè€…çš„åŒºåˆ«ï¼Œinsert()åœ¨ä¸»é”®ç›¸åŒæ—¶ä¼šæŠ¥é”™ï¼Œsave()ä¸ä¼š

    $ db.user.find();        // { &quot;_id&quot; : ObjectId(&quot;5a4b5df1cca1d978501c9c50&quot;), &quot;username&quot; : &quot;siguang&quot; }

    $ db.user.insert({ &quot;_id&quot; : ObjectId(&quot;5a4b5df1cca1d978501c9c50&quot;), &quot;username&quot; : &quot;siguang&quot; })        // æŠ¥é”™

    $ db.user.save({ &quot;_id&quot; : ObjectId(&quot;5a4b5df1cca1d978501c9c50&quot;), &quot;username&quot; : &quot;siguang1111111&quot; })    // æ‰§è¡ŒæˆåŠŸï¼Œå¹¶å°†usernameçš„å€¼æ”¹äº†
</code></pre><h4 id="find-æ–‡æ¡£æŸ¥è¯¢"><a href="#find-æ–‡æ¡£æŸ¥è¯¢" class="headerlink" title="find æ–‡æ¡£æŸ¥è¯¢"></a>find æ–‡æ¡£æŸ¥è¯¢</h4><pre><code>http://www.cnmyColls.com/egger/p/3135847.html

1ã€findOne() - æŸ¥è¯¢ç¬¬ä¸€æ¡è®°å½•ï¼Œç„¶åé—­å…³æ¸¸æ ‡    

2ã€find() - è¿”å›ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•        db.role.find({age:30}) è¿”å›roleä¸­ageç­‰äº30çš„é›†åˆ

3ã€sort() - db.myColl.find().sort({age:1})      // age=1ä¸ºå‡åºï¼Œ-1ä¸ºé™åº  sort()

4ã€count() - db.myColl.find().count();          // è¿”å›è¡¨ä¸­è®°å½•çš„ä¸ªæ•° count()        

5ã€limit() - db.myColl.find().limit(5)          // è¿”å›å‰5æ¡æ•°æ® limit()

            db.myColl.find().skip(10).limit(20);        è¿”å›11-30æ¡æ•°æ®ï¼Œ ç”¨äºåˆ†é¡µ

6ã€skip() - db.myColl.find().skip(50)          // è·³è¿‡å‰50æ¡æ•°æ®

7ã€pretty() - å°†æŸ¥è¯¢å‡ºçš„å†…å®¹è¿›è¡Œæ ¼å¼æ˜¾ç¤º        

8ã€æŸ¥è¯¢æ¡ä»¶

    1ï¼‰æ¡ä»¶æŸ¥è¯¢   &gt; $gtã€ &gt;= $gteã€ &lt; $ltã€ &lt;= $lteã€ != $ne

        db.cars.find({carMoney: {$lt:100}})        // æŸ¥è¯¢carMoneyå°äº100çš„å€¼

        db.cars.find({carMoney: {$lt:100, $gt:20}})        // æŸ¥è¯¢carMoney å¤§äº20å°äº100çš„å€¼

    2ï¼‰$andã€$orã€$inã€$notIn

        $and    db.cars.find({name: &apos;å¡å®´&apos;, price: 200})        // name=å¡å®´ å¹¶ä¸” price=200    

        $in      db.myColl.find({price: {$in: [100, 300, 500]});        // æŸ¥è¯¢å‡ºprice fieldä¸­ä¸º100ã€300ã€500å€¼çš„å­—æ®µ

        $or     db.cars.find({ $or: [ {id: 9}, {carType: 735}] })        // æŸ¥è¯¢å‡ºid=9 æˆ–è€… carType=735

                db.cars.find({ isDeleted: false, $or: [ {id: /huang/i}, {carType: 735}] });    // æŸ¥è¯¢ isDeletedç­‰äºfalse å¹¶ä¸”idå¸¦æœ‰&apos;huang&apos;å­—ç¬¦ æˆ–è€… carTypeç­‰äº735

        $not    ä¸åŒ…æ‹¬çš„æ•°æ®

9ã€$type ç±»å‹æ“ä½œç¬¦æŸ¥è¯¢

    ä¾‹å¦‚: å°†nameå­—æ®µä¸­çš„æ‰€æœ‰ä¸ºæ•°å­—çš„æŸ¥è¯¢å‡ºæ¥ï¼Œ

    $ db.tourism.find({&apos;name&apos;: {$type: 1}})

    å¯¹åº”è¡¨:

        ç±»å‹                    æ•°å­—            å¤‡æ³¨

        Double                1                æ•°å­—
        String                2     
        Object                3     
        Array                4     
        Binary data            5     
        Undefined            6               å·²åºŸå¼ƒã€‚
        Object id            7     
        Boolean                8     
        Date                9     
        Null                10
        Regular Expression    11
        JavaScript            13     
        Symbol                14     
        JavaScript (with scope)    15     
        32-bit integer        16     
        Timestamp            17     
        64-bit integer        18     
        Min key                255            Query with -1.
        Max key                127     


10ã€æ•°ç»„æŸ¥è¯¢

    1ï¼‰$all - ç”¨æ¥æŸ¥è¯¢æ˜¯å¦åŒ…æ‹¬æ•°ç»„é‡Œçš„å€¼

        // content fieldå€¼ä¸ºæ•°ç»„
        db.myColl.find({content: {$all: [1, 8]})        è¿”å›contentä¸­åŒ…å«1æˆ–8çš„æ•°ç»„


    2ï¼‰$size - ç”¨æ¥æŸ¥è¯¢æ•°ç»„çš„é•¿åº¦

        db.myColl.find({content: {$size: 3}});        è¿”å›contentæ•°ç»„å­—æ®µé•¿åº¦ä¸º3ä¸ª


    3ï¼‰$slice - æ§åˆ¶æŒ‡å®šå­—æ®µä¸­è¿”å›æ•°ç»„çš„ä¸ªæ•°

        db.myColl.find({}, {content: {$slice: 3}} )    è¿”å›æ‰€æœ‰è®°å½• contentæ•°ç»„åªå–å‰ä¸‰ä¸ª

        db.myColl.find({}, {content: {$slice: -3}} )    ä»åå–3ä¸ª

        db.myColl.find({}, {content: {$slice: [1, 3]}} )    å–1-3çš„èŒƒå›´


11ã€$where å­å¥

    ç›¸å½“äºç”¨ä¸€ä¸ªjsæŸ¥è¯¢ä¸€éƒ¨åˆ†ï¼Œå¦‚æœä¸ºtrueåˆ™è¿”å›æ•°æ®ï¼Œåˆ™å¦ä¸è¿”å›

    å­—ç¬¦ä¸²å½¢å¼
    db.myColl.find({$where: &quot;this.title.length &gt; 23&quot;}, {title: 1})    å¯¹title fieldä¸­çš„å­—ç¬¦é•¿åº¦å¤§äº23çš„è¿”å›

    å‡½æ•°å½¢å¼
    db.myColl.find({$where: function(){ return this.title.length &gt; 23 }})


12ã€Example

    db.myColl.find();  â€”  æŸ¥è¯¢myCollä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œ å¸¦æ¡ä»¶ .fin({x: 1}) x=1çš„è®°å½•

    db.myColl.find({}, {id: &apos;&apos;, price: &apos;&apos;}) â€” æŸ¥è¯¢å…¶ä¸­ä¸¤ä¸ªå­—æ®µçš„å€¼

    db.myColl.find({id: 5}, {username: 1}) - åªè¿”å›id=5 çš„ usernameçš„å­—æ®µï¼Œå…¶ä½™çš„ä¸è¿”å›

        { &quot;_id&quot; : ObjectId(&quot;58e85c84784a18c26f9a1fa5&quot;), &quot;username&quot; : &quot;siguang5&quot; }

    db.myColl.find({carType: 33}, {id: &apos;&apos;, price: &apos;&apos;}) â€” è¿”å›carType=33çš„idå’Œpriceå­—æ®µçš„å€¼

    db.myColl.update({}, {$unset:{&apos;name&apos;:&apos;&apos;}}, false, true)        // åˆ é™¤ä¸€ä¸ªå­—æ®µ

    db.myColl.find({title: /ç¾èˆ°/}, {title: 1})    -    æŸ¥æ‰¾å‡ºtitleä¸­å¸¦æœ‰&quot;ç¾èˆ°&quot;çš„å­—ç¬¦ï¼Œå¹¶åªè¿”å›titleå­—æ®µ
</code></pre><h4 id="update-æ›´æ–°æ–‡æ¡£"><a href="#update-æ›´æ–°æ–‡æ¡£" class="headerlink" title="update æ›´æ–°æ–‡æ¡£"></a>update æ›´æ–°æ–‡æ¡£</h4><pre><code>update(æ›´æ–°æ¡ä»¶, æ›´æ–°çš„å€¼ï¼Œ[å¦‚æœä¸å­˜åœ¨æ˜¯å¦åˆ›å»º - é»˜è®¤false]ï¼Œ[æ˜¯å¦æ›´æ–°å…¨éƒ¨ - é»˜è®¤false])

1ã€$set - æ›´æ–°å€¼

    update() ç¬¬å››ä¸ªå‚æ•°ä¸ºtrueæ›´æ‰€æœ‰åŒ¹é…çš„å€¼ï¼Œfalseåªæ›´æ–°ä¸€ä¸ª

    // åªæ›´åŒ¹é…çš„ç¬¬ä¸€æ¡ å¦‚æœtype=&apos;123&apos;ä¸å­˜åœ¨, åˆ™æ’å…¥ä¸€æ¡åªæœ‰name=&apos;456&apos;çš„æ•°æ®
    db.myColl.update({type: &apos;123&apos;}, {name: &apos;456&apos;});        

    // æ›´æ–°å…¨éƒ¨åŒ¹é…
    db.myColl.update({name:â€™hfâ€™}, {$set:{age:25}}, false, true)

    // {multi:true} æ›´æ–°å¤šæ¡
    db.myColl.update({&apos;title&apos;:&apos;MongoDB æ•™ç¨‹&apos;}, {$set:{&apos;title&apos;:&apos;MongoDB&apos;}}, {multi:true})

    // ä¸ºé›†åˆä¸­æ‰€æœ‰æ–‡æ¡£æ·»åŠ ä¸€ä¸ªå­—æ®µ
    db.user.update({}, {$set: {password: &apos;******&apos;}}, {multi: 1})


2ã€$unset - åˆ é™¤å­—æ®µåˆ—

    db.myColl.find({id:1})             { &quot;id&quot; : 1, &quot;content&quot; : &quot;&quot; }    æ³¨æ„è¿™é‡Œè¦åˆ é™¤çš„å­—æ®µå€¼å¿…é¡»å¡«å†™ä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥æ˜¯0ã€1æˆ–å…¶å®ƒæ•°å­—

    db.myColl.update({id: 1}, {$unset: {content: 1}});
    db.myColl.find({id:1})            { &quot;id&quot; : 1}     contentè¢«åˆ é™¤


3ã€$inc - åªèƒ½å¯¹ä¸€ä¸ªæ•°å­—å­—æ®µçš„å€¼çš„è¿›è¡Œç´¯åŠ ï¼Œkeyä¸å­˜åœ¨æˆ–è€…éæ•°å­—éƒ½æŠ¥é”™

    db.myColl.find({id: 1});        result: { username: &apos;siguang&apos;, password: 100 }

    // å¦‚æœpasswordçš„å€¼å­˜åœ¨åˆ™ +1000
    db.myColl.update({id: 1}, {$inc: {password: 1000}})    
    db.myColl.find({id: 1});        result: { username: &apos;siguang&apos;, password: 1100 }


4ã€$pushã€$pushAll - å¯¹ä¸€ä¸ªæ•°ç»„å­—æ®µåœ¨æ’å…¥å€¼

    db.myColl.find({id: 3});            Result: { &quot;id&quot; : 3, &quot;username&quot; : &quot;siguang3&quot;,  &quot;content&quot; : [ 1, 2, 3 ] }

    db.myColl.update({id: 3}, {$push: {content: 4}})
    db.myColl.find({id: 3});            Result: { &quot;id&quot; : 3, &quot;username&quot; : &quot;siguang3&quot;,  &quot;content&quot; : [ 1, 2, 3, 4] }


5ã€$addToSet - å‘ä¸€ä¸ªæ•°ç»„ä¸­æ·»åŠ æ•°æ®ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªå€¼åˆ™ä¸æ·»åŠ ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ·»åˆ°æ•°ç»„ä¸­

    db.myColl.find({id: 3});            Result: { &quot;id&quot; : 3, &quot;username&quot; : &quot;siguang3&quot;,  &quot;content&quot; : [ 1, 2, 3 ] }

    db.myColl.update({id: 3}, {$addToSet: {content: 3}});        // æ•°ç»„ä¸­å­˜åœ¨ä¸æ·»åŠ 
    db.myColl.update({id: 3}, {$addToSet: {content: 4}});        // &quot;content&quot; : [ 1, 2, 3, 4 ]


6ã€$pop - åˆ é™¤æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå€¼ 

    db.myColl.update({id: 3}, {$pop: {content: -1}});        // contentä¸º1 åˆ é™¤æ•°ç»„ç¬¬ä¸€ä¸ªå€¼ï¼Œ-1åˆ é™¤æ•°ç»„æœ€åä¸€ä¸ªå€¼


7ã€$pullã€$pullAll - åˆ é™¤æ•°ç»„ä¸­æŒ‡å®šç›¸åŒçš„å€¼

    db.myColl.update({id: 4}, {$set: {content: [1,2,34,4,1,2,3,1,1,6,1,34]}});    å°†content fieldä¸ºæ•°ç»„

    db.myColl.update({id: 4}, {$pull: {contentn: 1}});
    db.myColl.find({id: 4});        Result  {content: [2,34,4,2,3,6,34]}}  å°†æ•°ç»„ä¸­çš„1å…¨éƒ¨åˆ é™¤


8ã€$rename - å¯¹æŸä¸ªå­—æ®µè¿›è¡Œæ›´å

    db.myColl.update({id: 4}, {$rename: {content: &apos;title&apos;}});        // å°†id=4çš„ content field åæ›´æ”¹ä¸ºtitle


http://chenzhou123520.iteye.com/myColl/1637629
</code></pre><h4 id="remove-åˆ é™¤æ–‡æ¡£"><a href="#remove-åˆ é™¤æ–‡æ¡£" class="headerlink" title="remove() åˆ é™¤æ–‡æ¡£"></a>remove() åˆ é™¤æ–‡æ¡£</h4><pre><code>1ã€db.myColl.remove({name: &apos;hf&apos;}) - åˆ é™¤nameå­—æ®µå€¼ä¸ºç©ºçš„è¡Œ, æ­¤å¤„ç›¸å½“äºå…³ç³»æ•°æ®åº“ä¸­çš„ delete myColl where name = â€˜hfâ€™

2ã€db.myColl.remove({_id: ObjectId(&quot;593526143793ca468ceb963c&quot;)}) - é€šè¿‡idæ¥åˆ é™¤æ–‡æ¡£

3ã€db.myColl.remove({}) - åˆ é™¤é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£
</code></pre><h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><pre><code>ç´¢å¼•å°±æ˜¯ç”¨æ¥åŠ é€ŸæŸ¥è¯¢

ç´¢å¼•çš„ä¼˜ç¼ºç‚¹:

    ä¼˜ç‚¹: ç´¢å¼•åŠ å¿«æŸ¥è¯¢çš„é€Ÿåº¦

    ç¼ºç‚¹: å¢åŠ ç£ç›˜ç©ºé—´æ¶ˆè€—ï¼Œé™ä½å†™å…¥æ€§èƒ½

ä¸€ã€å‘½ä»¤

    1ã€æŸ¥çœ‹ç´¢å¼• - getIndexes()    db.myColl.getIndexes()

    2ã€åˆ›å»ºç´¢å¼• - ensureIndex()    db.myColl.ensureIndex({userId: 1})        // 1å‡åº  -1é™åº

    3ã€åˆ é™¤ç´¢å¼• - dropIndexes()    db.myColl.dropIndexes()

    4ã€ä¿®æ”¹ç´¢å¼• - {background: true}        db.myColl.ensureIndex({id: 1}, {background: true});


äºŒã€ensureIndex()å‚æ•°

    1ã€background - Boolean å»ºç´¢å¼•è¿‡ç¨‹ä¼šé˜»å¡å…¶å®ƒæ•°æ®åº“æ“ä½œï¼Œbackgroundå¯æŒ‡å®šä»¥åå°æ–¹å¼åˆ›å»ºç´¢å¼•ï¼Œå³å¢åŠ  &quot;background&quot; å¯é€‰å‚æ•°ã€‚ &quot;background&quot; é»˜è®¤å€¼ä¸ºfalseã€‚

    2ã€unique - Boolean å»ºç«‹çš„ç´¢å¼•æ˜¯å¦å”¯ä¸€ã€‚æŒ‡å®šä¸ºtrueåˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸ºfalse.

    3ã€name - string ç´¢å¼•çš„åç§°ã€‚å¦‚æœæœªæŒ‡å®šï¼ŒMongoDBçš„é€šè¿‡è¿æ¥ç´¢å¼•çš„å­—æ®µåå’Œæ’åºé¡ºåºç”Ÿæˆä¸€ä¸ªç´¢å¼•åç§°ã€‚

    4ã€dropDups - Boolean åœ¨å»ºç«‹å”¯ä¸€ç´¢å¼•æ—¶æ˜¯å¦åˆ é™¤é‡å¤è®°å½•,æŒ‡å®š true åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸º false.

    5ã€sparse - Boolean å¯¹æ–‡æ¡£ä¸­ä¸å­˜åœ¨çš„å­—æ®µæ•°æ®ä¸å¯ç”¨ç´¢å¼•ï¼›è¿™ä¸ªå‚æ•°éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueçš„è¯ï¼Œåœ¨ç´¢å¼•å­—æ®µä¸­ä¸ä¼šæŸ¥è¯¢å‡ºä¸åŒ…å«å¯¹åº”å­—æ®µçš„æ–‡æ¡£.ã€‚é»˜è®¤å€¼ä¸º false.

    6ã€expireAfterSeconds - nteger    æŒ‡å®šä¸€ä¸ªä»¥ç§’ä¸ºå•ä½çš„æ•°å€¼ï¼Œå®Œæˆ TTLè®¾å®šï¼Œè®¾å®šé›†åˆçš„ç”Ÿå­˜æ—¶é—´ã€‚

    7ã€v - index version ç´¢å¼•çš„ç‰ˆæœ¬å·ã€‚é»˜è®¤çš„ç´¢å¼•ç‰ˆæœ¬å–å†³äºmongodåˆ›å»ºç´¢å¼•æ—¶è¿è¡Œçš„ç‰ˆæœ¬ã€‚

    8ã€weights - documentç´¢å¼•æƒé‡å€¼ï¼Œæ•°å€¼åœ¨ 1 åˆ° 99,999 ä¹‹é—´ï¼Œè¡¨ç¤ºè¯¥ç´¢å¼•ç›¸å¯¹äºå…¶ä»–ç´¢å¼•å­—æ®µçš„å¾—åˆ†æƒé‡ã€‚

    9ã€default_language - string å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°å†³å®šäº†åœç”¨è¯åŠè¯å¹²å’Œè¯å™¨çš„è§„åˆ™çš„åˆ—è¡¨ã€‚ é»˜è®¤ä¸ºè‹±è¯­

    10ã€language_override - string å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†åŒ…å«åœ¨æ–‡æ¡£ä¸­çš„å­—æ®µåï¼Œè¯­è¨€è¦†ç›–é»˜è®¤çš„languageï¼Œé»˜è®¤å€¼ä¸º language.


ä¸‰ã€ç´¢å¼•ç±»å‹

    åˆ›å»ºç´¢å¼•çš„ä¸¤ç§ä¸åŒ:

        éå…¨æ–‡ç´¢å¼•     ensureIndex({key: value}): keyä¸ºå­—æ®µåï¼Œå€¼ä¸º1æˆ–-1ä»£è¡¨ç´¢å¼•çš„æ’åºæ–¹å‘
        å…¨æ–‡ç´¢å¼•     ensureIndex({key: &apos;text&apos;}): keyä¸ºå­—æ®µåï¼Œvalueä¸ºå›ºå®šçš„&apos;text&apos;å­—ç¬¦ä¸²

    1ã€_idç´¢å¼• - æ˜¯ç»å¤§å¤šæ•°é›†åˆé»˜è®¤å»ºç«‹çš„ç´¢å¼•, æ’å…¥ä¸€æ¡æ•°æ®è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç´¢å¼•

    2ã€å•é”®ç´¢å¼• - æœ€æ™®é€šçš„ç´¢å¼• ä¸_idä¸åŒçš„æ˜¯ï¼Œå•é”®ç´¢å¼•ä¸ä¼šè‡ªåŠ¨åˆ›å»º

        Example:

            {x: 1, y: 2, z: 3}        // å½“å‰è¡¨

            db.myColl.ensureIndex({x: 1})        // ä½¿ç”¨ x ä½œä¸ºç´¢å¼•
            for(var i=0, i&lt;10; i++) db.myColl.insert({x: 2, y: i+&apos;y&apos;; z: i+&apos;z&apos;});
            for(var i=0, i&lt;10; i++) db.myColl.insert({x: 1, y: i+&apos;y&apos;; z: i+&apos;z&apos;});        // æ’å…¥10æ¡æ•°æ®ï¼Œxä¸º1
            db.myColl.find({x:1});            // ç”¨ç´¢å¼•æŸ¥å‡ºæ•°æ®


    3ã€å¤šé”®ç´¢å¼• - å¤šé”®ç´¢å¼•ä¸å•é”®ç´¢å¼•åˆ›å»ºå½¢åŠ¿ç›¸åŒ

            å•é”®ç´¢å¼•: å€¼æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—æˆ–æ—¥æœŸ

            å¤šé”®ç´¢å¼•: å€¼æœ‰å¤šä¸ªè®°å½•ï¼Œå¦‚æ•°ç»„

            db.myColl.insert({x: [1,2,3,4,5]});


    4ã€å¤åˆç´¢å¼• - æŸ¥è¯¢æ¡ä»¶ä¸åªæœ‰ä¸€ä¸ªï¼Œéœ€è¦å»ºç«‹å¤åˆç´¢å¼•            

        db.myColl.ensureIndex({x: 1, y: 1})        // å®šä¹‰å¤åˆç´¢å¼•
        db.myColl.find({x:1, y: 1})        // é€šè¿‡å¤åˆç´¢å¼•æŸ¥è¯¢

        è®¾ç½®åçš„ç´¢å¼•:
        [
            {
                &quot;v&quot; : 2,
                &quot;key&quot; : {
                    &quot;_id&quot; : 1
                },
                &quot;name&quot; : &quot;_id_&quot;,
                &quot;ns&quot; : &quot;tuniu.gt&quot;
            },
            {
                &quot;v&quot; : 2,
                &quot;key&quot; : {
                    &quot;x&quot; : 1,        // è¿™é‡Œ
                    &quot;y&quot; : 1
                },
                &quot;name&quot; : &quot;id_1_money_1&quot;,
                &quot;ns&quot; : &quot;tuniu.gt&quot;
            }
        ]


    5ã€è¿‡æœŸç´¢å¼• - åœ¨ä¸€æ®µæ—¶é—´åä¼šè¿‡æœŸçš„ç´¢å¼•, expireAfterSeconds

        ç´¢å¼•è¿‡æœŸåæ•°æ®ä¼šè¢«åˆ é™¤, æ’å…¥çš„æ•°æ®ä¼šåœ¨30ç§’ååˆ é™¤, å¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯, å­˜å‚¨æ—¥å¿—

        db.myColl.ensureIndex({time: 1}, {expireAfterSeconds: 30})        // expireAfterSeconds å®šä¹‰30ç§’å timeå€¼çš„ç´¢å¼•åˆ é™¤

        db.myColl.insert({username: &apos;siguang&apos;, password: &apos;xxxx&apos;, time: new Date()});        // new Date() å½“å‰æ—¶é—´, 30ç§’åä¼šè‡ªåŠ¨åˆ é™¤å½“å‰è¿™æ¡è®°å½•

        ** æ³¨æ„ å½“æ•°æ®é‡ä¸å¤§çš„æ—¶å€™æœ€å°é—´éš”ä¸º60ç§’, å°±ç®—è®¾ç½®30ç§’ä¹Ÿä¼šæŒ‰60ç§’æ¥å®Œæˆ ** 
        ** åˆ›å»ºtimeçš„å€¼å¿…é¡»æ˜¯æ—¶é—´ç±»å‹ISODate **


    6ã€å…¨æ–‡ç´¢å¼•

        *** æ³¨æ„ï¼šmongoä¸­ä¸æ”¯æŒä¸­æ–‡çš„å…¨æ–‡ç´¢å¼• ***

        å…¨æ–‡ç´¢å¼•æ¯æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ª$textæŸ¥è¯¢

        db.myColl.ensureIndex({key: &quot;text&quot;})

        db.myColl.ensureIndex({&quot;$**&quot;: &quot;text&quot;})        å¯¹æ‰€æœ‰å­—æ®µä½œå…¨æ–‡ç´¢å¼•ï¼Œè€Œä¸æ˜¯æŸä¸€ä¸ªå­—æ®µ


        æŸ¥è¯¢å…¨æ–‡ç´¢å¼•ï¼š

            db.myTabel.find({$test: {$search: &apos;aa&apos;}})   åªæœ‰å€¼ä¸ºaaæ—¶ä¸åŒ…å«å…¶å®ƒå­—ç¬¦æ—¶è¿”å›

            db.myTabel.find({$test: {$search: &apos;aa bb cc&apos;}})   å¦‚æœæ˜¯ aa æˆ– bb æˆ– cc æ—¶è¿”å›  ç›¸å½“äº ||

            db.myTabel.find({$test: {$search: &apos;aa bb -cc&apos;}})  åŒ…å« aa æˆ– bb ï¼Œä½†ä¸åŒ…å« cc æ—¶è¿”å›

            db.myTabel.find({$test: {$search: &apos;\&apos;aa\&apos; \&apos;bb\&apos; \&apos;cc\&apos;&apos;}})  aa bb cc éƒ½åŒ…å«  ç›¸å½“äº &amp;&amp;


        ç›¸é€‚åº¦: $meta

            {score: {$meta: &apos;textscore&apos;}}  å†™åœ¨æŸ¥è¯¢æ¡ä»¶åé¢å¯ä»¥è¿”å›ç›¸ä¼¼åº¦çš„ç»“æœï¼Œä¸sortä¸€èµ·ä½¿ç”¨å¯ä»¥è¾¾åˆ°å®ç”¨çš„æ•ˆæœ

            Example:

            db.app.find({$text: {$search: &apos;æ–°äº¬æŠ¥&apos;}}, {score: {$meta: &apos;textScore&apos;}})

            // db.app.find({$text: {$search: &apos;æ–°äº¬æŠ¥&apos;}}, {score: {$meta: &apos;textScore&apos;}}).sort({scope: {$meta: &apos;textScore&apos;}})       // scopeå€¼æ¥æ’åº

            { &quot;_id&quot; : ObjectId(&quot;58e31b4c47e9f10d47bd55ec&quot;), &quot;title&quot; : &quot;å…±äº«å•è½¦ç›¸éšæ€»ç†å‡ºå›½é—¨&quot;, &quot;article&quot; : &quot;ä»Šå¹´1æœˆï¼Œæ‘©æ‹œå•è½¦åˆ›å§‹äºº&quot;, &quot;author&quot; : &quot;æ–°äº¬æŠ¥(åŒ—äº¬)&quot;, &quot;dateTime&quot; : ISODate(&quot;2017-04-04T04:04:28.585Z&quot;), &quot;score&quot; : 0.75 }
            { &quot;_id&quot; : ObjectId(&quot;58e31b4c47e9f10d47bd55ed&quot;), &quot;title&quot; : &quot;æå…‹å¼ºèµè¿™å®¶ä¼ä¸šä¸€åˆ†é’Ÿç©¿è¶Šäº†ä¸¤ä¸ªæ—¶ä»£&quot;, &quot;article&quot; : &quot;å½“æ—¶ï¼Œæ¥è¿™é‡Œè€ƒå¯Ÿçš„ã€‚&quot;, &quot;author&quot; : &quot;æ–°äº¬æŠ¥123(åŒ—äº¬)&quot;, &quot;dateTime&quot; : ISODate(&quot;2017-04-04T04:04:28.624Z&quot;), &quot;score&quot; : 0.75 }

            è¿™é‡Œç»“æœè¿”å› scope çš„å€¼æ˜¯å°±ç›¸é€‚åº¦çš„æƒ…å†µ


å››ã€ç´¢å¼•å±æ€§

    1ã€name ä¸ºç´¢å¼•æŒ‡å®šnameå€¼

        ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªå¤åˆç´¢å¼•ï¼Œå¯ä»¥ç»Ÿä¸€ç»™ä»–ä»¬ä¸€ä¸ªåè¿™æ ·ï¼Œåœ¨åˆ é™¤ç´¢å¼•çš„æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡åå­—æ¥åˆ é™¤

        db.myColl.ensureIndex({id: 1, type: 1, money: 1}, {name: &apos;idx&apos;});        // å®šä¹‰ç´¢å¼•name, å¦‚æœä¸åŠ mongoä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªnameå€¼ ä¸ºkey_1

        db.myColl.dropIndexes(&apos;idx&apos;);


    2ã€unique å”¯ä¸€ç´¢å¼•

        å”¯ä¸€ç´¢å¼•ï¼šä¸èƒ½åœ¨ä¸€ä¸ªå­—æ®µæ’å…¥ç›¸åŒçš„å€¼ï¼Œå¦‚idå¦‚æœæœ‰1ï¼Œåœ¨æ’å…¥id=1ä¸å…è®¸

        db.myColl.ensureIndex({id: 1}, {unique: true/false});        // è®¾ç½®äº†idå­—æ®µä¸ºå”¯ä¸€ç´¢å¼•

        db.myColl.insert({id:1, title:&apos;xxx&apos;});        å¦‚æœid=1å­˜åœ¨åˆ™ä¸ä¼šè¢«æ’å…¥


    3ã€sparse ç¨€ç–æ€§


äº”ã€åœ°ç†ä½ç½®ç´¢å¼•

    å°†ä¸€äº›ç‚¹çš„ä½ç½®å­˜å‚¨åœ¨mongoä¸­ï¼Œåˆ›å»ºç´¢å¼•åå¯ä»¥æŒ‰ç…§ä½ç½®æ¥æŸ¥æ‰¾å…¶ç‚¹

    å­åˆ†ç±»ï¼š 2dç´¢å¼•ï¼Œç”¨äºå­˜å‚¨å’ŒæŸ¥æ‰¾å¹³é¢ä¸Šçš„ç‚¹        2dsphereç´¢å¼•ï¼Œç”¨äºå­˜å‚¨å’ŒæŸ¥æ‰¾çƒé¢ä¸Šçš„ç‚¹

    æŸ¥æ‰¾æ–¹å¼: æŸ¥æ‰¾æŸä¸ªç‚¹ä¸€å®šè·ç¦»å†…çš„ç‚¹ï¼ˆæ‰“è½¦è½¯ä»¶ï¼‰    æŸ¥æ‰¾åŒ…å«åœ¨æŸä¸ªåŒºåŸŸå†…çš„ç‚¹

    1ã€åˆ›å»º 2Dç´¢å¼• å¹³é¢åœ°ç†ä½ç½®ç´¢å¼•

        db.location.ensureIndex({w: &apos;2d&apos;})        // åˆ›å»ºç´¢å¼•

        db.location.insert({w: [1, 1]});        // æ’å…¥ç»ã€çº¬åº¦ï¼Œ ç»åº¦å€¼åœ¨-180 è‡³ 180 ä¹‹é—´ï¼Œ çº¬åº¦å€¼åœ¨ -90 è‡³ 90 ä¹‹é—´
        db.location.insert({w: [132, 112]});
        db.location.insert({w: [22, 14]});
        db.location.insert({w: [165, 13]});

        db.location.find({w: {$near: [1,1]}})        // $near æŸ¥æ‰¾è¿‘çš„
        db.location.find({w: {$near: [1,140], $maxDistance: 150}})    // æŸ¥æ‰¾ç»åº¦ 1-150ä¹‹é—´ï¼Œ æˆ–è€…çº¬åº¦140-150ä¹‹é—´   $maxDistrance æœ€å¤§è·ç¦»
</code></pre><h4 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h4><pre><code>aggregate() ä¸»è¦ç”¨äºå¤„ç†æ•°æ®ï¼Œè¿”å›è®¡ç®—åçš„æ•°æ®ç»“æœ

ä¸€ã€$group: å°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œç”¨äºç»Ÿè®¡ç»“æœ

    1ã€sum - è®¡ç®—ä¸ªæ•°    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$sum : &quot;$currentCount&quot;}}}])

    2ã€avg - è®¡ç®—å¹³å‡å€¼    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$avg : &quot;$currentCount&quot;}}}])

    3ã€min - è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$min : &quot;$currentCount&quot;}}}])

    4ã€max - è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$max : &quot;$currentCount&quot;}}}])

    5ã€push - åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$push: &quot;$currentCount&quot;}}}])

    6ã€addToSet - åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, total: {$addToSet : &quot;$currentCount&quot;}}}])

    7ã€first - æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, firstDoc: {$first : &quot;$currentCount&quot;}}}])

    8ã€last - æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ®    db.mycol.aggregate([{$group : { _id: &quot;$dimensionType&quot;, firstDoc: {$last : &quot;$currentCount&quot;}}}])

    Example:

        // æŸ¥å‡ºæ¥çš„æ–‡æ¡£
        db.col.find().pretty();        
        {
            &quot;_id&quot; : ObjectId(&quot;59ae6c665f1fe4de50cb54d0&quot;),
            &quot;dimensionType&quot; : &quot;AGE&quot;,
            &quot;loanId&quot; : &quot;113029&quot;,
            &quot;currentCount&quot; : 30000,
        },
        {
            &quot;_id&quot; : ObjectId(&quot;59ae6c665f1fe4de50cb54d1&quot;),
            &quot;dimensionType&quot; : &quot;OMG&quot;,
            &quot;loanId&quot; : &quot;1129602&quot;,
            &quot;currentCount&quot; : 30000
        },
        {
            &quot;_id&quot; : ObjectId(&quot;59ae6c665f1fe4de50cb54d2&quot;),
            &quot;dimensionType&quot; : &quot;AGE&quot;,
            &quot;loanId&quot; : &quot;113031&quot;,
            &quot;currentCount&quot; : 40000
        },
        {
            &quot;_id&quot; : ObjectId(&quot;59ae6c665f1fe4de50cb54d3&quot;),
            &quot;dimensionType&quot; : &quot;AGE&quot;,
            &quot;loanId&quot; : &quot;113016&quot;,
            &quot;currentCount&quot; : 40000
        },
        {
            &quot;_id&quot; : ObjectId(&quot;59ae6c665f1fe4de50cb54d4&quot;),
            &quot;dimensionType&quot; : &quot;HSR&quot;,
            &quot;loanId&quot; : &quot;112910&quot;,
            &quot;currentCount&quot; : 30000
        }

        1ï¼‰é€šè¿‡æ¸¸æ ‡æ¥è®¡ç®— dimensionTypeè®¡ç®—å‡ºç±»åˆ«çš„ä¸ªæ•°

            db.col.aggregate([
                {
                    $group:{
                        _id: &quot;$dimensionType&quot;,
                        count: {$sum: 1}
                    }
                }
            ])        

            // ç»“æœ è¿”å›
            { 
                &quot;_id&quot; : &quot;HSR&quot;, 
                &quot;count&quot; : 1.0
            }
            { 
                &quot;_id&quot; : &quot;OMG&quot;, 
                &quot;count&quot; : 1.0
            }
            { 
                &quot;_id&quot; : &quot;AGE&quot;, 
                &quot;count&quot; : 3.0
            }

        2) é€šè¿‡dimensionTypeåˆ— ä¸­ä¸åŒç±»å‹æ¥è®¡ç®— currentCountåˆ—çš„æ€»åˆ

            db.col.aggregate([
                {
                    $group:{
                        _id: &quot;$dimensionType&quot;,
                        total: {$sum: &quot;$currentCount&quot;}
                    }
                }
            ])

            // è¿”å›ç»“æœ
            { 
                &quot;_id&quot; : &quot;HSR&quot;, 
                &quot;total&quot; : 30000.0
            }
            { 
                &quot;_id&quot; : &quot;OMG&quot;, 
                &quot;total&quot; : 30000.0
            }
            { 
                &quot;_id&quot; : &quot;AGE&quot;, 
                &quot;total&quot; : 110000.0
            }


äºŒã€ç®¡é“ç¬¦:

    $projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚

    $matchï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚$matchä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚

        db.col.aggregate([
            {
                $match: {
                    currentCount: {$gt: 30000}
                }
            },
            {
                $group:{
                    _id: &quot;$dimensionType&quot;,
                    min: {$sum: &quot;$currentCount&quot;}
                }
            }
        ])
        å…ˆå°†currentCountå­—æ®µå¤§äº30000çš„åŒ¹é…å‡ºæ¥ï¼Œåœ¨é€šè¿‡åˆ†ç»„å–å‡ºcurrentCountçš„æ€»å’Œ

    $limitï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚

    $skipï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚

    $unwindï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚

    $groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚

    $sortï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚

    $geoNearï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚


ä¸‰ã€count()  è¿”å›ä¸ªæ•°

    db.cars.count();        // è¿”å›è®°å½•çš„ä¸ªæ•°

    db.cars.count({price: 1000})    // è¿”å›price=1000 è®°å½•çš„ä¸ªæ•°

    db.cars.count({price: {$lt: 1000})    // è¿”å›price &lt; 1000 è®°å½•çš„ä¸ªæ•°


å››ã€distinct()  æŒ‡å®šæŸä¸€ä¸ªå­—æ®µè¿”å›ä¸é‡å¤çš„æ•°æ®ï¼Œå¦‚ age: &apos;a&apos;  age: &apos;b&apos;  age: &apos;a&apos;   

    db.myColl.distinct(&quot;price&quot;);        // [&apos;a&apos;, &apos;b&apos;]    

äº”ã€mapReduce(ï¼‰
</code></pre><h4 id="æ¸¸æ ‡"><a href="#æ¸¸æ ‡" class="headerlink" title="æ¸¸æ ‡"></a>æ¸¸æ ‡</h4><h4 id="åˆ›å»ºç”¨æˆ·ç®¡ç†"><a href="#åˆ›å»ºç”¨æˆ·ç®¡ç†" class="headerlink" title="åˆ›å»ºç”¨æˆ·ç®¡ç†"></a>åˆ›å»ºç”¨æˆ·ç®¡ç†</h4><pre><code>mongoé»˜è®¤æ˜¯æ²¡æœ‰ç®¡ç†å‘˜è´¦æˆ·ï¼Œéœ€è¦åœ¨adminæ•°æ®åº“ä¸­ä½¿ç”¨db.addUser()æ¥æ·»åŠ ç®¡ç†å‘˜è´¦å·ï¼Œå¦åˆ™ä»»ä½•äººéƒ½å¯ä»¥æ“ä½œæ•°æ®åº“ï¼Œadminåº“ä¸­æœ‰system.userçš„collectionè¿™å°±æ˜¯ç”¨æˆ·è¡¨ï¼Œç”¨æ¥å­˜æ”¾è¶…çº§ç®¡ç†å‘˜

ç”¨æˆ·åˆ†ä¸ºä¸¤ç§: ä¸€ç§æ˜¯adminç”¨æˆ·ï¼Œå¦ä¸€ç§æ˜¯åœ¨æŒ‡å®šæ•°æ®åº“çš„ç”¨æˆ·ï¼Œadminç”¨æˆ·æ˜¯æœ€é«˜æƒé™ 

1ã€createUser() åˆ›å»ºç”¨æˆ·

    $ use admin    // å…ˆè¦åˆ‡æ¢åˆ°adminåº“

    $ show users     // æ˜¾ç¤ºå½“å‰åº“ä¸‹è®¾ç½®çš„æ‰€æœ‰è®¾ç½®çš„ç”¨æˆ·æƒé™

    $ db.createUser(
        {
            user: &quot;root&quot;,        // ç”¨æˆ·å
            pwd: &quot;ssssss&quot;,        // å¯†ç 
            roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; } ]
        }
    )

    user - æ®µä»‹ç»ï¼š userå­—æ®µï¼Œä¸ºæ–°ç”¨æˆ·çš„åå­—ï¼›
    pwd - ç”¨æˆ·çš„å¯†ç ï¼›
    cusomData - ä¸ºä»»æ„å†…å®¹ï¼Œä¾‹å¦‚å¯ä»¥ä¸ºç”¨æˆ·å…¨åä»‹ç»ï¼›
    roles - æŒ‡å®šç”¨æˆ·çš„è§’è‰²ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç©ºæ•°ç»„ç»™æ–°ç”¨æˆ·è®¾å®šç©ºè§’è‰²ï¼›å¯ä»¥æŒ‡å®šå†…ç½®è§’è‰²å’Œç”¨æˆ·å®šä¹‰çš„è§’è‰²ã€‚

    Rolesï¼ˆå†…ç½®è§’è‰²ï¼‰ï¼š 

        1. æ•°æ®åº“ç”¨æˆ·è§’è‰²ï¼šreadã€readWrite;      // è¯»ã€è¯»å†™

        2. æ•°æ®åº“ç®¡ç†è§’è‰²ï¼šdbAdminã€dbOwnerã€userAdminï¼›    // ç®¡ç†æƒé™

        3. é›†ç¾¤ç®¡ç†è§’è‰²ï¼šclusterAdminã€clusterManagerã€clusterMonitorã€hostManagerï¼›

        4. å¤‡ä»½æ¢å¤è§’è‰²ï¼šbackupã€restoreï¼›

        5. æ‰€æœ‰æ•°æ®åº“è§’è‰²ï¼šreadAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€dbAdminAnyDatabase

        6. è¶…çº§ç”¨æˆ·è§’è‰²ï¼šroot   // è¿™é‡Œè¿˜æœ‰å‡ ä¸ªè§’è‰²é—´æ¥æˆ–ç›´æ¥æä¾›äº†ç³»ç»Ÿè¶…çº§ç”¨æˆ·çš„è®¿é—®ï¼ˆdbOwner ã€userAdminã€userAdminAnyDatabaseï¼‰

        7. å†…éƒ¨è§’è‰²ï¼š__system

        PSï¼šå…³äºæ¯ä¸ªè§’è‰²æ‰€æ‹¥æœ‰çš„æ“ä½œæƒé™å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„å†…ç½®è§’è‰²é“¾æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚


2ã€è®¾ç½®å®Œç”¨æˆ·æƒé™è¿›è¡Œé‡å¯mongodæœåŠ¡

    $ db.shtdownServer();        // å…³é—­mongodæœåŠ¡ï¼Œæˆ–è€…killæ‰

    // è¿›å…¥binç›®å½•ä¸‹å¯åŠ¨mongod

    $ mongod --auth                // æ³¨æ„åŠ æƒé™å°±éœ€è¦ä½¿ç”¨è¿™ä¸ªæ¥å¯åŠ¨æœåŠ¡,è€Œä¸æ˜¯å•ç‹¬çš„mongod &amp;


3ã€mongoç™»å½•

    $ mongo --port 27017 -u &quot;root&quot; -p &quot;ssssss&quot; --authenticationDatabase &quot;admin&quot;

    $ use admin

    $ db.auth(&quot;root&quot;, &quot;ssssss&quot;);        // 1è¡¨ç¤ºç™»å½•æˆåŠŸï¼Œ0è¡¨ç¤ºç™»å½•å¤±è´¥ã€‚


4ã€åˆ›å»ºå…¶å®ƒç”¨æˆ·

    use myCar
    db.createUser(
        {
            user: &quot;car&quot;,
            pwd: &quot;welcomeCar&quot;,
            roles: [ 
                { role: &quot;readWrite&quot;, db: &quot;myCar&quot; },
                { role: &quot;dbAdmin&quot;, db: &quot;myCar&quot; },
                { role: &quot;clusterMonitor&quot;, db:&quot;admin&quot;}
            ]
        }
    )


5ã€ä½œä¸ºå…¶å®ƒç”¨æˆ·è¿›è¡Œè¿æ¥å’ŒéªŒè¯èº«ä»½

    mongo --port 27017
    use myCar
    db.auth(&quot;car&quot;, &quot;welcomeCar&quot;)


6ã€ä¿®æ”¹è§’è‰²

    db.grantRolesToUser(
        &quot;sms&quot;,
        [
            { role: &quot;clusterMonitor&quot;, db:&quot;admin&quot;} 
        ]
    )
</code></pre><h4 id="confé…ç½®æ–‡ä»¶"><a href="#confé…ç½®æ–‡ä»¶" class="headerlink" title=".confé…ç½®æ–‡ä»¶"></a>.confé…ç½®æ–‡ä»¶</h4><pre><code>systemLog:
    destination: file
path: /usr/local/var/log/mongodb/mongo.log
    logAppend: true
storage:
    dbPath: /usr/local/var/mongodb
net:
    bindIp: 127.0.0.1
security:
    authorization:enabled      // å¼€å¯æƒé™
</code></pre><h4 id="åˆ†ç‰‡"><a href="#åˆ†ç‰‡" class="headerlink" title="åˆ†ç‰‡"></a>åˆ†ç‰‡</h4><h4 id="MongoDBå¯¼å…¥ã€å¯¼å‡ºåŠæ•°æ®åº“å¤‡ä»½ä¸æ¢å¤"><a href="#MongoDBå¯¼å…¥ã€å¯¼å‡ºåŠæ•°æ®åº“å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="MongoDBå¯¼å…¥ã€å¯¼å‡ºåŠæ•°æ®åº“å¤‡ä»½ä¸æ¢å¤"></a>MongoDBå¯¼å…¥ã€å¯¼å‡ºåŠæ•°æ®åº“å¤‡ä»½ä¸æ¢å¤</h4><pre><code>1ã€mongoexport - å°† collection å¯¼å‡ºæˆJSONæˆ–CSVæ ¼å¼

    mongoexport  -d åº“å  -c collectionå   -o è¾“å‡ºçš„æ–‡ä»¶å   --type å¯¼å‡ºçš„æ ¼å¼json/csv  -f  è¾“å‡ºçš„å­—æ®µï¼Œå¦‚æœtypeæ˜¯CSVéœ€è¦æŒ‡å®šå­—æ®µå

    Example: sudo mongoexport -d tun -c gt -o gentuanyou --type json


2ã€mongoimport - å°† collection å¯¼å…¥åˆ°

    mongoimport  -d åº“å  -c colectionå  --file å¯¼å…¥çš„æ–‡ä»¶å   --type å¯¼å…¥çš„æ ¼å¼  -f å¯¼å…¥çš„å­—æ®µå  --headerline å¦‚æœå¯¼å…¥æ˜¯csvåˆ™å¯ä»¥ä½¿ç”¨ç¬¬ä¸€è¡Œæ ‡é¢˜ 


3ã€mongodump - åº“å¤‡ä»½

    mongodump  -h æœåŠ¡å™¨åœ°å€   -d æ•°æ®åº“å   -o å¤‡ä»½çš„ä½ç½®

    Example: mongodump -h 127.0.0.1 -d tun -o /Users/apple/siguang.liu/mongoBackup


4ã€mongorestore - æ•°æ®åº“æ¢å¤

    mongorestore  -h æœåŠ¡å™¨åœ°å€  -d éœ€è¦æ¢å¤çš„æ•°æ®åº“   --dir å¤‡ä»½æ•°æ®çš„ä½ç½®    [--drop æ¢å¤å…ˆåˆ é™¤æ•°æ®ï¼Œç„¶åæ¢å¤æ•°æ®]

    mongorestore -h 127.0.0.1 -d tun --dir /Users/apple/siguang.liu/mongoBackup
</code></pre><h4 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h4><pre><code>å¯¹MongoDBæœåŠ¡çš„è¿è¡Œæƒ…å†µå’Œæ€§èƒ½è¿›è¡Œç›‘æ§

1ã€mongostatã€mongoStop      mongostatæ˜¯mongdbè‡ªå¸¦çš„çŠ¶æ€æ£€æµ‹å·¥å…·, æŸ¥çœ‹mongoè¿è¡ŒçŠ¶æ€çš„ç¨‹åº

    ä½¿ç”¨: å…ˆåˆ°binç›®å½• cd /usr/local/Cellar/mongodb/3.4.3/bin                è¿›è¡Œ mongostatç›®å½• $ mongostat --help   æ¥æŸ¥çœ‹æ–‡æ¡£

            mongostat -h 127.0.0.1:123    -uç”¨æˆ·å -på¯†ç         æ‰§è¡Œä¾¦å¬

    æ—¥å¿—: 

        http://www.cnmyColls.com/zhuque/archive/2013/03/29/2988577.html

        insert    æ’å…¥æ•°é‡
        query    æŸ¥è¯¢æ•°é‡
        update  æ›´æ–°æ•°é‡
        delete     åˆ é™¤æ•°é‡
        getmore 
        command 
        flushes    è™šæ‹Ÿæ˜ å°„
        mapped     
        vsize   å ç£ç›˜çš„ç©ºé—´
        res     å å†…å­˜å¤§å°
        idx miss å¦‚æœå€¼è¿‡é«˜ï¼Œè¯´æ˜ç´¢å¼•åˆ›å»ºçš„æœ‰é—®é¢˜
        qrw     qr è¯»é˜Ÿåˆ—ï¼Œqw å†™é˜Ÿåˆ— æ€§èƒ½æŒ‡æ ‡çš„ä¸€å—ï¼Œå¦‚æœå€¼æ¯”è¾ƒé«˜å‡ºç°æ€§èƒ½é—®é¢˜
        arw 
        net_in 
        net_out 
        conn    è¿æ¥mongoçš„æ•°é‡            
        time


2ã€profile é›†åˆä»‹ç»

    db.getProfilingStatus();        // è·å–


3ã€æ—¥å¿—ä»‹ç»

4ã€explain(): 

    db.users.find({id: 10000}).explain(&apos;executionStats&apos;)

        explain()ä¸‰ä¸ªå‚æ•°ï¼š&apos;queryPlanner&apos;, &apos;executionStats&apos;, å’Œ&apos;allPlansExecution&apos;

    result:
    {
        &quot;queryPlanner&quot; : {
            &quot;plannerVersion&quot; : 1,
            &quot;namespace&quot; : &quot;myCar.users&quot;,
            &quot;indexFilterSet&quot; : false,
            &quot;parsedQuery&quot; : {
                &quot;name&quot; : {
                    &quot;$eq&quot; : &quot;user99989&quot;
                }
            },
            &quot;winningPlan&quot; : {
                &quot;stage&quot; : &quot;COLLSCAN&quot;,
                &quot;filter&quot; : {
                    &quot;name&quot; : {
                        &quot;$eq&quot; : &quot;user99989&quot;
                    }
                },
                &quot;direction&quot; : &quot;forward&quot;
            },
            &quot;rejectedPlans&quot; : [ ]
        },
        &quot;executionStats&quot; : {
            &quot;executionSuccess&quot; : true,        // æ˜¯å¦æˆåŠŸ
            &quot;nReturned&quot; : 1,                // è¿”å›çš„æ•°é‡
            &quot;executionTimeMillis&quot; : 49,        // *** é‡è¦çš„æ‰§è¡Œæ—¶é—´   
            &quot;totalKeysExamined&quot; : 0,
            &quot;totalDocsExamined&quot; : 100000,    // æ€»å…±æ£€æŸ¥äº†å¤šå°‘ä¸ªæ–‡æ¡£
            &quot;executionStages&quot; : {
                &quot;stage&quot; : &quot;COLLSCAN&quot;,
                &quot;filter&quot; : {
                    &quot;name&quot; : {
                        &quot;$eq&quot; : &quot;user99989&quot;
                    }
                },
                &quot;nReturned&quot; : 1,
                &quot;executionTimeMillisEstimate&quot; : 50,
                &quot;works&quot; : 100002,
                &quot;advanced&quot; : 1,
                &quot;needTime&quot; : 100000,
                &quot;needYield&quot; : 0,
                &quot;saveState&quot; : 783,
                &quot;restoreState&quot; : 783,
                &quot;isEOF&quot; : 1,
                &quot;invalidates&quot; : 0,
                &quot;direction&quot; : &quot;forward&quot;,
                &quot;docsExamined&quot; : 100000
            }
        },
        &quot;serverInfo&quot; : {
            &quot;host&quot; : &quot;appledeMacBook-Pro-2.local&quot;,
            &quot;port&quot; : 27017,
            &quot;version&quot; : &quot;3.4.3&quot;,
            &quot;gitVersion&quot; : &quot;f07437fb5a6cca07c10bafa78365456eb1d6d5e1&quot;
        },
        &quot;ok&quot; : 1
    }
</code></pre><h4 id="å¯è§†åŒ–å·¥å…·"><a href="#å¯è§†åŒ–å·¥å…·" class="headerlink" title="å¯è§†åŒ–å·¥å…·"></a>å¯è§†åŒ–å·¥å…·</h4><pre><code>Studio-3Tã€Robomongo
</code></pre><h4 id="æ”¶é›†"><a href="#æ”¶é›†" class="headerlink" title="æ”¶é›†"></a>æ”¶é›†</h4><pre><code>1ã€ä½¿ç”¨mongoShellè¯­å¥æ¥é€šè¿‡_idæŸ¥è¯¢æ›´æ–°æ—¶éœ€è¦åŠ ObjectId(&quot;&quot;), å¦‚æœç¨‹åºå¤„ç†ä¸éœ€è¦åŠ 

    db.col.update({_id: ObjectId(&quot;59acc404bef510c028190630&quot;)},{$set: {&apos;by&apos;: &apos;mongodb&apos;}})
</code></pre><h4 id="å¡«å‘"><a href="#å¡«å‘" class="headerlink" title="å¡«å‘"></a>å¡«å‘</h4><pre><code>1ã€é¦–æ¬¡å®‰è£… åˆ›å»ºå­˜æ”¾æ•°æ®çš„ç›®å½•æ—¶ $ sudo mkdir -p /data/db  å¦‚æœè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„æƒé™æ˜¯rooté‚£å¯åŠ¨mongodå°±ä¼šæŠ¥é”™ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹è¿™ä¸¤ä¸ªç›®å½•çš„æƒé™

    $ sudo chown apple:admin /data        // appleä¸ºæˆ‘å½“å‰ç”¨æˆ·çš„åç§°

    $ sudo chown apple:admin /data/db

2ã€å¯åŠ¨æ—¶å¦‚æœæç¤º Failed to unlink socket file /tmp/mongodb-27017.sock errno:1 Operation not permitted

    å› ä¸º/tmp/mongodb-27017.sockè¿™ä¸ªæ–‡ä»¶æ²¡æœ‰æ“ä½œæƒé™, æ˜¯rootç”¨æˆ·å¯åŠ¨æ²¡æˆåŠŸååˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶
    éœ€è¦åˆ°tmpç›®å½•ä¸‹åˆ é™¤è¿™ä¸ªæ–‡ä»¶åœ¨é‡å¯

    $ cd /tmp &amp;&amp; sodu rm -rf mongodb-27017.sock
</code></pre><p>| å‚è€ƒèµ„æ–™<br>|<br>| <a href="http://www.mongoing.com" target="_blank" rel="noopener">http://www.mongoing.com</a>            // ä¸­æ–‡ç½‘ç«™<br>| <a href="http://www.jianshu.com/p/dd0c39bf7be4" target="_blank" rel="noopener">http://www.jianshu.com/p/dd0c39bf7be4</a>                      // mongoå®‰è£…<br>| <a href="http://www.runoob.com/mongodb/mongodb-objectid.html" target="_blank" rel="noopener">http://www.runoob.com/mongodb/mongodb-objectid.html</a>      // æ–‡æ¡£<br>| <a href="http://www.yiibai.com/mongodb/mongodb_drop_database.html" target="_blank" rel="noopener">http://www.yiibai.com/mongodb/mongodb_drop_database.html</a><br>| <a href="http://blog.csdn.net/jaylong35/article/details/7219410" target="_blank" rel="noopener">http://blog.csdn.net/jaylong35/article/details/7219410</a>  // æœåŠ¡çš„å¼€å¯ä¸å…³é—­<br>| <a href="http://blog.csdn.net/dbabruce/article/details/50963956" target="_blank" rel="noopener">http://blog.csdn.net/dbabruce/article/details/50963956</a>  // ç”¨æˆ·æƒé™<br>| <a href="http://www.cnblogs.com/qingtianyu2015/p/5968400.html" target="_blank" rel="noopener">http://www.cnblogs.com/qingtianyu2015/p/5968400.html</a>    // åº“çš„å¯¼å…¥ã€å¯¼å‡º<br>| <a href="https://robomongo.org" target="_blank" rel="noopener">https://robomongo.org</a>     // mongoDBå¯è§†åŒ–å·¥å…·<br>|<br>| <a href="http://blog.csdn.net/u013457382/article/category/6114612" target="_blank" rel="noopener">http://blog.csdn.net/u013457382/article/category/6114612</a><br>| <a href="http://www.cnblogs.com/zhongweiv/p/node_mongodb.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhongweiv/p/node_mongodb.html</a></p>

        
    </section>
</article>




<nav class="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
</nav>


</div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>
</footer>

<script type="text/javascript" src="//s13.cnzz.com/z_stat.php?id=1234567890&amp;web_id=1234567890"></script>


    </div>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    
    <script type="text/javascript">
        $(function() {
            var nodes = {
                nav: $('#nav'),
                aside: $('#aside'),
                navTags: $('#nav-tags')
            };

            $('#open-panel, #aside-mask').on('click', function() {
                nodes.aside.toggleClass('panel-show');
            });
            $('#nav-tag').on('click', function(event) {
                event.preventDefault();console.log(nodes.navTags.attr('class'))
                nodes.navTags.toggleClass('tag-show');console.log(nodes.navTags.attr('class'))
            })/*.hover(function() {
                nodes.navTags.addClass('tag-show');
            }, function() {
                nodes.navTags.removeClass('tag-show');
            });*/

            
        });
    </script>

</body>
</html>
